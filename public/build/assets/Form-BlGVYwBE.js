import{r as _,j as e,L as f,$ as y,S as o}from"./app-Ckd00XjB.js";import{A as C,a as N,d as b}from"./app-layout-Dp-QZCwA.js";import{B as d}from"./button-DN_423EJ.js";import{C as L,a as A,b as E,c as I}from"./card-Bfsm_5HH.js";import{I as p}from"./input-DREULnrk.js";import{L as i}from"./label-DEtFFioE.js";import{T}from"./textarea-BaMFDxqH.js";import{C as m}from"./checkbox-BEaKSNvU.js";import{S as g,a as k,b as w,c as D,d as q}from"./select-BuIdBPU8.js";import{t as x}from"./index-Cr4Z16Jw.js";import{M as B}from"./MultiSelect-BpvuefrT.js";import"./index-C3MGCd83.js";import"./createLucideIcon-CImEr1Cq.js";import"./index-CN9Vo_2d.js";import"./index-BQq7n3OH.js";import"./app-logo-icon-PGaPTxAU.js";import"./folder-root-BQwvl7Sg.js";import"./grip-vertical--mq8m-37.js";import"./index-DqfOopd4.js";import"./index-CdgcWHLa.js";function re({stage:s,projectTypes:h,users:u}){var n,c;const l=!!s,[a,t]=_.useState({stage_name:(s==null?void 0:s.stage_name)||"",project_type_id:((n=s==null?void 0:s.project_type_id)==null?void 0:n.toString())||"",stage_order:((c=s==null?void 0:s.stage_order)==null?void 0:c.toString())||"",description:(s==null?void 0:s.description)||"",is_mandatory:(s==null?void 0:s.is_mandatory)??!0,users_can_approve:(s==null?void 0:s.users_can_approve)||[],is_last:(s==null?void 0:s.is_last)??!1,level:(s==null?void 0:s.level)||""}),j=r=>{r.preventDefault(),l?o.put(`/approval-stages/${s.id}`,a,{onSuccess:()=>x.success("Stage updated successfully")}):o.post("/approval-stages",a,{onSuccess:()=>x.success("Stage created successfully")})},v=[{title:"Approval Stages",href:"/approval-stages"},{title:l?"Edit Stage":"Create Stage",href:"#"}];return e.jsxs(C,{breadcrumbs:v,children:[e.jsx(f,{title:l?"Edit Stage":"Create Stage"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:e.jsxs(L,{children:[e.jsx(A,{children:e.jsx(E,{children:l?"Edit Approval Stage":"Define New Stage"})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Stage Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{value:a.stage_name,onChange:r=>t({...a,stage_name:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Project Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(g,{value:a.project_type_id,onValueChange:r=>t({...a,project_type_id:r}),children:[e.jsx(k,{children:e.jsx(w,{placeholder:"Select Project Type"})}),e.jsx(D,{children:h.map(r=>e.jsx(q,{value:r.id.toString(),children:r.name},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Stage Order (Sequence) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{type:"number",value:a.stage_order,onChange:r=>t({...a,stage_order:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(T,{value:a.description,onChange:r=>t({...a,description:r.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{id:"mandatory",checked:a.is_mandatory,onCheckedChange:r=>t({...a,is_mandatory:!!r})}),e.jsx(i,{htmlFor:"mandatory",children:"Is Mandatory?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Approvers (Users)"}),e.jsx(B,{options:u.map(r=>({value:r.id.toString(),label:r.name})),value:(a.users_can_approve||[]).map(r=>r.toString()),onChange:r=>t({...a,users_can_approve:r.map(S=>parseInt(S))}),placeholder:"Select Approvers..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{id:"is_last",checked:a.is_last,onCheckedChange:r=>t({...a,is_last:!!r})}),e.jsx(i,{htmlFor:"is_last",children:"Is Last Stage?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{children:"Level"}),e.jsxs("select",{value:a.level,onChange:r=>t({...a,level:r.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Level"}),e.jsx("option",{value:"institutional",children:"Institutional"}),e.jsx("option",{value:"regional",children:"Regional"}),e.jsx("option",{value:"dte",children:"DTE"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(y,{href:"/approval-stages",children:e.jsxs(d,{variant:"outline",type:"button",children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Back"]})}),e.jsxs(d,{type:"submit",children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Save Stage"]})]})]})})]})})]})}export{re as default};
