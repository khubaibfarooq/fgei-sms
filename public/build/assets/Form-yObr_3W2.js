import{R as S,r as c,m as g,j as e,L as _,$ as B,S as f}from"./app-D3Zda7-s.js";import{A as N,S as E,a as I,f as A}from"./app-layout-D0oVuKvM.js";import{B as h}from"./button-D0ykk5KE.js";import{C,a as w,b as L,c as b}from"./card-DeWyH-fD.js";import{I as $}from"./input-8a2gwVkE.js";import{L as R}from"./label-B1pmfvfN.js";import{M as D}from"./MultiSelect-DAGJ7a6d.js";import"./index-8dbb6L18.js";import"./createLucideIcon-BJBBwQHz.js";import"./index-gc8s0OqC.js";import"./index-Clyf9Iso.js";import"./index-CdJxn3IZ.js";import"./index-Cw5gItfd.js";import"./index-w6dIDzxP.js";import"./app-logo-icon-Bewsk-21.js";import"./circle-x-CGnnqkQo.js";import"./clsx-B-dksMZM.js";import"./folder-root-g_X5_4It.js";import"./grip-vertical-XdQTYqMH.js";import"./index-CO1phCkP.js";import"./index-JL9ce8KJ.js";function te({blockType:r,roomTypes:l}){const a=!!r,p=S.useMemo(()=>l?Array.isArray(l)?l.map(s=>({value:s.id.toString(),label:s.name})):Object.entries(l).map(([s,t])=>({value:s,label:t})):[],[l]),[o,i]=c.useState([]);c.useEffect(()=>{if(r!=null&&r.room_type_Ids){const s=r.room_type_Ids.split(",").map(t=>t.trim()).filter(t=>t!==""&&t!==null&&t!==void 0);console.log("Parsed room_type_Ids:",s),i(s)}else i([])},[r]);const{data:u,setData:d,processing:x,errors:m,reset:j}=g({name:(r==null?void 0:r.name)||"",room_type_Ids:(r==null?void 0:r.room_type_Ids)||""});c.useEffect(()=>{const s=o.join(",");d("room_type_Ids",s)},[o,d]);const y=s=>{s.preventDefault();const t={name:u.name,room_type_Ids:o.join(",")};console.log("Submitting data:",t),a?f.put(`/block-types/${r.id}`,t,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{console.log("Block type updated successfully")},onError:n=>{console.log("Errors:",n)}}):f.post("/block-types",t,{onSuccess:()=>{j()},onError:n=>{console.log("Errors:",n)}})},v=[{title:"Block Types",href:"/block-types"},{title:a?"Edit Block Type":"Add Block Type",href:"#"}];return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(_,{title:a?"Edit Block Type":"Add Block Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(L,{className:"text-2xl font-bold",children:a?"Edit Block Type":"Add Block Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Edit Block type details":"Create a new Block type"})]}),e.jsx(E,{}),e.jsx(b,{className:"pt-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"name",children:"Block Type Name"}),e.jsx($,{id:"name",value:u.name,onChange:s=>d("name",s.target.value),placeholder:"Enter Block type name",className:m.name?"border-red-500":""}),m.name&&e.jsx("p",{className:"text-sm text-red-500",children:m.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{options:p,value:o,onChange:i,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0?`${o.length} room type(s) selected: ${o.map(s=>{const t=p.find(n=>n.value===s);return t?t.label:s}).join(", ")}`:"No room types selected"}),m.room_type_Ids&&e.jsx("p",{className:"text-sm text-red-500",children:m.room_type_Ids})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(B,{href:"/block-types",children:e.jsxs(h,{type:"button",variant:"secondary",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(h,{type:"submit",disabled:x,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),x?a?"Saving...":"Adding...":a?"Save Changes":"Add Block Type"]})]})]})})]})})]})}export{te as default};
