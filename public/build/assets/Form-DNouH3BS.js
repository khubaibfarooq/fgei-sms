import{m as y,j as e,L as _,$ as C,S as m,R as u}from"./app-BXWdbT3W.js";import{A as w,S as L,c as E,d as A}from"./app-layout-Doi0KVTf.js";import{B as x}from"./button-BFkT9mtK.js";import{C as F,a as U,b as T,c as $}from"./card-BDnz_o05.js";import{I as p}from"./input-CCK7i7iJ.js";import{L as n}from"./label-Cayjyn4n.js";import{S as j,a as f,b as g,c as v,d as S}from"./select-Da3d1HpX.js";import"./index-BXO_TbJ_.js";import"./createLucideIcon-Cy-08o9H.js";import"./index-DQwmPEEX.js";import"./app-logo-icon-C8DOsSBs.js";import"./folder-root-C0viIaEW.js";import"./grip-vertical-DlxMNeB8.js";import"./index-CSHwwGYQ.js";import"./index-BpVRCxRJ.js";function X({room:s,roomTypes:o,blocks:c}){const r=!!s,{data:t,setData:d,processing:h,reset:b}=y({name:(s==null?void 0:s.name)||"",area:(s==null?void 0:s.area)||0,room_type_id:(s==null?void 0:s.room_type_id)||0,block_id:(s==null?void 0:s.block_id)||0,img:(s==null?void 0:s.img)||null}),N=a=>{a.preventDefault();const i=new FormData;Object.keys(t).forEach(l=>{if(!(t[l]===null||t[l]==="")){if(l==="img"){t[l]instanceof File&&i.append(l,t[l]);return}i.append(l,t[l])}}),r?(i.append("_method","PUT"),m.post(`/rooms/${s.id}`,i,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.get("/rooms")}})):m.post("/rooms",i,{onSuccess:()=>{b()}})},R=[{title:"Rooms",href:"/rooms"},{title:r?"Edit Room":"Add Room",href:"#"}];return e.jsxs(w,{breadcrumbs:R,children:[e.jsx(_,{title:r?"Edit Room":"Add Room"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(F,{children:[e.jsxs(U,{children:[e.jsx(T,{className:"text-2xl font-bold",children:r?"Edit Room":"Add Room"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit room details":"Create a new room"})]}),e.jsx(L,{}),e.jsx($,{className:"pt-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Room Name"}),e.jsx(p,{id:"name",value:t.name,onChange:a=>d("name",a.target.value),placeholder:"Enter room name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"area",children:"Area (sq ft)"}),e.jsx(p,{id:"area",type:"number",value:t.area,onChange:a=>d("area",Number(a.target.value)),placeholder:"Enter area"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"room_type_id",children:"Room Type"}),e.jsxs(j,{value:t.room_type_id.toString(),onValueChange:a=>d("room_type_id",parseInt(a)),children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select room type"})}),e.jsx(v,{children:o.map(a=>e.jsx(S,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"block_id",children:"Block"}),e.jsxs(j,{value:t.block_id.toString(),onValueChange:a=>d("block_id",parseInt(a)),children:[e.jsx(f,{children:e.jsx(g,{placeholder:"Select block"})}),e.jsx(v,{children:c.map(a=>e.jsx(S,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"img",children:"Image"}),e.jsx(p,{id:"img",type:"file",accept:"image/*",onChange:a=>{var i;return d("img",((i=a.target.files)==null?void 0:i[0])||null)}}),e.jsx(n,{children:"Image"}),e.jsx(B,{dataImg:t.img})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(C,{href:"/rooms",children:e.jsxs(x,{type:"button",variant:"secondary",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(x,{type:"submit",disabled:h,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),h?r?"Saving...":"Adding...":r?"Save Changes":"Add Room"]})]})]})})]})})]})}function B({dataImg:s}){const[o,c]=u.useState(()=>s&&typeof s=="string"?`/assets/${s}`:null);return u.useEffect(()=>{if(s instanceof File){const r=URL.createObjectURL(s);return c(r),()=>URL.revokeObjectURL(r)}else c(typeof s=="string"&&s?`/assets/${s}`:null)},[s]),o?e.jsx("img",{src:o,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No image uploaded."})}export{X as default};
