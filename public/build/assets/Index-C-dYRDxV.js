import{r as o,j as e,L as S,$ as x,S as c}from"./app-DVVjhKmX.js";import{A as C,P as w,S as k,d as A,T as D}from"./app-layout-D5u2y6UH.js";import{B as s}from"./button-6WDHEY08.js";import{C as P,a as _,b as M,c as T,d as E}from"./card-6dYjOdPy.js";import{I}from"./input-DGeWAlAb.js";import z from"./ApprovalModal-svCHsbLm.js";import{A as L,a as $,b as B,c as F,d as H,e as O,f as K,g as q,h as R}from"./alert-dialog-DTxqXg56.js";import{t as m}from"./index-CZPXlBRG.js";import"./index-CiZnxWeY.js";import"./createLucideIcon-X7VkaPmF.js";import"./index-Dbqhbced.js";import"./index-BLyZVFAq.js";import"./app-logo-icon-WFs7-yfb.js";import"./folder-root-dsO9wqYG.js";import"./grip-vertical-CsOn8xeG.js";import"./textarea-DG8y4FlP.js";import"./label-C_oBsTMm.js";const G=[{title:"Projects",href:"/projects"}];function ne({projects:r,filters:a,permissions:l}){const[n,h]=o.useState(a.search||""),[g,p]=o.useState(a.status||""),[u,i]=o.useState(!1),[j,f]=o.useState(null),y=t=>{c.delete(`/projects/${t}`,{onSuccess:()=>m.success("Project deleted successfully"),onError:()=>m.error("Failed to delete project")})},b=t=>{t.key==="Enter"&&c.get("/projects",{...a,search:n},{preserveScroll:!0})},v=t=>{const d=t.target.value;p(d),N({search:n,status:d})},N=t=>{c.get("/projects",{...a,...t},{preserveScroll:!0,preserveState:!0,replace:!0,only:["projects","filters"]})};return e.jsxs(C,{breadcrumbs:G,children:[e.jsx(S,{title:"Project Management"}),e.jsx("div",{className:"flex-1 p-4 md:p-6",children:e.jsxs(P,{children:[e.jsxs(_,{className:"pb-3 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-2xl font-bold",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground text-sm md:text-md lg:text-lg",children:"Manage institutional projects"})]}),l.can_add&&e.jsx(x,{href:"/projects/create",children:e.jsxs(s,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Add Project"]})})]}),e.jsx(k,{}),e.jsxs(T,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx(I,{type:"text",placeholder:"Search projects... (press Enter)",value:n,onChange:t=>h(t.target.value),onKeyDown:b}),e.jsxs("select",{value:g,onChange:v,className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"inprogress",children:"InProgress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"planned",children:"Planned"})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("table",{className:"w-full border-collapse  border-1 rounded-md overflow-hidden shadow-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary dark:bg-gray-800 text-center",children:[e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Name"}),e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Budget"}),e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Priority"}),e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Status"}),e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Stage"}),e.jsx("th",{className:"border p-2  text-sm md:text-md lg:text-lg font-medium text-white dark:text-gray-200",children:"Action"})]})}),e.jsx("tbody",{children:r.data.length===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"No projects found."}):r.data.map(t=>e.jsxs("tr",{className:`hover:bg-primary/10 dark:hover:bg-gray-700 text-center
                    `,children:[e.jsx("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:t.budget}),e.jsx("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:t.priority||"-"}),e.jsxs("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:[t.overall_status,e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",t.status,")"]})]}),e.jsx("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:"Draft"}),e.jsxs("td",{className:"border  text-sm md:text-md lg:text-lg text-gray-900 dark:text-gray-100",children:["  ",l.can_edit&&e.jsx(x,{href:`/projects/${t.id}/edit`,children:e.jsx(s,{variant:"ghost",size:"icon",children:e.jsx(A,{className:"h-4 w-4"})})}),l.can_delete&&e.jsxs(L,{children:[e.jsx($,{asChild:!0,children:e.jsx(s,{variant:"ghost",size:"icon",className:"text-destructive hover:text-red-600",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsxs(B,{children:[e.jsxs(F,{children:[e.jsx(H,{children:"Delete this project?"}),e.jsxs(O,{children:["Project ",e.jsx("strong",{children:t.name})," will be permanently deleted."]})]}),e.jsxs(K,{children:[e.jsx(q,{children:"Cancel"}),e.jsx(R,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>y(t.id),children:"Delete"})]})]})]}),l.can_approve&&e.jsx(s,{variant:"ghost",size:"icon",className:"text-blue-600 hover:text-blue-700",onClick:()=>{f(t),i(!0)},children:e.jsx(E,{className:"h-4 w-4"})})]})]},t.id))})]})}),r.links.length>1&&e.jsx("div",{className:"flex justify-center pt-6 flex-wrap gap-2",children:r.links.map((t,d)=>e.jsx(s,{disabled:!t.url,variant:t.active?"default":"outline",size:"sm",onClick:()=>c.visit(t.url||"",{preserveScroll:!0}),children:e.jsx("span",{dangerouslySetInnerHTML:{__html:t.label}})},d))})]})]})}),e.jsx(z,{isOpen:u,onClose:()=>i(!1),project:j})]})}export{ne as default};
