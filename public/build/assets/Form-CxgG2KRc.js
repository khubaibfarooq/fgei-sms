import{m as j,j as e,L as v,S as x}from"./app-DsJiLeBc.js";import{A as f,S as _,e as i}from"./app-layout-BoXCcYCJ.js";import{B as N}from"./button-DlL9Kfr-.js";import{C as b,a as t,b as y,c as C}from"./card-4_zGTV-o.js";import{I as p}from"./index-CgGg-iK-.js";import{L as o}from"./label-CFUXSJl6.js";import"./index-DH0qjQjR.js";import"./createLucideIcon-B-otjRFa.js";import"./index-CExM5vrQ.js";import"./app-logo-icon-VqRXGztA.js";function U({institute:a}){const c=!!a,{data:l,setData:m,processing:h}=j({name:(a==null?void 0:a.name)||"",established_date:(a==null?void 0:a.established_date)||new Date().toISOString().split("T")[0],total_area:(a==null?void 0:a.total_area)||0,convered_area:(a==null?void 0:a.convered_area)||0,img_layout:(a==null?void 0:a.img_layout)||"",img_3d:(a==null?void 0:a.img_3d)||"",video:(a==null?void 0:a.video)||"",gender:(a==null?void 0:a.gender)||"",address:(a==null?void 0:a.address)||"",phone:(a==null?void 0:a.phone)||"",email:(a==null?void 0:a.email)||""}),g=r=>{r.preventDefault();const d=new FormData;Object.keys(l).forEach(s=>{if(!(l[s]===null||l[s]==="")){if(s==="img_layout"||s==="img_3d"||s==="video"){l[s]instanceof File&&d.append(s,l[s]);return}if(s==="total_area"||s==="convered_area"){d.append(s,l[s].toString());return}d.append(s,l[s])}}),c?(d.append("_method","PUT"),x.post(`/institutes/${a.id}`,d,{forceFormData:!0,preserveScroll:!0,preserveState:!0})):x.post("institutes",d,{forceFormData:!0})},n=[{title:"Institute",href:"/institute"},{title:c?"Edit Institute":"Add Institute",href:"#"}];return e.jsxs(f,{breadcrumbs:n,children:[e.jsx(v,{title:c?"Update Institute":"Add Institute"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(b,{children:[e.jsxs(t,{children:[e.jsx(y,{className:"text-2xl font-bold",children:c?"Update Institute":"Add Institute"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Update institute details":"Create a new institute"})]}),e.jsx(_,{}),e.jsx(C,{className:"pt-6",children:e.jsxs("form",{onSubmit:g,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"established_date",children:"Name"}),e.jsx(p,{id:"name",readOnly:!0,type:"text",value:l.name,onChange:r=>m("name",r.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"established_date",children:"Established Date"}),e.jsx(p,{id:"established_date",type:"date",value:l.established_date,onChange:r=>m("established_date",r.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"total_area",children:"Total Area (sq ft)"}),e.jsx(p,{id:"total_area",type:"number",value:l.total_area,onChange:r=>m("total_area",Number(r.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),e.jsx(p,{id:"convered_area",type:"number",value:l.convered_area,onChange:r=>m("convered_area",Number(r.target.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"img_layout",children:"Layout Image"}),e.jsx(p,{id:"img_layout",type:"file",accept:"image/*",onChange:r=>{var d;return m("img_layout",((d=r.target.files)==null?void 0:d[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"img_3d",children:"3D Image"}),e.jsx(p,{id:"img_3d",type:"file",accept:"image/*",onChange:r=>{var d;return m("img_3d",((d=r.target.files)==null?void 0:d[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"video",children:"Video"}),e.jsx(p,{id:"video",type:"file",accept:"video/*",onChange:r=>{var d;return m("video",((d=r.target.files)==null?void 0:d[0])||null)}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Current Layout Image"}),a!=null&&a.img_layout?e.jsx("img",{src:`/assets/${a.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Current 3D Image"}),a!=null&&a.img_3d?e.jsx("img",{src:`/assets/${a.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Current Video"}),a!=null&&a.video?e.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[e.jsx("source",{src:`/assets/${a.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."})]})]}),e.jsx("div",{className:"flex items-center justify-between pt-2",children:e.jsxs(N,{type:"submit",disabled:h,children:[e.jsx(i,{className:"mr-2 h-4 w-4"}),h?c?"Saving...":"Adding...":c?"Save Changes":"Save Institute"]})})]})})]})})]})}export{U as default};
