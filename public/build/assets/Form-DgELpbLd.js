import{r as v,j as e,L as _,$ as f,S as l}from"./app-DVVjhKmX.js";import{A as y,a as C,c as N}from"./app-layout-D5u2y6UH.js";import{B as p}from"./button-6WDHEY08.js";import{C as b,a as g,b as A,c as w}from"./card-6dYjOdPy.js";import{I as d}from"./input-DGeWAlAb.js";import{L as i}from"./label-C_oBsTMm.js";import{T as E}from"./textarea-DG8y4FlP.js";import{C as L}from"./checkbox-P-CTrAdP.js";import{S as T,a as I,b as k,c as D,d as q}from"./select-B8STI3IF.js";import{t as m}from"./index-CZPXlBRG.js";import{M as B}from"./MultiSelect-CUXr4Imp.js";import"./index-CiZnxWeY.js";import"./createLucideIcon-X7VkaPmF.js";import"./index-Dbqhbced.js";import"./index-BLyZVFAq.js";import"./app-logo-icon-WFs7-yfb.js";import"./folder-root-dsO9wqYG.js";import"./grip-vertical-CsOn8xeG.js";import"./index-B15tndVD.js";import"./index-B0PpLY5n.js";function se({stage:s,projectTypes:x,users:u}){var o,n;const c=!!s,[a,t]=v.useState({stage_name:(s==null?void 0:s.stage_name)||"",project_type_id:((o=s==null?void 0:s.project_type_id)==null?void 0:o.toString())||"",stage_order:((n=s==null?void 0:s.stage_order)==null?void 0:n.toString())||"",description:(s==null?void 0:s.description)||"",is_mandatory:(s==null?void 0:s.is_mandatory)??!0,users_can_approve:(s==null?void 0:s.users_can_approve)||[]}),h=r=>{r.preventDefault(),c?l.put(`/approval-stages/${s.id}`,a,{onSuccess:()=>m.success("Stage updated successfully")}):l.post("/approval-stages",a,{onSuccess:()=>m.success("Stage created successfully")})},j=[{title:"Approval Stages",href:"/approval-stages"},{title:c?"Edit Stage":"Create Stage",href:"#"}];return e.jsxs(y,{breadcrumbs:j,children:[e.jsx(_,{title:c?"Edit Stage":"Create Stage"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 max-w-2xl mx-auto",children:e.jsxs(b,{children:[e.jsx(g,{children:e.jsx(A,{children:c?"Edit Approval Stage":"Define New Stage"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Stage Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{value:a.stage_name,onChange:r=>t({...a,stage_name:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Project Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(T,{value:a.project_type_id,onValueChange:r=>t({...a,project_type_id:r}),children:[e.jsx(I,{children:e.jsx(k,{placeholder:"Select Project Type"})}),e.jsx(D,{children:x.map(r=>e.jsx(q,{value:r.id.toString(),children:r.name},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{children:["Stage Order (Sequence) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"number",value:a.stage_order,onChange:r=>t({...a,stage_order:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Description"}),e.jsx(E,{value:a.description,onChange:r=>t({...a,description:r.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{id:"mandatory",checked:a.is_mandatory,onCheckedChange:r=>t({...a,is_mandatory:!!r})}),e.jsx(i,{htmlFor:"mandatory",children:"Is Mandatory?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Approvers (Users)"}),e.jsx(B,{options:u.map(r=>({value:r.id.toString(),label:r.name})),value:(a.users_can_approve||[]).map(r=>r.toString()),onChange:r=>t({...a,users_can_approve:r.map(S=>parseInt(S))}),placeholder:"Select Approvers..."})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(f,{href:"/approval-stages",children:e.jsxs(p,{variant:"outline",type:"button",children:[e.jsx(C,{className:"w-4 h-4 mr-2"})," Back"]})}),e.jsxs(p,{type:"submit",children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Save Stage"]})]})]})})]})})]})}export{se as default};
