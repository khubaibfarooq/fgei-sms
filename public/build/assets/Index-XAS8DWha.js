import{j as e,L as n,S as c}from"./app-u3OA9MH-.js";import{A as d,S as u,t as a}from"./app-layout-D1dgX76m.js";import{B as i}from"./button-CXJFHXyH.js";import{C as m,a as x,b as p,c as h}from"./card-aAeoq-tv.js";import{A as j,a as f,b as g,c as B,d as b,f as k,g as v,h as D}from"./alert-dialog-BRwk2iU_.js";import"./index-BY9QaOUw.js";import"./createLucideIcon-DdkxUdpv.js";import"./input-D36Qf9vk.js";import"./index-BOd0QtHg.js";import"./app-logo-icon-CrFjKkjU.js";import"./folder-root-BZJNwsuD.js";import"./grip-vertical-CyrX_ziw.js";const C=[{title:"Backup",href:"/backup"}];function H({backups:r}){const l=()=>{c.post("/backup/run",{},{onSuccess:()=>a.success("Backup created successfully"),onError:()=>a.error("Failed to create backup"),preserveScroll:!0})},t=s=>{c.delete(`/backup/delete/${s}`,{onSuccess:()=>a.success("Backup deleted successfully"),onError:()=>a.error("Failed to delete backup"),preserveScroll:!0})};return e.jsxs(d,{title:"Backup",breadcrumbs:C,children:[e.jsx(n,{title:"Backup"}),e.jsx("div",{className:"p-4 md:p-6 space-y-4",children:e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{className:"text-2xl font-bold",children:"Database Backups"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage system backup files"})]}),e.jsx(i,{onClick:l,children:"Create Backup"})]}),e.jsx(u,{}),e.jsx(h,{className:"pt-4 space-y-4",children:r.length===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"No backups available."}):e.jsx("ul",{className:"space-y-2",children:r.map((s,o)=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-3 bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[N(s.size)," â€¢"," ",new Date(s.last_modified*1e3).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:s.download_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(i,{variant:"outline",size:"sm",children:"Download"})}),e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx(i,{variant:"destructive",size:"sm",children:"Delete"})}),e.jsxs(g,{children:[e.jsx(B,{children:e.jsx(b,{children:"Delete this backup?"})}),e.jsxs(k,{children:[e.jsx(v,{children:"Cancel"}),e.jsx(D,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>t(s.name),children:"Delete"})]})]})]})]})]},o))})})]})})]})}function N(r){const l=["Bytes","KB","MB","GB"];if(r===0)return"0 Byte";const t=Math.floor(Math.log(r)/Math.log(1024));return`${(r/Math.pow(1024,t)).toFixed(2)} ${l[t]}`}export{H as default};
