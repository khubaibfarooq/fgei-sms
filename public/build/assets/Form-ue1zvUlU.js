import{j as e,r as N,m as I,L as P,$ as F}from"./app-BiZN_Br1.js";import{a9 as z,aa as g,C as A,A as O,S as v}from"./app-layout-B1nrH5Qe.js";import{I as j}from"./index-BDL0OWlf.js";import{L as u}from"./label-BBYzGS-B.js";import{c as m,B as f}from"./button-SCdmTIbZ.js";import{C as D,a as T,b as $,c as B}from"./card-SXfT4Weg.js";import{_ as p,P as C,a as b,b as y}from"./popover-DtPO5cKx.js";import"./dialog-Ck_KA_E1.js";import{C as G}from"./index-Cu_2wjfU.js";import"./index-CQb0VLvc.js";import"./createLucideIcon-NXUG9dhp.js";import"./app-logo-icon-B9U-nN6C.js";function w({className:s,...a}){return e.jsx(p,{"data-slot":"command",className:m("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",s),...a})}function _({className:s,...a}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(z,{className:"size-4 shrink-0 opacity-50"}),e.jsx(p.Input,{"data-slot":"command-input",className:m("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})}function R({className:s,...a}){return e.jsx(p.List,{"data-slot":"command-list",className:m("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",s),...a})}function S({...s}){return e.jsx(p.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...s})}function k({className:s,...a}){return e.jsx(p.Group,{"data-slot":"command-group",className:m("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",s),...a})}function M({className:s,...a}){return e.jsx(p.Item,{"data-slot":"command-item",className:m("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}function U({value:s,onChange:a}){const[x,r]=N.useState(!1),l=(i,c)=>{const o=i.toLowerCase(),h=c.toLowerCase();return h.startsWith(o)?2:h.includes(o)?1:0},n=g.find(i=>i.name===s),d=n==null?void 0:n.icon;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{open:x,onOpenChange:r,children:[e.jsx(b,{asChild:!0,children:e.jsx("div",{children:e.jsx(j,{value:s,onClick:()=>r(!0),readOnly:!0,placeholder:"Select icon (Lucide)",className:"cursor-pointer"})})}),e.jsx(y,{className:"p-0 w-[300px]",children:e.jsxs(w,{filter:l,children:[e.jsx(_,{placeholder:"Search icon..."}),e.jsxs(R,{children:[e.jsx(S,{children:"Icon not found"}),e.jsx(k,{children:g.map(({name:i,icon:c})=>e.jsxs(M,{value:i,onSelect:()=>{a(i),r(!1)},children:[e.jsx(c,{className:"mr-2 size-4"}),i]},i))})]})]})})]}),d&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(d,{className:"size-4"}),s]})]})}function H({value:s,onChange:a,options:x}){const[r,l]=N.useState(!1);return e.jsxs(C,{open:r,onOpenChange:l,children:[e.jsx(b,{asChild:!0,children:e.jsxs(f,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between",children:[s||"Select permissions",e.jsx(A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(y,{className:"w-full p-0 max-h-60 overflow-y-auto",children:e.jsxs(w,{children:[e.jsx(_,{placeholder:"Cari permission..."}),e.jsx(S,{children:"permission not found"}),e.jsx(k,{children:x.map(n=>e.jsxs(M,{value:n,onSelect:d=>{a(d),l(!1)},children:[e.jsx(G,{className:m("mr-2 h-4 w-4",s===n?"opacity-100":"opacity-0")}),n]},n))})]})})]})}function ae({menu:s,parentMenus:a,permissions:x}){const r=!!s,{data:l,setData:n,post:d,put:i,processing:c,errors:o,reset:h}=I({title:(s==null?void 0:s.title)||"",route:(s==null?void 0:s.route)||"",icon:(s==null?void 0:s.icon)||"",parent_id:(s==null?void 0:s.parent_id)??null,permission_name:(s==null?void 0:s.permission_name)||""}),L=t=>{t.preventDefault(),r?i(`/menus/${s==null?void 0:s.id}`):d("/menus",{onSuccess:()=>h()})},E=[{title:"Menu Management",href:"/menus"},{title:r?"Edit Menu":"Add Menu",href:"#"}];return e.jsxs(O,{breadcrumbs:E,children:[e.jsx(P,{title:r?"Edit Menu":"Add Menu"}),e.jsx("div",{className:"flex-1 p-4 md:p-6",children:e.jsxs(D,{className:"max-w-2xl mx-auto",children:[e.jsxs(T,{className:"pb-3",children:[e.jsx($,{className:"text-2xl font-bold tracking-tight",children:r?"Edit Menu":"Add New Menu"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Update menu details":"Create a new menu for the system"})]}),e.jsx(v,{}),e.jsx(B,{className:"pt-6",children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Menu Title *"}),e.jsx(j,{id:"title",value:l.title,onChange:t=>n("title",t.target.value),placeholder:"Example: Dashboard",className:o.title?"border-red-500":""}),o.title&&e.jsx("p",{className:"text-sm text-red-500",children:o.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"route",children:"Route"}),e.jsx(j,{id:"route",value:l.route,onChange:t=>n("route",t.target.value),placeholder:"Example: /dashboard",className:o.route?"border-red-500":""}),o.route&&e.jsx("p",{className:"text-sm text-red-500",children:o.route})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"icon",children:"Icon (Lucide)"}),e.jsx(U,{value:l.icon,onChange:t=>n("icon",t)}),o.icon&&e.jsx("p",{className:"text-sm text-red-500",children:o.icon})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"parent_id",children:"Parent Menu"}),e.jsxs("select",{id:"parent_id",value:l.parent_id??"",onChange:t=>n("parent_id",t.target.value===""?null:Number(t.target.value)),className:"w-full rounded border px-3 py-2",children:[e.jsx("option",{value:"",children:"— None —"}),a.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(u,{htmlFor:"permission_name",children:"Permission"}),e.jsx(H,{value:l.permission_name||"",onChange:t=>n("permission_name",t),options:x}),o.permission_name&&e.jsx("p",{className:"text-sm text-red-500",children:o.permission_name})]})]}),e.jsx(v,{}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 pt-2 sm:flex-row sm:justify-end",children:[e.jsx(F,{href:"/menus",className:"w-full sm:w-auto",children:e.jsx(f,{type:"button",variant:"secondary",className:"w-full",children:"Cancel"})}),e.jsx(f,{type:"submit",disabled:c,className:"w-full sm:w-auto",children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"↻"}),r?"Saving...":"Creating..."]}):r?"Save Changes":"Create Menu"})]})]})})]})})]})}export{ae as default};
