import{R as g,m as S,j as e,L as _,$ as v,S as p}from"./app-346T6A2c.js";import{A as b,S as y,b as D,c as N}from"./app-layout-CW6HLVs2.js";import{B as u}from"./button-BIt14okD.js";import{C,a as w,b as A,c as E}from"./card-3mg2VLmO.js";import{I as m}from"./index-D3XGE3LN.js";import{L as n}from"./label-BeqsIhga.js";import{S as I,a as L,b as F,c as B,d as O}from"./select-CHI-ZnH7.js";import"./index-C9vm-YMg.js";import"./createLucideIcon-DAHpsOdj.js";import"./index-CV5SvhuB.js";import"./app-logo-icon-DxG64hfD.js";import"./index-DkSyiFrL.js";import"./index-BJ0P3Sdr.js";function Q({donation:t,donationTypes:r}){const d=!!t;console.log("donationTypes:",r);const x=g.useMemo(()=>r?Array.isArray(r)?r:Object.entries(r).map(([a,i])=>({id:parseInt(a),name:i})):[],[r]),{data:s,setData:l,processing:c,errors:o,reset:h}=S({details:(t==null?void 0:t.details)||"",amount:(t==null?void 0:t.amount)||0,institute_id:(t==null?void 0:t.institute_id)||0,donation_type_id:(t==null?void 0:t.donation_type_id)||0,added_date:t!=null&&t.added_date?new Date(t.added_date):new Date}),j=a=>{a.preventDefault();const i={...s,added_date:s.added_date?s.added_date.toISOString().split("T")[0]:null};d?p.put(`/donations/${t.id}`,i,{preserveScroll:!0,preserveState:!0}):p.post("/donations",i,{onSuccess:()=>{h()}})},f=[{title:"Donations",href:"/donations"},{title:d?"Edit Donation":"Add Donation",href:"#"}];return e.jsxs(b,{breadcrumbs:f,children:[e.jsx(_,{title:d?"Edit Donation":"Add Donation"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(A,{className:"text-2xl font-bold",children:d?"Edit Donation":"Add Donation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Edit donation details":"Create a new donation"})]}),e.jsx(y,{}),e.jsx(E,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Donation Name"}),e.jsx(m,{id:"name",value:s.details,onChange:a=>l("details",a.target.value),placeholder:"Enter donation details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"amount",children:"Amount"}),e.jsx(m,{id:"amount",type:"number",value:s.amount,onChange:a=>l("amount",Number(a.target.value)),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"donation_type_id",children:"Donation Type"}),e.jsxs(I,{value:s.donation_type_id.toString(),onValueChange:a=>l("donation_type_id",parseInt(a)),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Select donation type"})}),e.jsx(B,{children:x.map(a=>e.jsx(O,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"added_date",children:"Date"}),e.jsx(m,{id:"added_date",type:"date",value:s.added_date?s.added_date.toISOString().split("T")[0]:"",onChange:a=>l("added_date",a.target.value?new Date(a.target.value):null),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),o.added_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.added_date})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(v,{href:"/donations",children:e.jsxs(u,{type:"button",variant:"secondary",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(u,{type:"submit",disabled:c,children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),c?d?"Saving...":"Adding...":d?"Save Changes":"Add Donation"]})]})]})})]})})]})}export{Q as default};
