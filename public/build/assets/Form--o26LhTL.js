import{m as h,r as g,j as e,L as S,$ as v,S as m}from"./app-DlkL_fr4.js";import{A as N,S as k,b as E,c as _}from"./app-layout-CfoST8m2.js";import{B as x}from"./button-Bc6s2K8z.js";import{C as D,a as y,b as A,c as w}from"./card-BJjIZP43.js";import{I as p}from"./index-B16KoFX6.js";import{L as o}from"./label-f5voG0jw.js";import{S as L,a as F,b as I,c as B,d as T}from"./select-VLKHBNZF.js";import"./index-BS_QALL0.js";import"./createLucideIcon-CLcxcsJe.js";import"./index-CqX1gAAv.js";import"./app-logo-icon-CCysYYWD.js";import"./index-CtDD2QPD.js";import"./index-BsJmVqFb.js";function Q({dashboardCard:t,roles:j}){const l=!!t;console.log(t);const{data:i,setData:r,processing:a,errors:n,reset:d}=h({id:(t==null?void 0:t.id)||"",title:(t==null?void 0:t.title)||"",link:(t==null?void 0:t.link)||"",role_id:(t==null?void 0:t.role_id)||""});g.useEffect(()=>{r(t?s=>({...s,title:t.title??"",link:t.link??"",role_id:t.role_id??""}):s=>({...s,title:"",link:"",role_id:""}))},[t,r]);const u=s=>{s.preventDefault(),l?m.put(`/dashboardcards/${t==null?void 0:t.id}`,i,{preserveScroll:!0,preserveState:!0,onError:c=>console.log(c)}):m.post("/dashboardcards",i,{onSuccess:()=>d(),onError:c=>console.log(c)})},f=[{title:"Dashboard Cards",href:"/dashboardcards"},{title:l?"Edit Dashboard Card":"Add Dashboard Card",href:"#"}];return e.jsxs(N,{breadcrumbs:f,children:[e.jsx(S,{title:l?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(D,{children:[e.jsxs(y,{children:[e.jsx(A,{className:"text-2xl font-bold",children:l?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Update card details":"Create a new dashboard card"})]}),e.jsx(k,{}),e.jsx(w,{className:"pt-6",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Title"}),e.jsx(p,{id:"title",value:i.title,onChange:s=>r("title",s.target.value),placeholder:"Enter card title"}),n.title&&e.jsx("p",{className:"text-red-500 text-sm",children:n.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"link",children:"Link"}),e.jsx(p,{id:"link",value:i.link,onChange:s=>r("link",s.target.value),placeholder:"Enter card link"}),n.link&&e.jsx("p",{className:"text-red-500 text-sm",children:n.link})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"role_id",children:"Role"}),e.jsxs(L,{value:i.role_id?i.role_id.toString():"",onValueChange:s=>r("role_id",parseInt(s)),children:[e.jsx(F,{children:e.jsx(I,{placeholder:"Select role"})}),e.jsx(B,{children:j.map(s=>e.jsx(T,{value:s.id.toString(),children:s.name},s.id))})]}),n.role_id&&e.jsx("p",{className:"text-red-500 text-sm",children:n.role_id})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(v,{href:"/dashboardcards",children:e.jsxs(x,{type:"button",variant:"secondary",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(x,{type:"submit",disabled:a,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),a?l?"Saving...":"Adding...":l?"Save Changes":"Add Card"]})]})]})})]})})]})}export{Q as default};
