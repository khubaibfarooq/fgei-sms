import{r as i,j as e,L as Oe}from"./app-DqbNraeA.js";import{A as qe,S as Ve}from"./app-layout-B6Je9ko-.js";import{B as H}from"./button-Dq6HA6Vn.js";import{C as Me,a as He,b as Ue,c as Ye}from"./card-D_-tybeh.js";import{L as U}from"./label-CbKR88VI.js";import{I as R}from"./image-preview-kHh62Nfa.js";import{C as re}from"./combobox-wHPBZdpP.js";import{f as Y}from"./dateFormatter-Cn65gwBN.js";import{E as Ge,F as Je,a as Qe,b as Ke}from"./jspdf.plugin.autotable-UkigHDZ4.js";import{t as G}from"./index-FI1jcNz4.js";import"./index-BdRdSK_W.js";import"./createLucideIcon-WG2Kpl2R.js";import"./index-CNGK0vsy.js";import"./index-DT31crJz.js";import"./index-Dq6hzSnv.js";import"./index-Cf3-zdoB.js";import"./input-BL9Alac0.js";import"./app-logo-icon-CU9kQy6f.js";import"./circle-x-D3lmLyAT.js";import"./clsx-B-dksMZM.js";import"./folder-root-DF44F3y3.js";import"./grip-vertical-C45rBE8W.js";import"./popover-JLHICyn4.js";const Xe=[{title:"Institutional Report",href:"/reports/institutes"}],ae=k=>{const L=k!=null&&typeof k.id=="number"&&k.id>0&&typeof k.name=="string"&&k.name.trim()!=="";return L||console.warn("Invalid item detected:",k),L};function vt({institute:k=null,institutes:L=[],regions:oe=[],blocks:de=[],instituteAssets:ne=[],rooms:le=[],shifts:ie=[],upgradations:ce=[],funds:xe=[],projects:me=[],transports:he=[],filters:A={search:"",institute_id:"",region_id:""}}){const[ge,Ze]=i.useState(A.search||""),[_,J]=i.useState(A.institute_id||""),[d,ue]=i.useState(k);console.log("fetchedinstitute",d);const[Q,pe]=i.useState(A.region_id||""),[K,X]=i.useState(L),[Z,et]=i.useState(oe),[p,be]=i.useState(de),[f,fe]=i.useState(ne),[g,je]=i.useState(le),[j,ye]=i.useState(ie),[y,ke]=i.useState(ce),[D,Ne]=i.useState(!1),[$,we]=i.useState(!1),[E,ve]=i.useState(!1),[W,Se]=i.useState(!1),[z,Ie]=i.useState(!1),[O,_e]=i.useState(!1),[u,Ce]=i.useState(xe),[b,Fe]=i.useState(me),[q,Le]=i.useState(!1),[N,Pe]=i.useState(he),[V,Te]=i.useState(!1),P=t=>{const s=typeof t=="number"?t:parseFloat(String(t).replace(/,/g,""))||0;return s>=1e6?`${(s/1e6).toFixed(2)} Mn`:new Intl.NumberFormat("ur-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)},Be=i.useMemo(()=>K.filter(ae),[K]),M=i.useMemo(()=>Z.filter(ae),[Z]);console.log(M);const Re=async t=>{try{const s=new URLSearchParams(t).toString(),m=await fetch(`/reports/institutes/getData?${s}`);if(!m.ok)throw new Error("Failed to fetch data");const c=await m.json();ue(c.institute||[]),console.log(d),be(c.blocks||[]),fe(c.instituteAssets||[]),console.log(c.instituteAssets),je(c.rooms||[]),ye(c.shifts||[]),ke(c.upgradations||[]),Ce(c.funds||[]),console.log(c.projects),Fe(c.projects||[]),Pe(c.transports||[])}catch(s){console.error("Error fetching data:",s),G.error("Failed to load data")}},Ae=t=>{J(t),Re({search:ge,institute_id:t,region_id:Q})},De=async t=>{try{const s=new URLSearchParams({region_id:t||""}).toString(),m=await fetch(`/reports/getInstitutes?${s}`);if(!m.ok)throw new Error("Failed to fetch institutes");const c=await m.json();console.log("Fetched institutes:",c),X(c),_&&t!=="0"&&!c.some(v=>v.id.toString()===_)&&J("")}catch(s){console.error("Error fetching institutes:",s),G.error("Failed to load institutes"),X([])}},$e=async t=>{pe(t),De(t)},Ee=async()=>{const t=new Ge.Workbook,s=t.addWorksheet("Shifts");s.columns=[{header:"Name",key:"name",width:20},{header:"Building Name",key:"building_name",width:20},{header:"Building Type",key:"building_type",width:20}],j.forEach(a=>{var x;s.addRow({name:a.name,building_name:a.building_name,building_type:((x=a.building_type)==null?void 0:x.name)||"N/A"})});const m=t.addWorksheet("Blocks");m.columns=[{header:"Name",key:"name",width:20},{header:"Area (sq ft)",key:"area",width:15}],p.forEach(a=>{m.addRow({name:a.name,area:a.area})});const c=t.addWorksheet("Rooms");c.columns=[{header:"Name",key:"name",width:20},{header:"Area (sq ft)",key:"area",width:15},{header:"Block",key:"block",width:20}],g.forEach(a=>{var x;c.addRow({name:a.name,area:a.area,block:((x=a.block)==null?void 0:x.name)||"N/A"})});const v=t.addWorksheet("Assets");v.columns=[{header:"Asset",key:"asset",width:20},{header:"Quantity",key:"qty",width:10},{header:"Rooms",key:"locations",width:20}],f.forEach(a=>{var x;v.addRow({asset:((x=a.asset)==null?void 0:x.name)||"N/A",qty:a.total_qty,locations:a.locations_count})});const C=t.addWorksheet("Funds");C.columns=[{header:"Fund Head",key:"Fundhead",width:30},{header:"Balance",key:"balance",width:15}],u.forEach(a=>{var x;C.addRow({Fundhead:(x=a.fund_head)==null?void 0:x.name,balance:a.balance})});const o=t.addWorksheet("Upgradations");o.columns=[{header:"Details",key:"details",width:30},{header:"Date From",key:"from",width:15},{header:"Date To",key:"to",width:15},{header:"Level From",key:"levelfrom",width:15},{header:"Level To",key:"levelto",width:15},{header:"Status",key:"status",width:15}],y.forEach(a=>{o.addRow({details:a.details,from:a.from,to:a.to,levelfrom:a.levelfrom,levelto:a.levelto,status:a.status})});const n=t.addWorksheet("Projects");n.columns=[{header:"Project Type",key:"projecttype",width:30},{header:"Completed",key:"completed",width:15},{header:"In  Progress",key:"inprogress",width:15},{header:"Planned",key:"planned",width:15}],b.forEach(a=>{n.addRow({projecttype:a.name,completed:a.completed,inprogress:a.inprogress,planned:a.planned})});const r=t.addWorksheet("Transports");r.columns=[{header:"Vehicle No",key:"vehicle_no",width:20},{header:"Vehicle Type",key:"vehicle_type",width:20}],N.forEach(a=>{var x;r.addRow({vehicle_no:a.vehicle_no,vehicle_type:((x=a.vehicle_type)==null?void 0:x.name)||"N/A"})});const l=await t.xlsx.writeBuffer(),h=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Je.saveAs(h,"Institutional_Report.xlsx")},We=async()=>{const t=new Qe;let s=20;const m=(o,n,r)=>{t.setFontSize(14),t.text(o,14,s),Ke(t,{head:[n],body:r,startY:s+3,styles:{fontSize:10},headStyles:{fillColor:[11,67,27]}}),s=t.lastAutoTable.finalY+8,s>t.internal.pageSize.height-50&&(t.addPage(),s=20)},c=o=>new Promise((n,r)=>{const l=new Image;l.crossOrigin="Anonymous",l.src=o,l.onload=()=>{const h=document.createElement("canvas");h.width=l.width,h.height=l.height;const a=h.getContext("2d");a?(a.drawImage(l,0,0),n(h.toDataURL("image/jpeg"))):r(new Error("Canvas context not available"))},l.onerror=h=>r(h)}),v=async(o,n)=>{try{s>t.internal.pageSize.height-60&&(t.addPage(),s=20),t.setFontSize(16),t.text(o,14,s),s+=10;const r=await c(`/assets/${n}`),l=t.getImageProperties(r),h=t.internal.pageSize.getWidth()-28,a=l.height*h/l.width;s+a>t.internal.pageSize.height-20&&(t.addPage(),s=20,t.setFontSize(16),t.text(o,14,s),s+=10),t.addImage(r,"JPEG",14,s,h,a),s+=a+10}catch(r){console.error(`Failed to load image for ${o}:`,r)}},C=async(o,n)=>{const r=n.filter(S=>S.img);if(r.length===0)return;s>t.internal.pageSize.height-40&&(t.addPage(),s=20),t.setFontSize(16),t.text(o,14,s),s+=10;const l=t.internal.pageSize.getWidth(),h=14,a=5,x=(l-h*2-a*2)/3;for(let S=0;S<r.length;S+=3){const ze=r.slice(S,S+3);let T=0;const ee=[];for(const w of ze){let F=null,I=0;try{F=await c(`/assets/${w.img}`);const B=t.getImageProperties(F);I=B.height*x/B.width}catch(B){console.error(`Failed to load image for ${w.name}:`,B)}const se=I+10;se>T&&(T=se),ee.push({imgData:F,height:I,name:w.name})}s+T>t.internal.pageSize.height-20&&(t.addPage(),s=20),ee.forEach((w,F)=>{const I=h+F*(x+a);t.setFontSize(10);const te=t.splitTextToSize(w.name,x);t.text(te,I,s+5),w.imgData&&t.addImage(w.imgData,"JPEG",I,s+10,x,w.height)}),s+=T+10}s+=10};if(t.setFontSize(16),t.text("Institutional Report",14,15),s=25,j.length>0){const o=["Name","Building Name","Building Type"],n=j.map(r=>{var l;return[r.name,r.building_name,((l=r.building_type)==null?void 0:l.name)||"N/A"]});m("Shifts",o,n)}if(p.length>0){const o=["Name","Area (sq ft)"],n=p.map(r=>[r.name,r.area]);m("Blocks",o,n)}if(g.length>0){const o=["Name","Area (sq ft)","Block"],n=g.map(r=>{var l;return[r.name,r.area,((l=r.block)==null?void 0:l.name)||"N/A"]});m("Rooms",o,n)}if(f.length>0){const o=["Asset Name","Quantity","Rooms"],n=f.map(r=>[r.name,r.total_qty.toString(),r.locations_count.toString()]);m("Institute Assets",o,n)}if(u.length>0){const o=["Fund Head","Balance"],n=u.map(r=>{var l;return[(l=r.fund_head)==null?void 0:l.name,r.balance]});m("Institute Funds",o,n)}if(y.length>0){const o=["Details","Date From","Date To","Level From","Level To","Status"],n=y.map(r=>[r.details,r.from,r.to,r.levelfrom,r.levelto,r.status]);m("Institute Upgradations",o,n)}if(b.length>0){const o=["Project Type","Completed","In Progress","Planned"],n=b.map(r=>[r.name,r.completed,r.inprogress,r.planned]);m("Institute Projects",o,n)}if(N.length>0){const o=["Vehicle No","Vehicle Type"],n=N.map(r=>{var l;return[r.vehicle_no,((l=r.vehicle_type)==null?void 0:l.name)||"N/A"]});m("Institute Transports",o,n)}d!=null&&d.img_layout&&await v("Institute Layout",d.img_layout),d!=null&&d.img_3d&&await v("Institute Front View",d.img_3d),await C("Blocks Images",p),await C("Rooms Images",g),t.save("Institutional_Report.pdf")};return e.jsxs(qe,{breadcrumbs:Xe,children:[e.jsx(Oe,{title:"Institutional Report"}),e.jsxs("div",{className:"flex-1 p-2 ",children:[e.jsxs(Me,{children:[e.jsxs(He,{className:"pb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsxs("div",{children:["          ",e.jsx(Ue,{children:"Institutional Report"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{onClick:()=>{_?window.location.href=route("sso.redirect.institution-profile",{institution_id:_}):G.error("Please select an institute first")},className:"w-full md:w-auto",children:"Institution Profile"}),e.jsx(H,{onClick:We,className:"w-full md:w-auto",children:"Export PDF"}),e.jsx(H,{onClick:Ee,className:"w-full md:w-auto",children:"Export Excel"})]})]}),e.jsx(Ve,{}),e.jsx(Ye,{className:"py-3 space-y-2",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[M.length>0&&e.jsx(re,{entity:"region",value:Q,onChange:t=>$e(t),options:M.map(t=>({id:t.id.toString(),name:t.name.split(" ").pop()||t.name})),includeAllOption:!0}),e.jsx(re,{entity:"institute",value:_,onChange:t=>Ae(t),options:Be.map(t=>({id:t.id.toString(),name:t.name})),includeAllOption:!0})]})}),d&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-x-4 gap-y-2 bg-muted/20 p-2 rounded-md border text-xs md:text-sm mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Est. Date"}),e.jsx("p",{className:"font-medium",children:d.established_date||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Total Area"}),e.jsx("p",{className:"font-medium",children:d.total_area||"0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Covered Area"}),e.jsx("p",{className:"font-medium",children:d.convered_area||"0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Blocks"}),e.jsx("p",{className:"font-medium",children:p.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Rooms"}),e.jsx("p",{className:"font-medium",children:g.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] md:text-xs text-muted-foreground uppercase tracking-wide",children:"Total Funds"}),e.jsxs("p",{className:"font-medium",children:["  ",P(u.reduce((t,s)=>t+(typeof s.balance=="number"?s.balance:parseFloat(String(s.balance).replace(/,/g,""))||0),0))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Current Layout Image"}),d!=null&&d.img_layout?e.jsx(R,{dataImg:`${d.img_layout}`,className:"w-full h-40 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Current Front View Image"}),d!=null&&d.img_3d?e.jsx(R,{dataImg:`${d.img_3d}`,className:"w-full h-40 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No Font View image uploaded."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Current Video"}),d!=null&&d.video?e.jsxs("video",{controls:!0,className:"w-full h-40 rounded",children:[e.jsx("source",{src:`/assets/${d.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1 gap-2",children:[e.jsxs("div",{className:"border rounded-lg border-blue-400 dark:border-blue-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-blue-50/60 dark:bg-blue-950/30 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-t-lg transition-colors",onClick:()=>Ne(!D),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-blue-800 dark:text-blue-300",children:["Shifts (",j.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600/80 dark:text-blue-400/80 mt-0.5",children:j.length>0?`${[...new Set(j.map(t=>{var s;return(s=t.building_type)==null?void 0:s.name}).filter(Boolean))].length} building type(s) across ${[...new Set(j.map(t=>t.building_name))].length} building(s)`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-blue-600 dark:text-blue-400 transform transition-transform ${D?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),D&&e.jsx("div",{className:"p-2 border-t border-blue-200 dark:border-blue-800",children:j.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 dark:bg-blue-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Name"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Building Name"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Building Type"})]})}),e.jsx("tbody",{children:j.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-blue-50 dark:hover:bg-blue-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.building_name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:(s=t.building_type)==null?void 0:s.name})]},t.id)})})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No shifts available"})})]}),e.jsxs("div",{className:"border rounded-lg border-green-400 dark:border-green-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-green-50/60 dark:bg-green-950/30 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-t-lg transition-colors",onClick:()=>we(!$),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-green-800 dark:text-green-300",children:["Blocks (",p.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-green-600/80 dark:text-green-400/80 mt-0.5",children:p.length>0?`Total area: ${p.reduce((t,s)=>t+(parseFloat(s.area)||0),0).toLocaleString()} sq ft`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-green-600 dark:text-green-400 transform transition-transform ${$?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),$&&e.jsx("div",{className:"p-2 border-t border-green-200 dark:border-green-800",children:p.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-600 dark:bg-green-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Name"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Area (sq ft)"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Establish Date"})]})}),e.jsx("tbody",{children:p.map(t=>e.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/30",children:[e.jsxs("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:["  ",e.jsxs("div",{className:"flex flex-column gap-2 align-middle",children:[" ",e.jsx(R,{dataImg:t.img,size:"h-20 w-20 object-contain"}),"  ",e.jsx("span",{className:"font-bold",children:t.name})]})," "]}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.area}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:Y(t.establish_date)})]},t.id))})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No blocks available"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 my-1  gap-2",children:[e.jsxs("div",{className:"border rounded-lg border-blue-400 dark:border-blue-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-blue-50/60 dark:bg-blue-950/30 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-t-lg transition-colors",onClick:()=>ve(!E),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-blue-800 dark:text-blue-300",children:["Rooms (",g.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600/80 dark:text-blue-400/80 mt-0.5",children:g.length>0?`Total area: ${g.reduce((t,s)=>t+(parseFloat(s.area)||0),0).toLocaleString()} sq ft Â· ${[...new Set(g.map(t=>{var s;return(s=t.block)==null?void 0:s.name}).filter(Boolean))].length} block(s)`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-blue-600 dark:text-blue-400 transform transition-transform ${E?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),E&&e.jsx("div",{className:"p-2 border-t border-blue-200 dark:border-blue-800",children:g.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 dark:bg-blue-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Block"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Name"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Area (sq ft)"})]})}),e.jsx("tbody",{children:g.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-blue-50 dark:hover:bg-blue-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:(s=t.block)==null?void 0:s.name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:e.jsxs("div",{className:"flex flex-column gap-2 align-middle",children:[" ",e.jsx(R,{dataImg:t.img,size:"h-20 w-20 object-contain"}),"  ",e.jsx("span",{className:"font-bold",children:t.name})]})}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.area})]},t.id)})})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No rooms available"})})]}),e.jsxs("div",{className:"border rounded-lg border-green-400 dark:border-green-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-green-50/60 dark:bg-green-950/30 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-t-lg transition-colors",onClick:()=>Se(!W),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-green-800 dark:text-green-300",children:["Institute Assets (",f.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-green-600/80 dark:text-green-400/80 mt-0.5",children:f.length>0?`Total qty: ${f.reduce((t,s)=>t+(Number(s.total_qty)||0),0).toLocaleString()} Â· Across ${f.reduce((t,s)=>t+(Number(s.locations_count)||0),0)} room(s)`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-green-600 dark:text-green-400 transform transition-transform ${W?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),W&&e.jsx("div",{className:"p-2 border-t border-green-200 dark:border-green-800",children:f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-600 dark:bg-green-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Asset Name"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Total Quantity"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Rooms"})]})}),e.jsx("tbody",{children:f.map(t=>e.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 font-bold dark:text-gray-100",children:t.name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-green-700 font-bold dark:text-gray-100",children:t.total_qty}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.locations_count})]},t.id))})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No assets available"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 my-1  md:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"border rounded-lg border-blue-400 dark:border-blue-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-blue-50/60 dark:bg-blue-950/30 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-t-lg transition-colors",onClick:()=>Ie(!z),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-blue-800 dark:text-blue-300",children:["Institute Upgradations (",y.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600/80 dark:text-blue-400/80 mt-0.5",children:y.length>0?`${y.filter(t=>{var s;return((s=t.status)==null?void 0:s.toLowerCase())==="completed"}).length} completed Â· ${y.filter(t=>{var s;return((s=t.status)==null?void 0:s.toLowerCase())!=="completed"}).length} pending`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-blue-600 dark:text-blue-400 transform transition-transform ${z?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),z&&e.jsx("div",{className:"p-2 border-t border-blue-200 dark:border-blue-800",children:y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 dark:bg-blue-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Details"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Date from"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Date to"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Level From"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Level To"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Status"})]})}),e.jsx("tbody",{children:y.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 dark:hover:bg-blue-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.details}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:Y(t.from)}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:Y(t.to)}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.levelfrom}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.levelto}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.status})]},t.id))})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No upgradations available"})})]}),e.jsxs("div",{className:"border rounded-lg border-green-400 dark:border-green-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-green-50/60 dark:bg-green-950/30 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-t-lg transition-colors",onClick:()=>Le(!q),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-green-800 dark:text-green-300",children:["Institute Projects (",b.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-green-600/80 dark:text-green-400/80 mt-0.5",children:b.length>0?`âœ… ${b.reduce((t,s)=>t+(parseInt(s.completed)||0),0)} completed Â· ðŸ”„ ${b.reduce((t,s)=>t+(parseInt(s.inprogress)||0),0)} in-progress Â· ðŸ“‹ ${b.reduce((t,s)=>t+(parseInt(s.planned)||0),0)} planned`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-green-600 dark:text-green-400 transform transition-transform ${q?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),q&&e.jsx("div",{className:"p-2 border-t border-green-200 dark:border-green-800",children:b.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-600 dark:bg-green-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Project Type"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Completed"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"In Progress"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Planned"})]})}),e.jsx("tbody",{children:b.map(t=>e.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-green-700 font-semibold dark:text-green-400",children:t.completed}),e.jsx("td",{className:"border px-2 py-1 text-xs text-blue-700 font-semibold dark:text-blue-400",children:t.inprogress}),e.jsx("td",{className:"border px-2 py-1 text-xs text-green-700 font-semibold dark:text-green-400",children:t.planned})]}))})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No projects available"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 my-1  md:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"border rounded-lg border-blue-400 dark:border-blue-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-blue-50/60 dark:bg-blue-950/30 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded-t-lg transition-colors",onClick:()=>Te(!V),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-blue-800 dark:text-blue-300",children:["Institute Transports (",N.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-blue-600/80 dark:text-blue-400/80 mt-0.5",children:N.length>0?`${[...new Set(N.map(t=>{var s;return(s=t.vehicle_type)==null?void 0:s.name}).filter(Boolean))].length} vehicle type(s)`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-blue-600 dark:text-blue-400 transform transition-transform ${V?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&e.jsx("div",{className:"p-2 border-t border-blue-200 dark:border-blue-800",children:N.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 dark:bg-blue-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Vehicle No"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Vehicle Type"})]})}),e.jsx("tbody",{children:N.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-blue-50 dark:hover:bg-blue-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 font-bold dark:text-gray-100",children:t.vehicle_no}),e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:(s=t.vehicle_type)==null?void 0:s.name})]},t.id)})})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No Transport available"})})]}),e.jsxs("div",{className:"border rounded-lg border-green-400 dark:border-green-600 border-l-4",children:[e.jsxs("button",{className:"w-full p-2 text-left flex justify-between items-center bg-green-50/60 dark:bg-green-950/30 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-t-lg transition-colors",onClick:()=>_e(!O),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-green-800 dark:text-green-300",children:["Institute Funds (",u.length,")"]}),e.jsx("p",{className:"text-[10px] md:text-xs text-green-600/80 dark:text-green-400/80 mt-0.5",children:u.length>0?`Total balance: ${P(u.reduce((t,s)=>Number(t)+Number(s.balance),0))} Â· ${u.length} fund head(s)`:"No data"})]}),e.jsx("svg",{className:`w-5 h-5 text-green-600 dark:text-green-400 transform transition-transform ${O?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),O&&e.jsx("div",{className:"p-2 border-t border-green-200 dark:border-green-800",children:u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse rounded-md overflow-hidden shadow-sm border-1",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-green-600 dark:bg-green-800",children:[e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Fund Head"}),e.jsx("th",{className:"border px-2 py-1 text-left text-xs font-medium text-white dark:text-gray-200",children:"Balance"})]})}),e.jsxs("tbody",{children:[u.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-green-50 dark:hover:bg-green-900/30",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 dark:text-gray-100",children:(s=t.fund_head)==null?void 0:s.name}),e.jsx("td",{className:"border px-2 py-1 text-xs text-green-700 dark:text-green-400 font-bold",children:P(t.balance)})]},t.id)}),e.jsxs("tr",{className:"bg-green-50 dark:bg-green-900/20",children:[e.jsx("td",{className:"border px-2 py-1 text-xs text-gray-900 font-bold dark:text-gray-100",children:"Total"}),e.jsx("td",{className:"border px-2 py-1 text-xs text-green-800 font-bold dark:text-green-300",children:P(u.reduce((t,s)=>Number(t)+Number(s.balance),0))})]})]})]})}):e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No Fund available"})})]})]})]})]})}export{vt as default};
