import{m as v,j as e,L as f,$ as g,S as n}from"./app-DaMpCOaW.js";import{A as N,S,c as b,d as C}from"./app-layout-DwOJplx5.js";import{B as m}from"./button-DI0eA2eC.js";import{C as I,a as q,b as w,c as E}from"./card-DI6x-NLU.js";import{I as p}from"./index-BqbVY0EQ.js";import{L as i}from"./label-DkpKMobq.js";import{T as F}from"./textarea-DO3GNr-Q.js";import{C as x}from"./combobox-B--2qwCA.js";import"./index-lGnkZazh.js";import"./createLucideIcon-660qNgga.js";import"./index-1A-ArDvk.js";import"./app-logo-icon-eexpgwPh.js";import"./popover-bBUyplgH.js";function K({instituteAsset:s,assets:h,rooms:j}){const d=!!s,{data:r,setData:l,processing:o,errors:t,reset:u}=v({current_qty:(s==null?void 0:s.current_qty)||"",details:(s==null?void 0:s.details)||"",added_date:(s==null?void 0:s.added_date)||new Date().toISOString().split("T")[0],room_id:(s==null?void 0:s.room_id)||"",asset_id:(s==null?void 0:s.asset_id)||""}),_=a=>{a.preventDefault(),d?n.put(`/institute-assets/${s.id}`,r,{preserveScroll:!0,preserveState:!0}):n.post("/institute-assets",r,{onSuccess:()=>{u("current_qty","details","asset_id"),setTimeout(()=>{var c;(c=document.querySelector("#asset_id input"))==null||c.focus()},0)}})},y=[{title:"Institute Assets",href:"/institute-assets"},{title:d?"Edit Asset":"Add Asset",href:"#"}];return e.jsxs(N,{breadcrumbs:y,children:[e.jsx(f,{title:d?"Edit Institute Asset":"Add Institute Asset"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(I,{children:[e.jsxs(q,{children:[e.jsx(w,{className:"text-2xl font-bold",children:d?"Edit Institute Asset":"Add Institute Asset"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Edit institute asset details":"Add a new asset to institute inventory"})]}),e.jsx(S,{}),e.jsx(E,{className:"pt-6",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"asset_id",children:"Asset"}),e.jsx(x,{entity:"asset",value:r.asset_id.toString(),onChange:a=>l("asset_id",a?parseInt(a):""),options:h.map(a=>({id:a.id.toString(),name:a.name+(a.category?` (${a.category.name})`:"")})),includeAllOption:!1}),t.asset_id&&e.jsx("p",{className:"text-sm text-destructive",children:t.asset_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"room_id",children:"Room"}),e.jsx(x,{entity:"room",value:r.room_id.toString(),onChange:a=>l("room_id",a?parseInt(a):""),options:j.map(a=>({id:a.id.toString(),name:a.name+(a.block?` (${a.block.name})`:"")+(a.type?` - ${a.type.name}`:"")})),includeAllOption:!1}),t.room_id&&e.jsx("p",{className:"text-sm text-destructive",children:t.room_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"added_date",children:"Added Date"}),e.jsx(p,{id:"added_date",type:"date",value:r.added_date,onChange:a=>l("added_date",a.target.value)}),t.added_date&&e.jsx("p",{className:"text-sm text-destructive",children:t.added_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"current_qty",children:"Quantity"}),e.jsx(p,{id:"current_qty",type:"number",min:"1",value:r.current_qty,onChange:a=>l("current_qty",a.target.value?parseInt(a.target.value):""),placeholder:"Enter quantity"}),t.current_qty&&e.jsx("p",{className:"text-sm text-destructive",children:t.current_qty})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"details",children:"Details"}),e.jsx(F,{id:"details",value:r.details,onChange:a=>l("details",a.target.value),placeholder:"Enter asset details or description",rows:4}),t.details&&e.jsx("p",{className:"text-sm text-destructive",children:t.details})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(g,{href:"/institute-assets",children:e.jsxs(m,{type:"button",variant:"secondary",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(m,{type:"submit",disabled:o,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),o?d?"Saving...":"Adding...":d?"Save Changes":"Add Asset"]})]})]})})]})})]})}export{K as default};
