import{K as v,r as i,j as t,L as S,e as L}from"./app-DGWGRrzG.js";import{A as D}from"./app-layout-Cg0HTvoU.js";import{C as m,c as f,a as $,b as T}from"./card-Ba-yTbaG.js";import"./button-0rti9i6T.js";import"./index-Ce5N92Tk.js";import"./createLucideIcon-Dtv16D6g.js";import"./input-D6pDtbKq.js";import"./index-Cl8JYPay.js";import"./app-logo-icon-Cap1TXzj.js";import"./folder-root-15YcJ1-N.js";import"./grip-vertical-Ds03oefJ.js";const F=[{title:"Dashboard",href:"/dashboard"}],y=[{label:"Users",value:420,color:"#3b82f6",redirectlink:""},{label:"Backups",value:80,color:"#10b981",redirectlink:""},{label:"Activity Logs",value:1570,color:"#f59e0b",redirectlink:""}],j=[{bg:"from-blue-50 to-blue-100",border:"border-blue-200",header:"bg-blue-500",text:"text-blue-800",accent:"bg-blue-200/50"},{bg:"from-green-50 to-green-100",border:"border-green-200",header:"bg-green-500",text:"text-green-800",accent:"bg-green-200/50"},{bg:"from-amber-50 to-amber-100",border:"border-amber-200",header:"bg-amber-500",text:"text-amber-800",accent:"bg-amber-200/50"}],A=e=>e.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),b=e=>!e||e.length===0?[]:Object.keys(e[0]),E=(e,l)=>{if(e==null)return"-";if(typeof e=="number")return e.toLocaleString();if(typeof e=="string"){if(["balance","cost","amount","price","value","total_cost","total_amount"].some(c=>l==null?void 0:l.toLowerCase().includes(c))){const c=parseFloat(e);if(!isNaN(c))return`${c.toLocaleString()}`}return e}return String(e)};function J(){const{props:e}=v();e.auth.user;const l=e.cards||[],[u,g]=i.useState(y),[c,h]=i.useState(!1),[M,B]=i.useState({}),[d,x]=i.useState({0:5,1:5,2:5}),k=[{title:e.title1||"Funds",data:e.tab1||[],columns:b(e.tab1||[]),link:e.link1||""},{title:e.title2||"Tab2",data:e.tab2||[],columns:b(e.tab2||[]),link:e.link2||""},{title:e.title3||"Tab3",data:e.tab3||[],columns:b(e.tab3||[]),link:e.link3||""}];i.useEffect(()=>{if(l.length===0)return;(async()=>{h(!0);try{const r=l.map(async s=>{try{const n=await L.get(s.link);return{label:s.title,value:n.data.count||0,color:s.color,redirectlink:s.redirectlink}}catch(n){return console.error(`Failed to fetch count for ${s.title}:`,n),{label:s.title,value:0,color:s.color,redirectlink:s.redirectlink}}}),o=await Promise.all(r);g(o)}catch(r){console.error("Failed to fetch summary data:",r)}finally{h(!1)}})()},[l]);const w=a=>{x(r=>({...r,[a]:(r[a]||5)+5}))},N=a=>{x(r=>({...r,[a]:Math.max(5,(r[a]||5)-5)}))};return t.jsxs(D,{breadcrumbs:F,children:[t.jsx(S,{title:"Dashboard"}),t.jsxs("div",{className:"flex flex-col gap-6 p-5",children:[t.jsx("div",{className:"relative px-8 py-6 text-center",children:t.jsx(m,{className:"inline-block bg-primary/95 backdrop-blur-sm shadow-2xl border-0 max-w-3xl mx-auto mb-2 p-5",style:{borderBottom:"6px solid rgba(0,0,255,0.7)"},children:t.jsx(f,{className:"pt-5 px-10",children:t.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-white",children:"School Management System"})})})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:(c?y:u).map((a,r)=>{const o=l[r],s=(o==null?void 0:o.icon)||["Users","HardDrive","LogIcon"][r%3];return t.jsx(m,{redirectLink:a.redirectlink,number:c?"...":a.value,title:a.label,icon:s,iconBgColor:a.color,changeColorOnHover:!0,className:"shadow-lg p-5 hover:scale-110 hover:-translate-y-2 transition-all duration-300 ease-in-out active:scale-95"},r)})}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:k.map((a,r)=>{const o=j[r%j.length];return t.jsxs(m,{className:`bg-gradient-to-br ${o.bg} ${o.border} shadow-lg rounded-xl overflow-hidden dark:bg-gray-800 dark:border-gray-700`,children:[t.jsx($,{className:`${o.header} text-white px-6 py-4 dark:bg-gray-700`,children:t.jsxs(T,{className:"text-lg font-semibold flex items-center",children:[t.jsx("span",{className:"w-3 h-3 bg-white rounded-full mr-2"}),a.title]})}),t.jsx(f,{className:"p-0",children:a.data.length>0?t.jsxs("div",{className:"overflow-x-auto px-4 py-3",children:[t.jsx("div",{className:"shadow-sm rounded-md overflow-hidden",children:t.jsxs("table",{className:"w-full table-fixed",children:[t.jsx("thead",{className:`${o.accent} dark:bg-gray-600`,children:t.jsx("tr",{children:a.columns.map((s,n)=>t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium dark:text-gray-200",style:{color:o.header.replace("bg-","text-")+"900"},children:A(s)},n))})}),t.jsx("tbody",{children:a.data.slice(0,d[r]||5).map((s,n)=>t.jsx("tr",{className:`border-b ${o.border}/30 transition-colors hover:opacity-95
                                     ${n%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"}`,children:a.columns.map((p,C)=>t.jsx("td",{className:`py-3 px-4 text-sm md:text-lg ${o.text}`,children:E(s[p],p)},C))},n))})]})}),a.data.length>5&&t.jsxs("div",{className:"p-4 text-center border-t border-gray-200 bg-gray-50 flex gap-2 justify-center",children:[(d[r]||5)<a.data.length&&t.jsxs("button",{type:"button",onClick:()=>w(r),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md border border-transparent bg-blue-500 text-white shadow-sm hover:bg-blue-600 focus:outline-none transition-colors",children:["Show More (",a.data.length-(d[r]||5)," remaining)"]}),(d[r]||5)>5&&t.jsx("button",{type:"button",onClick:()=>N(r),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md border border-transparent bg-gray-400 text-white shadow-sm hover:bg-gray-500 focus:outline-none transition-colors",children:"Show Less"})]})]}):t.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No data available"})})]},r)})})]})]})}export{J as default};
