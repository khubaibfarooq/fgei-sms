import{j as e,L as u,$ as n,S as c}from"./app-D6lyKCb0.js";import{A as j,P as f,e as N,T as v}from"./app-layout-BJ6RDFjC.js";import{B as r}from"./button-CCPkYfcN.js";import{C as g,a as b,b as S,c as _}from"./card-DPyw2mDh.js";import{t as y}from"./index-C2dM8uf0.js";import"./index-BTiWGghc.js";import"./createLucideIcon-zTYlLHSb.js";import"./index-DTjwdlGq.js";import"./index-PyfYCCz6.js";import"./input-BekdTFNy.js";import"./app-logo-icon-DREUhacY.js";import"./folder-root-DLhWLZqd.js";import"./grip-vertical-Czs-UF6q.js";const A=[{title:"Approval Stages",href:"/approval-stages"}];function D({stages:l,users:o,projectTypes:m,filters:a}){const p=s=>{confirm("Are you sure you want to delete this stage?")&&c.delete(`/approval-stages/${s}`,{onSuccess:()=>y.success("Stage deleted successfully")})},x=s=>{c.get("/approval-stages",{project_type_id:s.target.value},{preserveState:!0,preserveScroll:!0})},i=s=>!s||s.length===0?"-":s.map(t=>{var d;return(d=o.find(h=>h.id===t))==null?void 0:d.name}).filter(Boolean).join(", ");return e.jsxs(j,{breadcrumbs:A,children:[e.jsx(u,{title:"Approval Stages"}),e.jsx("div",{className:"flex-1 p-4 md:p-6",children:e.jsxs(g,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{children:"Approval Stages"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:(a==null?void 0:a.project_type_id)||"",onChange:x,children:[e.jsx("option",{value:"",children:"All Project Types"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(n,{href:"/approval-stages/create",children:e.jsxs(r,{children:[e.jsx(f,{className:"w-4 h-4 mr-2"})," Add Stage"]})})]})]}),e.jsx(_,{children:e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-3 text-left font-medium",children:"Order"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Stage Name"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Project Type"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Level"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"User Req?"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Last Stage?"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Approvers"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Mandatory"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center text-muted-foreground p-6",children:"No approval stages defined."})}):l.map(s=>{var t;return e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"p-3",children:s.stage_order}),e.jsx("td",{className:"p-3 font-medium",children:s.stage_name}),e.jsx("td",{className:"p-3",children:((t=s.project_type)==null?void 0:t.name)||"-"}),e.jsx("td",{className:"p-3 capitalize",children:s.level}),e.jsx("td",{className:"p-3",children:s.is_user_required?"Yes":"No"}),e.jsx("td",{className:"p-3",children:s.is_last?"Yes":"No"}),e.jsx("td",{className:"p-3 max-w-xs truncate",title:i(s.users_can_approve),children:i(s.users_can_approve)}),e.jsx("td",{className:"p-3",children:s.is_mandatory?"Yes":"No"}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsx(n,{href:`/approval-stages/${s.id}/edit`,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(N,{className:"w-4 h-4"})})}),e.jsx(r,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>p(s.id),children:e.jsx(v,{className:"w-4 h-4"})})]})]},s.id)})})]})})})]})})]})}export{D as default};
