import{r as d,j as e,L as ke,S as _,a as h}from"./app-DduZuMU7.js";import{A as Ce,F as T,S as b,B as W,cz as Fe,C as Y,U as Z,E as _e,g as Te,b as ee,c as Ie}from"./app-layout-TMvq1j-Y.js";import{B as o}from"./button-B8bJZ2kL.js";import{C as p,a as Ae,b as Pe,c as y}from"./card-C4CJy0ze.js";import{I}from"./input-BHhpD2SQ.js";import{B as x}from"./badge-DYOISQfL.js";import{D as A,a as P,b as D,c as L,d as M,X as De,e as B,t as se}from"./index-os1lis2T.js";import{S as Le,a as Me,b as Be,c as Oe,d as ae}from"./select-BQ__b1bx.js";import{T as Re,a as He,b as O,c as R}from"./tabs-C3z4oS2Y.js";import{I as w}from"./image-preview-CkAw8xBV.js";import{C as te}from"./index-Dy8YcbBM.js";import{a as ze}from"./circle-x-Clzh4cqj.js";import{f as $e}from"./format-CAPgRCzf.js";import"./index-CpZE1_Kd.js";import"./index-DJlkcdzW.js";import"./index-Dfc1mdqz.js";import"./index-DNsdrKja.js";import"./createLucideIcon-DU6lGx1n.js";import"./app-logo-icon-BplJzOdP.js";import"./folder-root-BOiBkmlC.js";import"./grip-vertical-zbhOZJvr.js";import"./index-CI0ASFoa.js";import"./index-DE7r-M2q.js";const Ee=[{title:"Funds",href:"/funds"},{title:"Pending Transactions",href:"#"}];function xs({transactions:m,summary:S,fundHeads:re,balances:H=[],filters:u}){const z=s=>{const t=typeof s=="number"?s:parseFloat(String(s).replace(/,/g,""))||0;return t>=1e6?`${(t/1e6).toFixed(2)} Mn`:new Intl.NumberFormat("ur-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)},[$,le]=d.useState(u.search||""),[E,de]=d.useState(u.from||""),[U,ne]=d.useState(u.to||""),[V,ie]=d.useState(u.fund_head_id||""),[ce,k]=d.useState(!1),[n,q]=d.useState(null),[c,oe]=d.useState(null),[me,C]=d.useState(!1),[a,xe]=d.useState(null),[G,g]=d.useState(!1),[he,j]=d.useState(!1),[l,pe]=d.useState(null),[F,K]=d.useState(null),ue=async s=>{var t;if(s.tid){q(s),k(!0),g(!0);try{const{data:r}=await h.get(`/transactions/getbytid?tid=${s.tid}`);oe(((t=r.transdetails)==null?void 0:t[0])||null)}catch(r){console.error("Failed to load transaction details:",r),se.error("Failed to load transaction details")}finally{g(!1)}}},ge=async s=>{const t=s.tid;if(t){q(s),C(!0),g(!0);try{const[r,i,we,Se]=await Promise.all([h.get(`/projects/${t}/project-details`),h.get(`/projects/${t}/history`),h.get(`/projects/${t}/milestones`),h.get(`/projects/${t}/payments`)]);xe({project:{id:t,name:r.data.name,estimated_cost:r.data.estimated_cost,actual_cost:r.data.actual_cost,status:r.data.status,approval_status:r.data.approval_status,priority:r.data.priority,institute:r.data.institute,description:r.data.description,pdf:r.data.pdf},history:i.data,milestones:we.data,payments:Se.data.payments})}catch(r){console.error("Failed to load project details:",r),se.error("Failed to load project details")}finally{g(!1)}}},je=s=>{s.trans_type==="project"?ge(s):ue(s)},[f,N]=d.useState(null),[X,v]=d.useState(null),J=()=>{_.get(window.location.pathname,{search:$,from:E||void 0,to:U||void 0,fund_head_id:V||void 0},{preserveState:!0,preserveScroll:!0})},fe=s=>{s.key==="Enter"&&J()},Ne=s=>{pe(s),N(null),v(null),j(!0)},ve=s=>{var r;const t=(r=s.target.files)==null?void 0:r[0];if(t){N(t);const i=new FileReader;i.onloadend=()=>{v(i.result)},i.readAsDataURL(t)}},be=()=>{N(null),v(null)},ye=async()=>{var s,t;if(l){K(l.id);try{const r=new FormData;f?(console.log("Appending image to FormData:",f.name,f.size),r.append("img",f)):console.log("No image selected"),console.log("Sending approval request for transaction:",l.id);const{data:i}=await h.post(`/funds/${l.id}/approve`,r);i.success?(j(!1),N(null),v(null),_.reload()):alert(i.message||"Failed to approve transaction")}catch(r){console.error("Failed to approve transaction:",r);const i=((t=(s=r.response)==null?void 0:s.data)==null?void 0:t.message)||"An error occurred while approving the transaction";alert(i)}finally{K(null)}}},Q=s=>s==="in"?e.jsx(x,{variant:"default",className:"bg-green-100 text-green-800 hover:bg-green-200",children:"IN"}):e.jsx(x,{variant:"destructive",className:"bg-red-100 text-red-800 hover:bg-red-200",children:"OUT"});return e.jsxs(Ce,{breadcrumbs:Ee,children:[e.jsx(ke,{title:"Pending Fund Transactions"}),e.jsx("div",{className:"flex-1 p-2 md:p-3",children:e.jsxs(p,{children:[e.jsx(Ae,{className:"pb-3",children:e.jsxs(Pe,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(T,{className:"h-6 w-6"}),"Pending Fund Transactions"]})}),e.jsx(b,{}),e.jsxs(y,{className:"pt-3 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Pending"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:S.total_count})]}),e.jsx(T,{className:"h-5 w-5 text-blue-600"})]})})}),e.jsx(p,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending IN"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.total_in.toLocaleString()})]}),e.jsx(x,{variant:"default",className:"bg-green-100 text-green-800",children:"IN"})]})})}),e.jsx(p,{children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending OUT"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.total_out.toLocaleString()})]}),e.jsx(x,{variant:"destructive",className:"bg-red-100 text-red-800",children:"OUT"})]})})})]}),H.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),"Regional Fund Head Balances"]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:H.map((s,t)=>e.jsxs("div",{className:"bg-muted/50 dark:bg-gray-800 p-4 rounded-lg border hover:shadow-md transition-shadow cursor-default",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground truncate",children:s.fund_head.name}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400 mt-2",children:z(s.balance)})]},t))}),e.jsx(b,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search"}),e.jsx(I,{placeholder:"Search description...",value:$,onChange:s=>le(s.target.value),onKeyDown:fe})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fund Head"}),e.jsxs(Le,{value:V,onValueChange:ie,children:[e.jsx(Me,{children:e.jsx(Be,{placeholder:"All Fund Heads"})}),e.jsxs(Oe,{children:[e.jsx(ae,{value:"0",children:"All Fund Heads"}),re.map(s=>e.jsx(ae,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"From"}),e.jsx(I,{type:"date",value:E,onChange:s=>de(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"To"}),e.jsx(I,{type:"date",value:U,onChange:s=>ne(s.target.value)})]})]}),e.jsxs(o,{onClick:J,className:"w-full md:w-auto",children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Apply Filters"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",m.from," to ",m.to," of ",m.total," pending transactions"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary dark:bg-gray-800",children:[e.jsx("th",{className:"border p-3 text-left text-sm font-medium text-white dark:text-gray-200",children:"Date"}),e.jsx("th",{className:"border p-3 text-left text-sm font-medium text-white dark:text-gray-200",children:"Fund Head"}),e.jsx("th",{className:"border p-3 text-left text-sm font-medium text-white dark:text-gray-200",children:"Institute"}),e.jsx("th",{className:"border p-3 text-left text-sm font-medium text-white dark:text-gray-200",children:"Description"}),e.jsx("th",{className:"border p-3 text-center text-sm font-medium text-white dark:text-gray-200",children:"Type"}),e.jsx("th",{className:"border p-3 text-right text-sm font-medium text-white dark:text-gray-200",children:"Amount"}),e.jsx("th",{className:"border p-3 text-left text-sm font-medium text-white dark:text-gray-200",children:"Added By"}),e.jsx("th",{className:"border p-3 text-center text-sm font-medium text-white dark:text-gray-200",children:"Actions"})]})}),e.jsx("tbody",{children:m.data.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"border p-8 text-center",children:[e.jsx(T,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No pending transactions found."})]})}):m.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"border p-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),new Date(s.added_date).toLocaleDateString()]})}),e.jsx("td",{className:"border p-3 text-sm font-medium",children:s.fund_head.name}),e.jsx("td",{className:"border p-3 text-sm",children:s.institute.name}),e.jsx("td",{className:"border p-3 text-sm",children:s.description}),e.jsx("td",{className:"border p-3 text-center",children:Q(s.type)}),e.jsx("td",{className:"border p-3 text-right text-sm font-medium",children:e.jsxs("span",{className:s.type==="in"?"text-green-600":"text-red-600",children:[s.type==="in"?"+":"-",z(s.amount)]})}),e.jsx("td",{className:"border p-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),s.user.name]})}),e.jsx("td",{className:"border p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>je(s),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(o,{size:"sm",variant:"default",onClick:()=>Ne(s),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Approve"]})]})})]},s.id))})]})}),m.links.length>1&&e.jsx("div",{className:"flex justify-center pt-6 flex-wrap gap-2",children:m.links.map((s,t)=>e.jsx(o,{disabled:!s.url,variant:s.active?"default":"outline",size:"sm",onClick:()=>_.visit(s.url||"",{preserveScroll:!0}),children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},t))})]})]})}),e.jsx(A,{open:he,onOpenChange:j,children:e.jsxs(P,{className:"max-w-2xl",children:[e.jsxs(D,{children:[e.jsx(L,{children:"Approve Transaction"}),e.jsx(M,{children:"Review the transaction details before approving"})]}),l&&e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Fund Head:"})," ",l.fund_head.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Institute:"})," ",l.institute.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",Q(l.type)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",e.jsxs("span",{className:l.type==="in"?"text-green-600 font-semibold":"text-red-600 font-semibold",children:[l.type==="in"?"+":"-",l.amount.toLocaleString()]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("strong",{children:"Description:"})," ",l.description]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",$e(new Date(l.added_date),"dd MMM yyyy")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Added By:"})," ",l.user.name]})]}),e.jsx(b,{}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Note:"})," Approving this transaction will update the fund balance.",l.type==="in"?" The balance will be increased by the transaction amount.":" The balance will be decreased by the transaction amount."]})}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Attach Image (Optional)"}),X?e.jsxs("div",{className:"relative border rounded-lg p-2",children:[e.jsx("img",{src:X,alt:"Preview",className:"max-h-48 mx-auto rounded"}),e.jsx(o,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:be,children:e.jsx(De,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ve,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx(Te,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click to upload an image"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})]})]})]}),e.jsxs(B,{children:[e.jsx(o,{variant:"outline",onClick:()=>j(!1),disabled:F!==null,children:"Cancel"}),e.jsx(o,{onClick:ye,disabled:F!==null,className:"bg-green-600 hover:bg-green-700",children:F!==null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Approving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Approve Transaction"]})})]})]})}),e.jsx(A,{open:ce,onOpenChange:k,children:e.jsxs(P,{className:"max-w-md h-[90vh]  overflow-y-auto",children:[e.jsxs(D,{children:[e.jsx(L,{children:"Transaction Details"}),e.jsx(M,{children:"Detailed breakdown of the selected transaction"})]}),G?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground",children:"Fund Head"}),e.jsx("p",{className:"font-medium",children:c.fund_head_name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"font-medium text-lg",children:Number(c.amount).toLocaleString()})]}),c.asset_name&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground",children:"Asset"}),e.jsx("p",{className:"font-medium",children:c.asset_name})]}),c.qty>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground",children:"Quantity"}),e.jsx("p",{className:"font-medium",children:c.qty})]}),c.room_name&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-muted-foreground",children:"Room"}),e.jsx("p",{className:"font-medium",children:c.room_name})]})]}),(n==null?void 0:n.img)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transaction Evidence"}),e.jsx(w,{dataImg:n.img,size:"h-64 w-full"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),e.jsx("p",{className:"text-sm p-3 bg-muted rounded-md border",children:(n==null?void 0:n.description)||"No description provided"})]})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No additional details found for this transaction."}),e.jsx(B,{children:e.jsx(o,{variant:"outline",onClick:()=>k(!1),children:"Close"})})]})}),e.jsx(A,{open:me,onOpenChange:C,children:e.jsxs(P,{className:"max-w-3xl h-[90vh] flex flex-col p-0",children:[e.jsxs(D,{className:"p-6 pb-0",children:[e.jsxs(L,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-primary"}),"Request for ",n==null?void 0:n.amount," RS (",a==null?void 0:a.project.name,")"]}),e.jsxs(M,{children:[a==null?void 0:a.project.institute.name,e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Estimated Cost: ",a==null?void 0:a.project.estimated_cost]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Actual Cost: ",a==null?void 0:a.project.actual_cost]}),(a==null?void 0:a.project.pdf)&&e.jsx("a",{href:`/assets/${a==null?void 0:a.project.pdf}`,target:"_blank",className:"mt-1 text-blue-600 underline text-xs flex items-center gap-1",children:"View PDF"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 h-full min-h-0",children:e.jsxs(Re,{defaultValue:"approvals",className:"w-full h-full flex flex-col",children:[e.jsxs(He,{className:"grid w-full grid-cols-3 shrink-0",children:[e.jsx(O,{value:"approvals",children:"Approvals"}),e.jsx(O,{value:"milestones",children:"Milestones"}),e.jsx(O,{value:"payments",children:"Payments"})]}),e.jsxs("div",{className:"flex-1 mt-4 pb-6 h-full min-h-0",children:[e.jsx(R,{value:"approvals",className:"m-0 space-y-4",children:G?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(a==null?void 0:a.history.length)===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:"No approval history."}):e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.history.map(s=>{var t,r;return e.jsx(p,{className:"overflow-hidden",children:e.jsxs("div",{className:"p-4 flex gap-4",children:[e.jsx("div",{className:"mt-1",children:s.status==="approved"?e.jsx(ee,{className:"h-5 w-5 text-green-500"}):e.jsx(ze,{className:"h-5 w-5 text-red-500"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-semibold",children:((t=s.stage)==null?void 0:t.stage_name)||"Stage"}),e.jsx(x,{variant:s.status==="approved"?"default":"destructive",className:"capitalize",children:s.status})]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"})," ",(r=s.approver)==null?void 0:r.name," • ",e.jsx(Ie,{className:"h-3 w-3 ml-1"})," ",new Date(s.action_date).toLocaleString()]}),s.comments&&e.jsxs("p",{className:"text-sm bg-muted/50 p-2 rounded mt-2 border italic",children:['"',s.comments,'"']}),s.pdf&&e.jsx("a",{href:`/${s.pdf}`,target:"_blank",className:"mt-1 text-blue-600 underline text-xs flex items-center gap-1",children:"View PDF"}),s.img&&e.jsx("div",{className:"mt-2",children:e.jsx(w,{dataImg:s.img,size:"h-20",className:"rounded border"})})]})]})},s.id)})})}),e.jsx(R,{value:"milestones",className:"m-0 space-y-4",children:(a==null?void 0:a.milestones.length)===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:"No milestones found."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a==null?void 0:a.milestones.map(s=>e.jsxs(p,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx("p",{className:"font-semibold text-sm",children:s.name}),e.jsx(x,{variant:s.status==="completed"?"default":"outline",className:"text-[10px]",children:s.status})]}),s.img&&e.jsx("div",{className:"mb-2",children:e.jsx(w,{dataImg:s.img,size:"h-32",className:"w-full object-cover rounded-md"})}),s.pdf&&e.jsx("a",{href:`/${s.pdf}`,target:"_blank",className:"mb-2 text-blue-600 underline text-xs flex items-center gap-1",children:"View Document (PDF)"}),e.jsxs("div",{className:"text-[10px] text-muted-foreground space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"})," Due in: ",s.days," days"]}),s.completed_date&&e.jsxs("p",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ee,{className:"h-3 w-3"})," Done: ",new Date(s.completed_date).toLocaleDateString()]})]}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:s.description})]},s.id))})}),e.jsx(R,{value:"payments",className:"m-0 space-y-4",children:(a==null?void 0:a.payments.length)===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:"No payments recorded."}):e.jsx("div",{className:"space-y-3",children:a==null?void 0:a.payments.map(s=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-bold",children:s.amount.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((t=s.fund_head)==null?void 0:t.name)||"General Fund"," • ",new Date(s.added_date).toLocaleDateString()]})]}),e.jsx(x,{variant:s.status==="Approved"?"default":"outline",children:s.status}),s.img&&e.jsx("div",{className:"mt-2",children:e.jsx(w,{dataImg:s.img,size:"h-20",className:"rounded border"})})]},s.id)})})})]})]})}),e.jsx(B,{className:"p-6 border-t shrink-0",children:e.jsx(o,{variant:"outline",onClick:()=>C(!1),children:"Close"})})]})})]})}export{xs as default};
