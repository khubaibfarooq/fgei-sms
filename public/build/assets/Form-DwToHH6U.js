import{m as _,j as a,L as f,S as n}from"./app-DVVjhKmX.js";import{A as N,S as t,c as b}from"./app-layout-D5u2y6UH.js";import{B as i}from"./button-6WDHEY08.js";import{C as y,a as C,b as S,c as I}from"./card-6dYjOdPy.js";import{I as c}from"./input-DGeWAlAb.js";import{L as p}from"./label-C_oBsTMm.js";import"./index-CiZnxWeY.js";import"./createLucideIcon-X7VkaPmF.js";import"./index-Dbqhbced.js";import"./index-BLyZVFAq.js";import"./index-CZPXlBRG.js";import"./app-logo-icon-WFs7-yfb.js";import"./folder-root-dsO9wqYG.js";import"./grip-vertical-CsOn8xeG.js";function O({institute:e}){const x=!!e,{data:o,setData:m,processing:h,errors:l,setError:g}=_({name:(e==null?void 0:e.name)||"",established_date:(e==null?void 0:e.established_date)||"",total_area:(e==null?void 0:e.total_area)||0,convered_area:(e==null?void 0:e.convered_area)||0,img_layout:(e==null?void 0:e.img_layout)||"",img_3d:(e==null?void 0:e.img_3d)||"",video:(e==null?void 0:e.video)||"",gender:(e==null?void 0:e.gender)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""}),j=s=>{s.preventDefault();const d=new FormData;Object.keys(o).forEach(r=>{if(!(o[r]===null||o[r]==="")){if(r==="img_layout"||r==="img_3d"||r==="video"){o[r]instanceof File&&d.append(r,o[r]);return}if(r==="total_area"||r==="convered_area"){d.append(r,o[r].toString());return}d.append(r,o[r])}}),x?(d.append("_method","PUT"),n.post(`/institutes/${e.id}`,d,{forceFormData:!0,preserveScroll:!0,preserveState:!0,onError:r=>{g(r)}})):n.post("institutes",d,{forceFormData:!0,onError:r=>{g(r)}})},v=[{title:"Institute",href:"/institute"},{title:x?"Edit Institute":"Add Institute",href:"#"}];return a.jsxs(N,{breadcrumbs:v,children:[a.jsx(f,{title:x?"Update Institute":"Add Institute"}),a.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:a.jsxs(y,{children:[a.jsx(C,{children:a.jsx(S,{className:"text-2xl font-bold text-center",children:o.name})}),a.jsx(t,{}),a.jsx(I,{className:"pt-6",children:a.jsxs("form",{onSubmit:j,className:"space-y-6",encType:"multipart/form-data",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"established_date",children:"Established Date"}),a.jsx(c,{id:"established_date",type:"date",value:o.established_date,onChange:s=>m("established_date",s.target.value)}),l.established_date&&a.jsx("p",{className:"text-red-500 text-sm",children:l.established_date})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"total_area",children:"Total Area (sq ft)"}),a.jsx(c,{id:"total_area",type:"number",value:o.total_area,onChange:s=>m("total_area",Number(s.target.value))}),l.total_area&&a.jsx("p",{className:"text-red-500 text-sm",children:l.total_area})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),a.jsx(c,{id:"convered_area",type:"number",value:o.convered_area,onChange:s=>m("convered_area",Number(s.target.value))}),l.convered_area&&a.jsx("p",{className:"text-red-500 text-sm",children:l.convered_area})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Layout Image"}),e!=null&&e.img_layout?a.jsx("img",{src:`/assets/${e.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),a.jsx(c,{id:"img_layout",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_layout",((d=s.target.files)==null?void 0:d[0])||null)}}),l.img_layout&&a.jsx("p",{className:"text-red-500 text-sm",children:l.img_layout})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Front View Image"}),e!=null&&e.img_3d?a.jsx("img",{src:`/assets/${e.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),a.jsx(c,{id:"img_3d",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_3d",((d=s.target.files)==null?void 0:d[0])||null)}}),l.img_3d&&a.jsx("p",{className:"text-red-500 text-sm",children:l.img_3d})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Video"}),e!=null&&e.video?a.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[a.jsx("source",{src:`/assets/${e.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),a.jsx(c,{id:"video",type:"file",accept:"video/*",onChange:s=>{var d;return m("video",((d=s.target.files)==null?void 0:d[0])||null)}}),l.video&&a.jsx("p",{className:"text-red-500 text-sm",children:l.video})]})]}),a.jsx("div",{className:"flex items-center justify-between pt-2",children:a.jsxs(i,{type:"submit",disabled:h,children:[a.jsx(b,{className:"mr-2 h-4 w-4"}),h?x?"Saving...":"Adding...":x?"Save Changes":"Save Institute"]})})]})})]})})]})}export{O as default};
