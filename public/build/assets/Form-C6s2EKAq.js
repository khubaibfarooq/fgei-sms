import{r as f,j as e,L as C,$ as N,S as o}from"./app-BJCScVp8.js";import{A as y,a as b,d as g}from"./app-layout-Dx_ikLQ6.js";import{B as p}from"./button-z0m9xNlq.js";import{C as q,a as k,b as L,c as A}from"./card-C3J1ZYF8.js";import{I as m}from"./input-DtqahtNM.js";import{L as l}from"./label-CfOAUezV.js";import{T as F}from"./textarea-CxkYIhB2.js";import{C as t}from"./checkbox-B3oI2jcA.js";import{S as E,a as I,b as w,c as D,d as h}from"./select-TokZg_D-.js";import{t as x}from"./index-Bbk2dwLF.js";import{M as T}from"./MultiSelect-e82fdc9F.js";import"./index-BC-mwh3r.js";import"./createLucideIcon-C9CLbEZh.js";import"./index-Iw5nNgYb.js";import"./index-Ow1OBPom.js";import"./index-B_719ekL.js";import"./index-C8eqYZqc.js";import"./app-logo-icon-BQV5XrCM.js";import"./circle-x-DDib0KDx.js";import"./folder-root-BNL5ri1Z.js";import"./grip-vertical-CltcTm7B.js";import"./index-D8mFFcYm.js";import"./index-ChLqg_xe.js";function le({stage:s,fundHeads:u,users:_}){var c,d;const n=!!s,[a,i]=f.useState({stage_name:(s==null?void 0:s.stage_name)||"",fund_head_id:((c=s==null?void 0:s.fund_head_id)==null?void 0:c.toString())||"",stage_order:((d=s==null?void 0:s.stage_order)==null?void 0:d.toString())||"",description:(s==null?void 0:s.description)||"",is_mandatory:(s==null?void 0:s.is_mandatory)??!0,users_can_approve:(s==null?void 0:s.users_can_approve)||[],is_last:(s==null?void 0:s.is_last)??!1,level:(s==null?void 0:s.level)||"",is_user_required:(s==null?void 0:s.is_user_required)??!1,change_to_in_progress:(s==null?void 0:s.change_to_in_progress)??!1}),j=r=>{r.preventDefault(),n?o.put(`/approval-stages/${s.id}`,a,{onSuccess:()=>x.success("Stage updated successfully")}):o.post("/approval-stages",a,{onSuccess:()=>x.success("Stage created successfully")})},v=[{title:"Approval Stages",href:"/approval-stages"},{title:n?"Edit Stage":"Create Stage",href:"#"}];return e.jsxs(y,{breadcrumbs:v,children:[e.jsx(C,{title:n?"Edit Stage":"Create Stage"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:e.jsxs(q,{children:[e.jsx(k,{children:e.jsx(L,{children:n?"Edit Approval Stage":"Define New Stage"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["Stage Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{value:a.stage_name,onChange:r=>i({...a,stage_name:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Fund Head (Categorical)"}),e.jsxs(E,{value:a.fund_head_id,onValueChange:r=>i({...a,fund_head_id:r}),children:[e.jsx(I,{children:e.jsx(w,{placeholder:"Select Fund Head (Optional)"})}),e.jsxs(D,{children:[e.jsx(h,{value:"0",children:"Global (No specific Fund Head)"}),u.map(r=>e.jsx(h,{value:r.id.toString(),children:r.name},r.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{children:["Stage Order (Sequence) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"number",value:a.stage_order,onChange:r=>i({...a,stage_order:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Description"}),e.jsx(F,{value:a.description,onChange:r=>i({...a,description:r.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{id:"mandatory",checked:a.is_mandatory,onCheckedChange:r=>i({...a,is_mandatory:!!r})}),e.jsx(l,{htmlFor:"mandatory",children:"Mandatory Stage?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{id:"is_user_required",checked:a.is_user_required,onCheckedChange:r=>i({...a,is_user_required:!!r})}),e.jsx(l,{htmlFor:"is_user_required",children:"User Selection Req?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{id:"is_last",checked:a.is_last,onCheckedChange:r=>i({...a,is_last:!!r})}),e.jsx(l,{htmlFor:"is_last",children:"Is Last Stage?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{id:"change_to_in_progress",checked:a.change_to_in_progress,onCheckedChange:r=>i({...a,change_to_in_progress:!!r})}),e.jsx(l,{htmlFor:"change_to_in_progress",children:"Change to In Progress?"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Approvers (Users)"}),e.jsx(T,{options:_.map(r=>({value:r.id.toString(),label:r.name})),value:(a.users_can_approve||[]).map(r=>r.toString()),onChange:r=>i({...a,users_can_approve:r.map(S=>parseInt(S))}),placeholder:"Select Approvers..."})]}),e.jsx("div",{className:"flex items-center space-x-2"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{children:"Level"}),e.jsxs("select",{value:a.level,onChange:r=>i({...a,level:r.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Level"}),e.jsx("option",{value:"institutional",children:"Institutional"}),e.jsx("option",{value:"regional",children:"Regional"}),e.jsx("option",{value:"dte",children:"DTE"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(N,{href:"/approval-stages",children:e.jsxs(p,{variant:"outline",type:"button",children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Back"]})}),e.jsxs(p,{type:"submit",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Save Stage"]})]})]})})]})})]})}export{le as default};
