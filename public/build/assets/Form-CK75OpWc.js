import{r as S,j as e,L as f,$ as y,S as d}from"./app-D6lyKCb0.js";import{A as C,a as N,d as b}from"./app-layout-BJ6RDFjC.js";import{B as p}from"./button-CCPkYfcN.js";import{C as q,a as L,b as k,c as A}from"./card-DPyw2mDh.js";import{I as m}from"./input-BekdTFNy.js";import{L as t}from"./label-BNivIVyg.js";import{T as I}from"./textarea-B4fRdAHP.js";import{C as c}from"./checkbox-OIQVAwh1.js";import{S as E,a as T,b as w,c as D,d as F}from"./select-pSh8MoHv.js";import{t as u}from"./index-C2dM8uf0.js";import{M as R}from"./MultiSelect-Ci8MMhfW.js";import"./index-BTiWGghc.js";import"./createLucideIcon-zTYlLHSb.js";import"./index-DTjwdlGq.js";import"./index-PyfYCCz6.js";import"./app-logo-icon-DREUhacY.js";import"./folder-root-DLhWLZqd.js";import"./grip-vertical-Czs-UF6q.js";import"./index-pfB5R6qP.js";import"./index-BsLD0GjN.js";function se({stage:r,projectTypes:x,users:h}){var n,o;const l=!!r,[a,i]=S.useState({stage_name:(r==null?void 0:r.stage_name)||"",project_type_id:((n=r==null?void 0:r.project_type_id)==null?void 0:n.toString())||"",stage_order:((o=r==null?void 0:r.stage_order)==null?void 0:o.toString())||"",description:(r==null?void 0:r.description)||"",is_mandatory:(r==null?void 0:r.is_mandatory)??!0,users_can_approve:(r==null?void 0:r.users_can_approve)||[],is_last:(r==null?void 0:r.is_last)??!1,level:(r==null?void 0:r.level)||"",is_user_required:(r==null?void 0:r.is_user_required)??!1}),j=s=>{s.preventDefault(),l?d.put(`/approval-stages/${r.id}`,a,{onSuccess:()=>u.success("Stage updated successfully")}):d.post("/approval-stages",a,{onSuccess:()=>u.success("Stage created successfully")})},v=[{title:"Approval Stages",href:"/approval-stages"},{title:l?"Edit Stage":"Create Stage",href:"#"}];return e.jsxs(C,{breadcrumbs:v,children:[e.jsx(f,{title:l?"Edit Stage":"Create Stage"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:e.jsxs(q,{children:[e.jsx(L,{children:e.jsx(k,{children:l?"Edit Approval Stage":"Define New Stage"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{children:["Stage Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{value:a.stage_name,onChange:s=>i({...a,stage_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{children:["Project Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(E,{value:a.project_type_id,onValueChange:s=>i({...a,project_type_id:s}),children:[e.jsx(T,{children:e.jsx(w,{placeholder:"Select Project Type"})}),e.jsx(D,{children:x.map(s=>e.jsx(F,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{children:["Stage Order (Sequence) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{type:"number",value:a.stage_order,onChange:s=>i({...a,stage_order:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Description"}),e.jsx(I,{value:a.description,onChange:s=>i({...a,description:s.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:"mandatory",checked:a.is_mandatory,onCheckedChange:s=>i({...a,is_mandatory:!!s})}),e.jsx(t,{htmlFor:"is_user_required",children:"Is User Required?"}),e.jsx(c,{id:"is_user_required",checked:a.is_user_required,onCheckedChange:s=>i({...a,is_user_required:!!s})}),e.jsx(t,{htmlFor:"is_user_required",children:"Is User Required?"}),e.jsx(c,{id:"is_last",checked:a.is_last,onCheckedChange:s=>i({...a,is_last:!!s})}),e.jsx(t,{htmlFor:"is_last",children:"Is Last Stage?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{children:"Approvers (Users)"}),e.jsx(R,{options:h.map(s=>({value:s.id.toString(),label:s.name})),value:(a.users_can_approve||[]).map(s=>s.toString()),onChange:s=>i({...a,users_can_approve:s.map(_=>parseInt(_))}),placeholder:"Select Approvers..."})]}),e.jsx("div",{className:"flex items-center space-x-2"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{children:"Level"}),e.jsxs("select",{value:a.level,onChange:s=>i({...a,level:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Level"}),e.jsx("option",{value:"institutional",children:"Institutional"}),e.jsx("option",{value:"regional",children:"Regional"}),e.jsx("option",{value:"dte",children:"DTE"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(y,{href:"/approval-stages",children:e.jsxs(p,{variant:"outline",type:"button",children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," Back"]})}),e.jsxs(p,{type:"submit",children:[e.jsx(b,{className:"w-4 h-4 mr-2"})," Save Stage"]})]})]})})]})})]})}export{se as default};
