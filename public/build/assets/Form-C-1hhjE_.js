import{r as v,j as e,m as C,L as g,$ as b}from"./app-BkIYF0B_.js";import{aT as y,A as w,S as x}from"./app-layout-B8yZ-LC9.js";import{I as h}from"./input-CCfghYXo.js";import{L as l}from"./label-e1l0PEdY.js";import{B as m,c as _}from"./button-FpQlVGsK.js";import{C as M,a as S,b as E,c as P}from"./card-CojAARqZ.js";import{C as I,a as F,b as L,c as A,d as k,I as D}from"./icon-picker-DlIO32gz.js";import{P as T,a as $,b as B}from"./popover-DI2OD7J1.js";import{C as O}from"./index-BKlDaJyT.js";import"./index-C_6opvjc.js";import"./index-DtEHKdL_.js";import"./index-s94pc9Ud.js";import"./index-B0ZYHbNm.js";import"./createLucideIcon-CBPUJ6Fa.js";import"./index-DcBKgsN-.js";import"./app-logo-icon-C0uA72ug.js";import"./circle-x-e6sBlHxe.js";import"./clsx-B-dksMZM.js";import"./folder-root-D7P9g72l.js";import"./grip-vertical-BUM2KCUv.js";function R({value:s,onChange:n,options:c}){const[r,o]=v.useState(!1);return e.jsxs(T,{open:r,onOpenChange:o,children:[e.jsx($,{asChild:!0,children:e.jsxs(m,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between",children:[s||"Select permissions",e.jsx(y,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(B,{className:"w-full p-0 max-h-60 overflow-y-auto",children:e.jsxs(I,{children:[e.jsx(F,{placeholder:"Cari permission..."}),e.jsx(L,{children:"permission not found"}),e.jsx(A,{children:c.map(t=>e.jsxs(k,{value:t,onSelect:d=>{n(d),o(!1)},children:[e.jsx(O,{className:_("mr-2 h-4 w-4",s===t?"opacity-100":"opacity-0")}),t]},t))})]})})]})}function le({menu:s,parentMenus:n,permissions:c}){const r=!!s,{data:o,setData:t,post:d,put:j,processing:p,errors:i,reset:u}=C({title:(s==null?void 0:s.title)||"",route:(s==null?void 0:s.route)||"",icon:(s==null?void 0:s.icon)||"",parent_id:(s==null?void 0:s.parent_id)??null,permission_name:(s==null?void 0:s.permission_name)||""}),f=a=>{a.preventDefault(),r?j(`/menus/${s==null?void 0:s.id}`):d("/menus",{onSuccess:()=>u()})},N=[{title:"Menu Management",href:"/menus"},{title:r?"Edit Menu":"Add Menu",href:"#"}];return e.jsxs(w,{breadcrumbs:N,children:[e.jsx(g,{title:r?"Edit Menu":"Add Menu"}),e.jsx("div",{className:"flex-1 p-4 md:p-6",children:e.jsxs(M,{className:"max-w-2xl mx-auto",children:[e.jsxs(S,{className:"pb-3",children:[e.jsx(E,{className:"text-2xl font-bold tracking-tight",children:r?"Edit Menu":"Add New Menu"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Update menu details":"Create a new menu for the system"})]}),e.jsx(x,{}),e.jsx(P,{className:"pt-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:"Menu Title *"}),e.jsx(h,{id:"title",value:o.title,onChange:a=>t("title",a.target.value),placeholder:"Example: Dashboard",className:i.title?"border-red-500":""}),i.title&&e.jsx("p",{className:"text-sm text-red-500",children:i.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"route",children:"Route"}),e.jsx(h,{id:"route",value:o.route,onChange:a=>t("route",a.target.value),placeholder:"Example: /dashboard",className:i.route?"border-red-500":""}),i.route&&e.jsx("p",{className:"text-sm text-red-500",children:i.route})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"icon",children:"Icon (Lucide)"}),e.jsx(D,{value:o.icon,onChange:a=>t("icon",a)}),i.icon&&e.jsx("p",{className:"text-sm text-red-500",children:i.icon})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"parent_id",children:"Parent Menu"}),e.jsxs("select",{id:"parent_id",value:o.parent_id??"",onChange:a=>t("parent_id",a.target.value===""?null:Number(a.target.value)),className:"w-full rounded border px-3 py-2",children:[e.jsx("option",{value:"",children:"— None —"}),n.map(a=>e.jsx("option",{value:a.id,children:a.title},a.id))]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(l,{htmlFor:"permission_name",children:"Permission"}),e.jsx(R,{value:o.permission_name||"",onChange:a=>t("permission_name",a),options:c}),i.permission_name&&e.jsx("p",{className:"text-sm text-red-500",children:i.permission_name})]})]}),e.jsx(x,{}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 pt-2 sm:flex-row sm:justify-end",children:[e.jsx(b,{href:"/menus",className:"w-full sm:w-auto",children:e.jsx(m,{type:"button",variant:"secondary",className:"w-full",children:"Cancel"})}),e.jsx(m,{type:"submit",disabled:p,className:"w-full sm:w-auto",children:p?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"↻"}),r?"Saving...":"Creating..."]}):r?"Save Changes":"Create Menu"})]})]})})]})})]})}export{le as default};
