import{m as _,j as a,L as f,S as n}from"./app-D11bxRh5.js";import{A as t,S as N,d as b}from"./app-layout-C0HX1335.js";import{B as i}from"./button-D4JCJ08l.js";import{C as y,a as C,b as S,c as I}from"./card-BtSrY6Qn.js";import{I as c}from"./input-DkRaDipk.js";import{L as p}from"./label-CJgi1hO5.js";import"./index-D2p8fnIk.js";import"./createLucideIcon-Dgh1T-nI.js";import"./index-C2FgNEgo.js";import"./index-CLhMZ-TS.js";import"./index-kOT80Fu-.js";import"./index-yvXVfYV7.js";import"./index-BdXQa_V8.js";import"./app-logo-icon-COWl4HZD.js";import"./circle-x-DXxKQNo3.js";import"./folder-root-X6oJSnUk.js";import"./grip-vertical-Bkjodxto.js";function Y({institute:e}){const x=!!e,{data:l,setData:m,processing:h,errors:o,setError:g}=_({name:(e==null?void 0:e.name)||"",established_date:(e==null?void 0:e.established_date)||"",total_area:(e==null?void 0:e.total_area)||0,convered_area:(e==null?void 0:e.convered_area)||0,img_layout:(e==null?void 0:e.img_layout)||"",img_3d:(e==null?void 0:e.img_3d)||"",video:(e==null?void 0:e.video)||"",gender:(e==null?void 0:e.gender)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""}),j=s=>{s.preventDefault();const d=new FormData;Object.keys(l).forEach(r=>{if(!(l[r]===null||l[r]==="")){if(r==="img_layout"||r==="img_3d"||r==="video"){l[r]instanceof File&&d.append(r,l[r]);return}if(r==="total_area"||r==="convered_area"){d.append(r,l[r].toString());return}d.append(r,l[r])}}),x?(d.append("_method","PUT"),n.post(`/institutes/${e.id}`,d,{forceFormData:!0,preserveScroll:!0,preserveState:!0,onError:r=>{g(r)}})):n.post("institutes",d,{forceFormData:!0,onError:r=>{g(r)}})},v=[{title:"Institute",href:"/institute"},{title:x?"Edit Institute":"Add Institute",href:"#"}];return a.jsxs(t,{breadcrumbs:v,children:[a.jsx(f,{title:x?"Update Institute":"Add Institute"}),a.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:a.jsxs(y,{children:[a.jsx(C,{children:a.jsx(S,{className:"text-2xl font-bold text-center",children:l.name})}),a.jsx(N,{}),a.jsx(I,{className:"pt-6",children:a.jsxs("form",{onSubmit:j,className:"space-y-6",encType:"multipart/form-data",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"established_date",children:"Established Date"}),a.jsx(c,{id:"established_date",type:"date",value:l.established_date,onChange:s=>m("established_date",s.target.value)}),o.established_date&&a.jsx("p",{className:"text-red-500 text-sm",children:o.established_date})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"total_area",children:"Total Area (sq ft)"}),a.jsx(c,{id:"total_area",type:"number",value:l.total_area,onChange:s=>m("total_area",Number(s.target.value))}),o.total_area&&a.jsx("p",{className:"text-red-500 text-sm",children:o.total_area})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),a.jsx(c,{id:"convered_area",type:"number",value:l.convered_area,onChange:s=>m("convered_area",Number(s.target.value))}),o.convered_area&&a.jsx("p",{className:"text-red-500 text-sm",children:o.convered_area})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Layout Image"}),e!=null&&e.img_layout?a.jsx("img",{src:`/assets/${e.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),a.jsx(c,{id:"img_layout",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_layout",((d=s.target.files)==null?void 0:d[0])||null)}}),o.img_layout&&a.jsx("p",{className:"text-red-500 text-sm",children:o.img_layout})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Front View Image"}),e!=null&&e.img_3d?a.jsx("img",{src:`/assets/${e.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),a.jsx(c,{id:"img_3d",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_3d",((d=s.target.files)==null?void 0:d[0])||null)}}),o.img_3d&&a.jsx("p",{className:"text-red-500 text-sm",children:o.img_3d})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{children:"Current Video"}),e!=null&&e.video?a.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[a.jsx("source",{src:`/assets/${e.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),a.jsx(c,{id:"video",type:"file",accept:"video/*",onChange:s=>{var d;return m("video",((d=s.target.files)==null?void 0:d[0])||null)}}),o.video&&a.jsx("p",{className:"text-red-500 text-sm",children:o.video})]})]}),a.jsx("div",{className:"flex items-center justify-between pt-2",children:a.jsxs(i,{type:"submit",disabled:h,children:[a.jsx(b,{className:"mr-2 h-4 w-4"}),h?x?"Saving...":"Adding...":x?"Save Changes":"Save Institute"]})})]})})]})})]})}export{Y as default};
