import{R as g,m as S,j as e,L as _,$ as v,S as p}from"./app-Cdk3sHQ-.js";import{A as y,S as D,a as b,d as N}from"./app-layout-C30RRcrN.js";import{B as u}from"./button-B_dRDm8B.js";import{C,a as w,b as A,c as E}from"./card-Ds0TW8eu.js";import{I as m}from"./input-BL7Eu0H6.js";import{L as n}from"./label-V70dIckp.js";import{S as I,a as L,b as F,c as B,d as O}from"./select-CeaH88OI.js";import"./index-DW-js-Tu.js";import"./createLucideIcon-B03EqeUB.js";import"./index-CbRnbBMM.js";import"./app-logo-icon-3gRpyEF6.js";import"./folder-root-DAvqPFRf.js";import"./grip-vertical-Cmm-tn1g.js";import"./index-xR1xzVbg.js";import"./index-BulhKOGE.js";function W({donation:t,donationTypes:r}){const d=!!t;console.log("donationTypes:",r);const x=g.useMemo(()=>r?Array.isArray(r)?r:Object.entries(r).map(([a,l])=>({id:parseInt(a),name:l})):[],[r]),{data:s,setData:i,processing:c,errors:o,reset:h}=S({details:(t==null?void 0:t.details)||"",amount:(t==null?void 0:t.amount)||0,institute_id:(t==null?void 0:t.institute_id)||0,donation_type_id:(t==null?void 0:t.donation_type_id)||0,added_date:t!=null&&t.added_date?new Date(t.added_date):new Date}),j=a=>{a.preventDefault();const l={...s,added_date:s.added_date?s.added_date.toISOString().split("T")[0]:null};d?p.put(`/donations/${t.id}`,l,{preserveScroll:!0,preserveState:!0}):p.post("/donations",l,{onSuccess:()=>{h()}})},f=[{title:"Donations",href:"/donations"},{title:d?"Edit Donation":"Add Donation",href:"#"}];return e.jsxs(y,{breadcrumbs:f,children:[e.jsx(_,{title:d?"Edit Donation":"Add Donation"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(A,{className:"text-2xl font-bold",children:d?"Edit Donation":"Add Donation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Edit donation details":"Create a new donation"})]}),e.jsx(D,{}),e.jsx(E,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Donation Name"}),e.jsx(m,{id:"name",value:s.details,onChange:a=>i("details",a.target.value),placeholder:"Enter donation details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"amount",children:"Amount"}),e.jsx(m,{id:"amount",type:"number",value:s.amount,onChange:a=>i("amount",Number(a.target.value)),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"donation_type_id",children:"Donation Type"}),e.jsxs(I,{value:s.donation_type_id.toString(),onValueChange:a=>i("donation_type_id",parseInt(a)),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Select donation type"})}),e.jsx(B,{children:x.map(a=>e.jsx(O,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"added_date",children:"Date"}),e.jsx(m,{id:"added_date",type:"date",value:s.added_date?s.added_date.toISOString().split("T")[0]:"",onChange:a=>i("added_date",a.target.value?new Date(a.target.value):null),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),o.added_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.added_date})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(v,{href:"/donations",children:e.jsxs(u,{type:"button",variant:"secondary",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(u,{type:"submit",disabled:c,children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),c?d?"Saving...":"Adding...":d?"Save Changes":"Add Donation"]})]})]})})]})})]})}export{W as default};
