import{m as v,j as e,L as f,$ as g,S as c}from"./app-gkHX-qgy.js";import{A as N,S,a as b,d as C}from"./app-layout-CI8rLLAy.js";import{B as m}from"./button-Bwh3Jxc1.js";import{C as I,a as q,b as w,c as E}from"./card-CS7cZOJ5.js";import{I as p}from"./input-zfRbTPNr.js";import{L as l}from"./label-4RTASywl.js";import{T as F}from"./textarea-w5q0JvPZ.js";import{C as x}from"./combobox-LJJOdEJJ.js";import"./index-Cq_rOi8O.js";import"./createLucideIcon-XuxAOOSW.js";import"./index-DVyWPT_r.js";import"./app-logo-icon-CpxzZuS2.js";import"./folder-root-CetMCIaK.js";import"./grip-vertical-CkpQtX_d.js";import"./popover-DA1oGOGS.js";function P({instituteAsset:t,assets:h,rooms:j}){const d=!!t,{data:r,setData:i,processing:o,errors:s,reset:u}=v({current_qty:(t==null?void 0:t.current_qty)||"",details:(t==null?void 0:t.details)||"",added_date:(t==null?void 0:t.added_date)||new Date().toISOString().split("T")[0],room_id:(t==null?void 0:t.room_id)||"",asset_id:(t==null?void 0:t.asset_id)||""}),_=a=>{a.preventDefault(),d?c.put(`/institute-assets/${t.id}`,r,{preserveScroll:!0,preserveState:!0}):c.post("/institute-assets",r,{onSuccess:()=>{u("current_qty","details","asset_id"),setTimeout(()=>{var n;(n=document.querySelector("#asset_id input"))==null||n.focus()},0)}})},y=[{title:"Institute Assets",href:"/institute-assets"},{title:d?"Edit Asset":"Add Asset",href:"#"}];return e.jsxs(N,{breadcrumbs:y,children:[e.jsx(f,{title:d?"Edit Institute Asset":"Add Institute Asset"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(I,{children:[e.jsxs(q,{children:[e.jsx(w,{className:"text-2xl font-bold",children:d?"Edit Institute Asset":"Add Institute Asset"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Edit institute asset details":"Add a new asset to institute inventory"})]}),e.jsx(S,{}),e.jsx(E,{className:"pt-6",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"asset_id",children:"Asset"}),e.jsx(x,{entity:"asset",value:r.asset_id.toString(),onChange:a=>i("asset_id",a?parseInt(a):""),options:h.map(a=>({id:a.id.toString(),name:a.name+(a.category?` (${a.category.name})`:"")})),includeAllOption:!1}),s.asset_id&&e.jsx("p",{className:"text-sm text-destructive",children:s.asset_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"room_id",children:"Room"}),e.jsx(x,{entity:"room",value:r.room_id.toString(),onChange:a=>i("room_id",a?parseInt(a):""),options:j.map(a=>({id:a.id.toString(),name:a.name+(a.block?` (${a.block.name})`:"")+(a.type?` - ${a.type.name}`:"")})),includeAllOption:!1}),s.room_id&&e.jsx("p",{className:"text-sm text-destructive",children:s.room_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"added_date",children:"Added Date"}),e.jsx(p,{id:"added_date",type:"date",value:r.added_date,onChange:a=>i("added_date",a.target.value)}),s.added_date&&e.jsx("p",{className:"text-sm text-destructive",children:s.added_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"current_qty",children:"Quantity"}),e.jsx(p,{id:"current_qty",type:"number",min:"1",value:r.current_qty,onChange:a=>i("current_qty",a.target.value?parseInt(a.target.value):""),placeholder:"Enter quantity"}),s.current_qty&&e.jsx("p",{className:"text-sm text-destructive",children:s.current_qty})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"details",children:"Details"}),e.jsx(F,{id:"details",value:r.details,onChange:a=>i("details",a.target.value),placeholder:"Enter asset details or description",rows:4}),s.details&&e.jsx("p",{className:"text-sm text-destructive",children:s.details})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(g,{href:"/institute-assets",children:e.jsxs(m,{type:"button",variant:"secondary",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(m,{type:"submit",disabled:o,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),o?d?"Saving...":"Adding...":d?"Save Changes":"Add Asset"]})]})]})})]})})]})}export{P as default};
