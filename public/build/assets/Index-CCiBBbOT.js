import{j as e,L as u,$ as n,S as c}from"./app-CLlEdssz.js";import{A as f,e as j,f as N,T as v}from"./app-layout-BI6GKxm3.js";import{B as r}from"./button-D4xsHMxb.js";import{C as g,a as b,b as _,c as S}from"./card-CgEvHTl1.js";import{t as A}from"./index-a5QN0e4I.js";import"./index-2A-t_HsG.js";import"./createLucideIcon-B-RmnteO.js";import"./index-CFvOf4M0.js";import"./index-DFl-w8Js.js";import"./index-C4wdQbSn.js";import"./index-16g5QveM.js";import"./input-qXoqo-K1.js";import"./app-logo-icon-lu6VYq73.js";import"./circle-x-B35n4AAs.js";import"./folder-root-ByThU7Xs.js";import"./grip-vertical-DasIIbnI.js";const C=[{title:"Approval Stages",href:"/approval-stages"}];function E({stages:l,users:o,fundHeads:m,filters:a}){const p=s=>{confirm("Are you sure you want to delete this stage?")&&c.delete(`/approval-stages/${s}`,{onSuccess:()=>A.success("Stage deleted successfully")})},h=s=>{c.get("/approval-stages",{fund_head_id:s.target.value},{preserveState:!0,preserveScroll:!0})},d=s=>!s||s.length===0?"-":s.map(t=>{var i;return(i=o.find(x=>x.id===t))==null?void 0:i.name}).filter(Boolean).join(", ");return e.jsxs(f,{breadcrumbs:C,children:[e.jsx(u,{title:"Approval Stages"}),e.jsx("div",{className:"flex-1 p-4 md:p-6",children:e.jsxs(g,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between",children:[e.jsx(_,{children:"Approval Stages"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:(a==null?void 0:a.fund_head_id)||"",onChange:h,children:[e.jsx("option",{value:"",children:"All Fund Heads"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(n,{href:"/approval-stages/create",children:e.jsxs(r,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"})," Add Stage"]})})]})]}),e.jsx(S,{children:e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-3 text-left font-medium",children:"Order"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Stage Name"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Fund Head"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Level"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"User Req?"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Last Stage?"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Change Cost?"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Approvers"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Mandatory"}),e.jsx("th",{className:"p-3 text-left font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center text-muted-foreground p-6",children:"No approval stages defined."})}):l.map(s=>{var t;return e.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"p-3",children:s.stage_order}),e.jsx("td",{className:"p-3 font-medium",children:s.stage_name}),e.jsx("td",{className:"p-3",children:((t=s.fund_head)==null?void 0:t.name)||"-"}),e.jsx("td",{className:"p-3 capitalize",children:s.level}),e.jsx("td",{className:"p-3",children:s.is_user_required?"Yes":"No"}),e.jsx("td",{className:"p-3",children:s.is_last?"Yes":"No"}),e.jsx("td",{className:"p-3",children:s.can_change_cost?"Yes":"No"}),e.jsx("td",{className:"p-3 max-w-xs truncate",title:d(s.users_can_approve),children:d(s.users_can_approve)}),e.jsx("td",{className:"p-3",children:s.is_mandatory?"Yes":"No"}),e.jsxs("td",{className:"p-3 flex gap-2",children:[e.jsx(n,{href:`/approval-stages/${s.id}/edit`,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(N,{className:"w-4 h-4"})})}),e.jsx(r,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>p(s.id),children:e.jsx(v,{className:"w-4 h-4"})})]})]},s.id)})})]})})})]})})]})}export{E as default};
