import{b,r as d,m as g,j as e,L as y,$ as N,S as x}from"./app-BeKMhUpM.js";import{A as R,S as A,a as C,d as E}from"./app-layout-CCXJcre5.js";import{B as f}from"./button-C2-S30jX.js";import{C as w,a as _,b as L,c as $}from"./card-BUEzV5bC.js";import{I as B}from"./input-CTHEwhqk.js";import{L as M}from"./label-DGJPhMyy.js";import{M as D}from"./MultiSelect-Cg0d3ZZd.js";import"./index-C6KjsqwD.js";import"./createLucideIcon-CdPSddVl.js";import"./index-DoR_u-J6.js";import"./index-BcL8rD-l.js";import"./index-C2HHEuBU.js";import"./index-CcDUl6fN.js";import"./index-Dnw4s9kq.js";import"./app-logo-icon-A5VGPFHp.js";import"./circle-x-_7AIfE6e.js";import"./folder-root-B1naXUAQ.js";import"./grip-vertical-BwmGlzOz.js";import"./index-BjMQ6ic9.js";import"./index-4PbF2cxI.js";function te({roomType:s,assets:o}){const r=!!s;console.log(s);const c=b.useMemo(()=>o?Array.isArray(o)?o.map(t=>({value:t.id.toString(),label:t.name})):Object.entries(o).map(([t,a])=>({value:t,label:a})):[],[o]),[i,l]=d.useState([]);d.useEffect(()=>{if(s!=null&&s.assets_id){const t=s.assets_id.split(",").map(a=>a.trim()).filter(a=>a!==""&&a!==null&&a!==void 0);l(t)}else l([])},[s]);const{data:n,setData:m,processing:p,errors:u,reset:h}=g({name:(s==null?void 0:s.name)||"",assets_id:(s==null?void 0:s.assets_id)||""});d.useEffect(()=>{const t=i.join(",");m("assets_id",t)},[i,m]);const j=t=>{t.preventDefault(),r?x.put(`/room-types/${s.id}`,n,{preserveScroll:!0,preserveState:!0}):x.post("/room-types",n,{onSuccess:()=>{h()}})},v=[{title:"Room Types",href:"/room-types"},{title:r?"Edit Room Type":"Add Room Type",href:"#"}];return e.jsxs(R,{breadcrumbs:v,children:[e.jsx(y,{title:r?"Edit Room Type":"Add Room Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(w,{children:[e.jsxs(_,{children:[e.jsx(L,{className:"text-2xl font-bold",children:r?"Edit Room Type":"Add Room Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit room type details":"Create a new room type"})]}),e.jsx(A,{}),e.jsx($,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"name",children:"Room Type Name"}),e.jsx(B,{id:"name",value:n.name,onChange:t=>m("name",t.target.value),placeholder:"Enter room type name"}),e.jsx(D,{options:c,value:i,onChange:l,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.length>0?`${i.length} room type(s) selected: ${i.map(t=>{const a=c.find(S=>S.value===t);return a?a.label:t}).join(", ")}`:"No room types selected"}),u.assets_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.assets_id})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(N,{href:"/room-types",children:e.jsxs(f,{type:"button",variant:"secondary",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(f,{type:"submit",disabled:p,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),p?r?"Saving...":"Adding...":r?"Save Changes":"Add Room Type"]})]})]})})]})})]})}export{te as default};
