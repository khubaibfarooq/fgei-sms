import{K as C,r as d,j as e,L as $,b as k}from"./app-D_bKqD2H.js";import{A as D}from"./app-layout-CfJy-7Id.js";import{C as m,c as x,a as g,b as f}from"./card-C211cThY.js";import"./button-CcChnIM8.js";import"./index-Dwe4S1Zl.js";import"./index-CD6BOKZx.js";import"./createLucideIcon-Dae_Rmom.js";import"./index-BA3VyJwA.js";import"./app-logo-icon-wAyt3np0.js";const L=[{title:"Dashboard",href:"/dashboard"}],y=[{label:"Users",value:420,color:"#3b82f6"},{label:"Backups",value:80,color:"#10b981"},{label:"Activity Logs",value:1570,color:"#f59e0b"}],j=[{bg:"from-blue-50 to-blue-100",border:"border-blue-200",header:"bg-blue-500",text:"text-blue-800",accent:"bg-blue-200/50"},{bg:"from-green-50 to-green-100",border:"border-green-200",header:"bg-green-500",text:"text-green-800",accent:"bg-green-200/50"},{bg:"from-amber-50 to-amber-100",border:"border-amber-200",header:"bg-amber-500",text:"text-amber-800",accent:"bg-amber-200/50"}],S=t=>t.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),b=t=>!t||t.length===0?[]:Object.keys(t[0]),A=(t,a)=>{if(t==null)return"-";if(typeof t=="number")return t.toLocaleString();if(typeof t=="string"){if(["balance","cost","amount","price","value","total_cost","total_amount"].some(n=>a==null?void 0:a.toLowerCase().includes(n))){const n=parseFloat(t);if(!isNaN(n))return`$${n.toLocaleString()}`}return t}return String(t)};function M(){const{props:t}=C(),a=t.auth.user,i=t.cards||[],[h,n]=d.useState(y),[u,p]=d.useState(!1),N=[{title:t.title1||"Funds",data:t.tab1||[],columns:b(t.tab1||[])},{title:t.title2||"Tab2",data:t.tab2||[],columns:b(t.tab2||[])},{title:t.title3||"Tab3",data:t.tab3||[],columns:b(t.tab3||[])}];return d.useEffect(()=>{if(i.length===0)return;(async()=>{p(!0);try{const o=i.map(async l=>{try{const c=await k.get(l.link);return{label:l.title,value:c.data.count||0,color:l.color}}catch(c){return console.error(`Failed to fetch count for ${l.title}:`,c),{label:l.title,value:0,color:l.color}}}),s=await Promise.all(o);n(s)}catch(o){console.error("Failed to fetch summary data:",o)}finally{p(!1)}})()},[i]),e.jsxs(D,{breadcrumbs:L,children:[e.jsx($,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[e.jsx("div",{className:"relative  rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"relative px-8 py-12 text-center",children:[e.jsx(m,{className:"inline-block bg-primary/95 backdrop-blur-sm shadow-4xl border-0 max-w-3xl mx-auto mb-2",style:{borderBottom:"6px solid rgba(0,0,255,0.7)"},children:e.jsx(x,{className:"p-4",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:"School Management System"})})}),e.jsxs("p",{className:"text-lg text-gray-800 mb-2",children:["Welcome back, ",(a==null?void 0:a.name)||"Administrator"]})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:(u?y:h).map((r,o)=>e.jsx("div",{className:"w-full sm:w-64 md:w-56 lg:w-64",children:e.jsxs(m,{className:"shadow-lg rounded-xl border-0 overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 h-full",style:{background:`linear-gradient(135deg, ${r.color}20, ${r.color}40)`,borderLeft:`4px solid ${r.color}`},children:[e.jsx(g,{className:"px-6 py-4 pb-2",children:e.jsx(f,{className:"text-lg font-semibold text-gray-700 dark:text-white text-center",children:r.label})}),e.jsx(x,{className:"px-6 py-4 pt-2",children:e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 text-center",children:u?"...":r.value})})]})},o))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:N.map((r,o)=>{const s=j[o%j.length];return e.jsxs(m,{className:`bg-gradient-to-br ${s.bg} ${s.border} shadow-lg rounded-xl overflow-hidden`,children:[e.jsx(g,{className:`${s.header} text-white px-6 py-4`,children:e.jsxs(f,{className:"text-lg font-semibold flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-white rounded-full mr-2"}),r.title]})}),e.jsx(x,{className:"p-0",children:r.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s.accent,children:e.jsx("tr",{children:r.columns.map((l,c)=>e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium",style:{color:s.header.replace("bg-","text-")+"900"},children:S(l)},c))})}),e.jsx("tbody",{children:r.data.map((l,c)=>e.jsx("tr",{className:`border-b ${s.border}/30 hover:${s.bg.replace("from-","bg-").split(" ")[0]}/50 transition-colors`,children:r.columns.map((w,v)=>e.jsx("td",{className:`py-3 px-4 text-sm ${s.text}`,children:A(l[w])},v))},c))})]})}):e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No data available"})})]},o)})})]})]})}export{M as default};
