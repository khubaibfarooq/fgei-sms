import{r as n,j as e,L as ee}from"./app-DqqZSVNf.js";import{A as te,S as T}from"./app-layout-vGh11b4g.js";import{B as x}from"./button-BDRr_Lb2.js";import{C as $,a as P,b as B,c as F}from"./card-Cpw9qVeG.js";import{S as se,a as ae,b as re,c as le,d as k}from"./select-Drjy0zFy.js";import{t as v,D as de,a as oe,b as ne,c as ie,d as xe}from"./index-DgzXFzZd.js";import{C}from"./combobox-CQ-uDxXS.js";import{E as ce,F as me,a as pe,b as S}from"./jspdf.plugin.autotable-6sWtoNg1.js";import{C as he,a as E}from"./circle-x-CrKNvWKu.js";import"./index-CvadV28Q.js";import"./createLucideIcon-Bx8WnYgL.js";import"./index-0Wz-2IFI.js";import"./index-DKXGstYK.js";import"./index-Gi5BoIxJ.js";import"./index-0zTPIpiI.js";import"./input-C6pqQhtI.js";import"./app-logo-icon-9zY9nAXU.js";import"./folder-root-CyYr8Heo.js";import"./grip-vertical-C76aDiMG.js";import"./index-998lSKmT.js";import"./index-D7dIRd68.js";import"./popover-BbYbE-oF.js";const ge=[{title:"Reports",href:"/reports"},{title:"Completion",href:"/reports/completion"}];function Ee({regions:j=[],filters:w,institutes:L=[],totalinstitutes:Z}){const[O,V]=n.useState(Z),[p,u]=n.useState(w.region_id||""),[y,h]=n.useState(w.institute_id||""),[a,o]=n.useState(w.status||""),[R,N]=n.useState(L),[g,U]=n.useState([]),[i,W]=n.useState([]),[z,A]=n.useState(!1),[Y,_]=n.useState(!1),[c,D]=n.useState(null),[H,I]=n.useState(!1),M=async t=>{I(!0),_(!0),D(null);try{const l=await fetch(`/reports/completion/getDetails?institute_id=${t}`);if(!l.ok)throw new Error;const s=await l.json();D(s)}catch{v.error("Failed to load details"),_(!1)}finally{I(!1)}};n.useEffect(()=>{p&&p!=="0"?fetch(`/reports/getInstitutes?region_id=${p}`).then(t=>t.json()).then(t=>N(t)).catch(()=>v.error("Failed to load institutes")):N([])},[p]);const f=(t,l)=>{const s=t.toString();u(s),h(""),d({region_id:s,institute_id:"",status:l})},J=t=>{const l=t.toString();h(l),u(""),window.open(`/reports/institutes?region_id=${p}&institute_id=${t}`,"_blank")},X=async()=>{const t=new ce.Workbook,l=t.addWorksheet("Summary");l.columns=[{header:"Region",key:"region",width:30},{header:"Total Institutions",key:"total",width:20},{header:"Completed",key:"completed",width:20},{header:"Above 50%",key:"greater",width:20},{header:"Below 50%",key:"less",width:20},{header:"Zero (0%)",key:"zero",width:20}],g.forEach(r=>{l.addRow({region:r.region,total:r.total_institutes,completed:r.completed,greater:r.greater_than_50,less:r.less_than_50,zero:r.zero})});const s=t.addWorksheet("Details");i.length>0&&i[0].is_region?(s.columns=[{header:"Region",key:"name",width:30},{header:"Shifts",key:"shifts",width:10},{header:"Blocks",key:"blocks",width:10},{header:"Rooms",key:"rooms",width:10},{header:"Assets",key:"assets",width:10},{header:"Plants",key:"plants",width:10},{header:"Transports",key:"transports",width:12},{header:"Funds",key:"funds",width:10},{header:"Projects",key:"projects",width:10},{header:"Upgradations",key:"upgradations",width:12},{header:"Total Institutions",key:"total",width:20},{header:"Completed",key:"completed",width:20},{header:"Above 50%",key:"greater",width:20},{header:"Below 50%",key:"less",width:20},{header:"Zero (0%)",key:"zero",width:20}],i.forEach(r=>{s.addRow({name:r.name,shifts:r.shifts,blocks:r.blocks,rooms:r.rooms,assets:r.assets,plants:r.plants,transports:r.transports,funds:r.funds,projects:r.projects,upgradations:r.upgradations,total:r.total_institutes,completed:r.completed,greater:r.greater_than_50,less:r.less_than_50,zero:r.zero})})):(s.columns=[{header:"Institute",key:"name",width:40},{header:"Region",key:"region",width:30},{header:"Shifts",key:"shifts",width:10},{header:"Blocks",key:"blocks",width:10},{header:"Rooms",key:"rooms",width:10},{header:"Assets",key:"assets",width:10},{header:"Plants",key:"plants",width:10},{header:"Transports",key:"transports",width:12},{header:"Funds",key:"funds",width:10},{header:"Projects",key:"projects",width:10},{header:"Upgradations",key:"upgradations",width:12},{header:"Total %",key:"percentage",width:10}],i.forEach(r=>{s.addRow({name:r.name,region:r.region_name,shifts:r.shifts,blocks:r.blocks,rooms:r.rooms,assets:r.assets,plants:r.plants,transports:r.transports,funds:r.funds,projects:r.projects,upgradations:r.upgradations,percentage:r.percentage+"%"})}));const Q=await t.xlsx.writeBuffer();me.saveAs(new Blob([Q]),"Completion_Report.xlsx")},q=()=>{const t=new pe("l","mm","a4");t.text("Completion Report - Summary",14,15),S(t,{head:[["Region","Total Institutions","Completed","Above 50%","Below 50%","Zero (0%)"]],body:g.map(s=>[s.region,s.total_institutes,s.completed,s.greater_than_50,s.less_than_50,s.zero]),startY:20}),t.addPage(),t.text("Completion Report - Details",14,15),i.length>0&&i[0].is_region?S(t,{head:[["Region","Total Inst.","Comp.","Above 50%","Below 50%","Zero (0%)"]],body:i.map(s=>[s.name,s.total_institutes||0,s.completed||0,s.greater_than_50||0,s.less_than_50||0,s.zero||0]),startY:20,styles:{fontSize:8}}):S(t,{head:[["Institute","Shifts","Blocks","Rooms","Assets","Plants","Transports","Funds","Projects","Upgradations","Total %"]],body:i.map(s=>[s.name,s.shifts||0,s.blocks||0,s.rooms||0,s.assets||0,s.plants||0,s.transports||0,s.funds||0,s.projects||0,s.upgradations||0,(s.percentage||0)+"%"]),startY:20,styles:{fontSize:8}}),t.save("Completion_Report.pdf")},d=async t=>{console.log(t),A(!0);try{const l=new URLSearchParams({region_id:(t==null?void 0:t.region_id)??p??"",institute_id:(t==null?void 0:t.institute_id)??y??"",status:(t==null?void 0:t.status)??a??""});console.log(l.toString());const s=await fetch(`/reports/completion/getData?${l.toString()}`);if(!s.ok)throw new Error;const b=await s.json();U(b.summary),W(b.details),V(b.totalinstitutes),b.institutes&&N(b.institutes)}catch{v.error("Failed to load report data")}finally{A(!1)}};n.useEffect(()=>{d()},[]);const G=()=>{d()},K=()=>{u(""),h(""),o(""),d({region_id:"",institute_id:"",status:""})},m=i.length>0&&i[0].is_region;return e.jsxs(te,{breadcrumbs:ge,children:[e.jsx(ee,{title:"Completion Report"}),e.jsxs("div",{className:"p-4 lg:p-6 max-w-full space-y-6",children:[e.jsxs($,{className:"w-full shadow-lg",children:[e.jsx(P,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-2xl font-bold",children:"Completion Report"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Institute data completion status"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{onClick:q,variant:"outline",size:"sm",children:"PDF"}),e.jsx(x,{onClick:X,variant:"outline",size:"sm",children:"Excel"})]})]})}),e.jsx(T,{}),e.jsx(F,{className:"pt-6 pb-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[j.length>0&&e.jsx(C,{entity:"region",value:p,onChange:t=>{u(t),h("")},options:j.map(t=>({id:t.id.toString(),name:t.name.split(" ").pop()||t.name})),includeAllOption:!0,placeholder:"Select Region"}),e.jsx(C,{entity:"institute",value:y,onChange:t=>{h(t),d({institute_id:t})},options:R.map(t=>({id:t.id.toString(),name:t.name})),includeAllOption:!0,placeholder:"Select Institute"}),e.jsxs(se,{value:a,onValueChange:o,children:[e.jsx(ae,{children:e.jsx(re,{placeholder:"Status"})}),e.jsxs(le,{children:[e.jsx(k,{value:"all",children:"All Statuses"}),e.jsx(k,{value:"completed",children:"Completed (100%)"}),e.jsx(k,{value:"greater_than_50",children:"Above 50%"}),e.jsx(k,{value:"less_than_50",children:"Below 50%"}),e.jsx(k,{value:"zero",children:"Zero (0%)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{onClick:G,className:"flex-1",disabled:z,children:z?"Loading...":"Apply"}),e.jsx(x,{variant:"outline",onClick:K,className:"flex-1",children:"Reset"})]})]})})]}),e.jsxs($,{children:[e.jsx(P,{children:e.jsx(B,{className:"text-lg md:text-xl lg:text-2xl font-bold",children:"Summary & Institute Details"})}),e.jsxs(F,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg lg:text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-primary rounded-full"}),"Summary Overview"]}),g.length>0?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-xl border bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4 md:p-5 shadow-sm hover:shadow-md transition-all duration-300 group",onClick:()=>{o(""),d({status:""})},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-slate-200/50 dark:bg-slate-700/30 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("p",{className:"text-base md:text-lg lg:text-xl font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Total Institutions"}),e.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-slate-700 dark:text-slate-200 group-hover:scale-105 transition-transform",children:O})]}),(a==="completed"||a==="")&&g.map((t,l)=>e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-emerald-200 dark:border-emerald-900 bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-950 dark:to-green-900 p-4 md:p-5 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group hover:border-emerald-400",onClick:()=>{o("completed"),d({status:"completed"})},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-200/50 dark:bg-emerald-800/30 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("p",{className:"text-base md:text-lg lg:text-xl font-semibold text-emerald-700 dark:text-emerald-400 uppercase tracking-wider mb-2",children:"âœ“ Completed"}),e.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-emerald-600 dark:text-emerald-400 group-hover:scale-105 transition-transform",children:t.completed})]},`completed-${l}`)),(a==="greater_than_50"||a==="")&&g.map((t,l)=>e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-blue-200 dark:border-blue-900 bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-950 dark:to-cyan-900 p-4 md:p-5 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group hover:border-blue-400",onClick:()=>{o("greater_than_50"),d({status:"greater_than_50"})},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-200/50 dark:bg-blue-800/30 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("p",{className:"text-base md:text-lg lg:text-xl font-semibold text-blue-700 dark:text-blue-400 uppercase tracking-wider mb-2",children:"â†‘ Above 50%"}),e.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-blue-600 dark:text-blue-400 group-hover:scale-105 transition-transform",children:t.greater_than_50})]},`above50-${l}`)),(a==="less_than_50"||a==="")&&g.map((t,l)=>e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-amber-200 dark:border-amber-900 bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-950 dark:to-orange-900 p-4 md:p-5 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group hover:border-amber-400",onClick:()=>{o("less_than_50"),d({status:"less_than_50"})},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-amber-200/50 dark:bg-amber-800/30 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("p",{className:"text-base md:text-lg lg:text-xl font-semibold text-amber-700 dark:text-amber-400 uppercase tracking-wider mb-2",children:"â†“ Below 50%"}),e.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-amber-600 dark:text-amber-400 group-hover:scale-105 transition-transform",children:t.less_than_50})]},`below50-${l}`)),(a==="zero"||a==="")&&g.map((t,l)=>e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-red-200 dark:border-red-900 bg-gradient-to-br from-red-50 to-rose-100 dark:from-red-950 dark:to-rose-900 p-4 md:p-5 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer group hover:border-red-400",onClick:()=>{o("zero"),d({status:"zero"})},children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-red-200/50 dark:bg-red-800/30 rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("p",{className:"text-sm md:text-base lg:text-lg font-semibold text-red-700 dark:text-red-400 uppercase tracking-wider mb-2",children:"âœ• Zero (0%)"}),e.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-red-600 dark:text-red-400 group-hover:scale-105 transition-transform",children:t.zero})]},`zero-${l}`))]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-xl border-2 border-dashed",children:"No summary data available"})]}),e.jsx(T,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg lg:text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-primary rounded-full"}),"Institute Details"]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-5",children:[!m&&j.length>0?e.jsxs(e.Fragment,{children:[e.jsx(C,{entity:"institute",value:y,onChange:t=>{h(t),d({institute_id:t})},options:R.map(t=>({id:t.id.toString(),name:t.name})),includeAllOption:!0,placeholder:"Select Institute"}),e.jsx(x,{onClick:()=>{u(""),h(""),d({region_id:"",institute_id:""})},variant:"outline",size:"sm",className:"rounded-full px-4 hover:bg-primary hover:text-primary-foreground transition-colors",children:"â† Show All Regions"})]}):"",e.jsx("div",{className:"h-6 w-px bg-border mx-1 hidden sm:block"}),e.jsx(x,{onClick:()=>{o(""),d({status:""})},size:"sm",className:`rounded-full px-4 transition-all ${a===""||a==="all"?"bg-slate-700 text-white shadow-md":"bg-slate-100 text-slate-700 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-300"}`,children:"All"}),e.jsx(x,{onClick:()=>{o("completed"),d({status:"completed"})},size:"sm",className:`rounded-full px-4 text-base transition-all ${a==="completed"?"bg-emerald-600 text-white shadow-md":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-400"}`,children:"âœ“ Completed"}),e.jsx(x,{onClick:()=>{o("greater_than_50"),d({status:"greater_than_50"})},size:"sm",className:`rounded-full px-4 text-base transition-all ${a==="greater_than_50"?"bg-blue-600 text-white shadow-md":"bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-400"}`,children:"â†‘ Above 50%"}),e.jsx(x,{onClick:()=>{o("less_than_50"),d({status:"less_than_50"})},size:"sm",className:`rounded-full px-4 text-base transition-all ${a==="less_than_50"?"bg-amber-600 text-white shadow-md":"bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-950 dark:text-amber-400"}`,children:"â†“ Below 50%"}),e.jsx(x,{onClick:()=>{o("zero"),d({status:"zero"})},size:"sm",className:`rounded-full px-4 text-base transition-all ${a==="zero"?"bg-red-600 text-white shadow-md":"bg-red-50 text-red-700 hover:bg-red-100 dark:bg-red-950 dark:text-red-400"}`,children:"âœ• Zero"})]}),e.jsx("div",{className:"overflow-x-auto rounded-xl border shadow-sm",children:e.jsxs("table",{className:"w-full text-sm md:text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-900 border-b",children:[e.jsx("th",{className:"px-4 md:px-6 py-4 text-left font-semibold text-slate-700 dark:text-slate-300  text-base md:text-lg lg:text-xl tracking-wider min-w-[200px]",children:m?"Region":"Institute"}),m?e.jsxs(e.Fragment,{children:[a===""&&e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-slate-700 dark:text-slate-300  text-base md:text-lg lg:text-xl tracking-wider",children:"Total"}),(a==="completed"||a==="")&&e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-emerald-700 dark:text-emerald-400  text-base md:text-lg lg:text-xl tracking-wider",children:"Completed"}),(a==="greater_than_50"||a==="")&&e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-blue-700 dark:text-blue-400  text-base md:text-lg lg:text-xl tracking-wider",children:"Above 50%"}),(a==="less_than_50"||a==="")&&e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-amber-700 dark:text-amber-400  text-base md:text-lg lg:text-xl tracking-wider",children:"Below 50%"}),(a==="zero"||a==="")&&e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-red-700 dark:text-red-400  text-base md:text-lg lg:text-xl tracking-wider",children:"Zero(0%)"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Shifts"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Blocks"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Rooms"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Assets"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Plants"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Trans."}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Fund"}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Proj."}),e.jsx("th",{className:"px-2 md:px-3 py-4 text-center font-semibold text-slate-600 dark:text-slate-400 uppercase text-base md:text-lg lg:text-xl tracking-wider",children:"Upg."}),e.jsx("th",{className:"px-3 md:px-4 py-4 text-center font-semibold text-slate-700 dark:text-slate-300 uppercase text-base md:text-lg lg:text-xl tracking-wider bg-slate-200/50 dark:bg-slate-700/50",children:"Score"})]})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,l)=>e.jsxs("tr",{className:`
                                                        ${l%2===0?"bg-white dark:bg-slate-900":"bg-slate-50/50 dark:bg-slate-800/30"}
                                                        hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors
                                                        ${m?"cursor-pointer":""}
                                                        border-b border-slate-100 dark:border-slate-800 last:border-0
                                                    `,onClick:()=>m?f(t.id,a):J(t.id),children:[e.jsx("td",{className:`px-4 md:px-6 py-4 font-semibold text-base md:text-lg lg:text-xl ${m?"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300":"text-slate-800 dark:text-slate-200"}`,children:m&&t.name.split(" ").pop()||t.name}),m?e.jsxs(e.Fragment,{children:[a===""&&e.jsx("td",{className:"px-3 md:px-4 py-4 text-center font-bold text-base md:text-lg lg:text-xl text-slate-700 dark:text-slate-300",children:t.total_institutes}),(a==="completed"||a==="")&&e.jsx("td",{className:"px-3 md:px-4 py-4 text-center",onClick:s=>{s.stopPropagation(),o("completed"),f(t.id,"completed")},children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-3 py-1.5 rounded-full text-sm md:text-base lg:text-lg font-bold bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-400",children:t.completed})}),(a==="greater_than_50"||a==="")&&e.jsx("td",{className:"px-3 md:px-4 py-4 text-center",onClick:s=>{s.stopPropagation(),o("greater_than_50"),f(t.id,"greater_than_50")},children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-3 py-1.5 rounded-full text-sm md:text-base lg:text-lg font-bold bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400",children:t.greater_than_50})}),(a==="less_than_50"||a==="")&&e.jsx("td",{className:"px-3 md:px-4 py-4 text-center",onClick:s=>{s.stopPropagation(),o("less_than_50"),f(t.id,"less_than_50")},children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-3 py-1.5 rounded-full text-sm md:text-base lg:text-lg font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-400",children:t.less_than_50})}),(a==="zero"||a==="")&&e.jsx("td",{className:"px-3 md:px-4 py-4 text-center",onClick:s=>{s.stopPropagation(),o("zero"),f(t.id,"zero")},children:e.jsx("span",{className:"inline-flex items-center justify-center min-w-[2.5rem] px-3 py-1.5 rounded-full text-sm md:text-base lg:text-lg font-bold bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-400",children:t.zero})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.shifts||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.blocks||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.rooms||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.assets||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.plants||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.transports||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.funds||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.projects||0}),e.jsx("td",{className:"px-2 md:px-3 py-4 text-center text-base md:text-lg lg:text-xl font-semibold text-slate-700 dark:text-slate-300",children:t.upgradations||0}),e.jsx("td",{className:"px-3 md:px-4 py-4 text-center bg-slate-50/50 dark:bg-slate-800/30",children:e.jsxs("span",{className:`
                                                                        inline-flex items-center justify-center min-w-[4rem] px-4 py-2 rounded-full text-base md:text-lg lg:text-xl font-bold cursor-pointer
                                                                        transition-all hover:scale-105 hover:shadow-md
                                                                        ${t.percentage===100?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-emerald-200 dark:shadow-emerald-900":t.percentage>=50?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-blue-200 dark:shadow-blue-900":t.percentage>0?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-amber-200 dark:shadow-amber-900":"bg-gradient-to-r from-red-500 to-rose-500 text-white shadow-red-200 dark:shadow-red-900"}
                                                                    `,onClick:s=>{s.stopPropagation(),M(t.id)},title:"Click to see breakdown",children:[t.percentage,"%"]})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:m?6:11,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“Š"})}),e.jsx("p",{className:"font-medium",children:"No details available"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]})})})})]})})]})]})]}),e.jsx(de,{open:Y,onOpenChange:_,children:e.jsxs(oe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ne,{children:[e.jsxs(ie,{className:"text-xl",children:["Completion Details: ",(c==null?void 0:c.institute)||"Loading..."]}),e.jsx(xe,{children:"Detailed breakdown of invalid or missing criteria."})]}),H?e.jsx("div",{className:"flex justify-center p-8",children:"Loading details..."}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Total Score"}),e.jsxs("span",{className:`text-2xl font-bold ${c.percentage===100?"text-green-600":c.percentage<10?"text-red-600":"text-yellow-600"}`,children:[c.percentage,"%"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50 text-muted-foreground uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Criteria"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Weight"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Message"})]})}),e.jsx("tbody",{className:"divide-y",children:c.criteria.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.name}),e.jsxs("td",{className:"px-4 py-3 text-right text-muted-foreground",children:[t.weight,"%"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:t.completed?e.jsx(he,{className:"w-5 h-5 text-green-500 mx-auto"}):e.jsx(E,{className:"w-5 h-5 text-red-500 mx-auto"})}),e.jsx("td",{className:`px-4 py-3 ${t.completed?"text-green-600":"text-red-600"}`,children:t.message})]},l))})]})}),c.percentage<100&&e.jsxs("div",{className:"text-sm text-muted-foreground bg-blue-50 p-3 rounded border border-blue-100 dark:bg-blue-900/20 dark:border-blue-900",children:["Note: Please address the items marked with ",e.jsx(E,{className:"w-3 h-3 inline text-red-500"})," to reach 100% completion."]})]}):e.jsx("div",{className:"text-center text-red-500",children:"Failed to load details."})]})})]})]})}export{Ee as default};
