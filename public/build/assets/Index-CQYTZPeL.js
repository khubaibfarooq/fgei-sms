import{r as l,S as d,j as e,L as b,$ as m}from"./app-D7vTiWYg.js";import{A as g,P as N,S as v,k as C,T as D,t as x}from"./app-layout-CJCWafVk.js";import{B as o}from"./button-D7NR5--N.js";import{C as y,a as S,b as A,c as w}from"./card-CLZVnraq.js";import{I as T}from"./input-VFHDyrVj.js";import{C as E}from"./combobox-DcO5evJN.js";import{A as k,a as L,b as R,c as B,d as $,e as z,f as F,g as H,h as I}from"./alert-dialog-LAF3oHhn.js";import{B as M}from"./badge-BkFmgS0b.js";import"./index-DF92143B.js";import"./createLucideIcon-CGJzkMuG.js";import"./index-565G4VTN.js";import"./app-logo-icon-BdWMenMf.js";import"./folder-root-EyJAJSwX.js";import"./grip-vertical-CXVl6dph.js";import"./popover-DtIg4hjT.js";const P=[{title:"Dashboard Cards",href:"/dashboardcards"}];function re({dashboardCards:t,roles:n,filters:c}){const[a,h]=l.useState(c.search||""),[i,p]=l.useState(c.role||"");l.useEffect(()=>{const s=setTimeout(()=>{d.get("/dashboardcards",{search:a,role:i},{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(s)},[a,i]);const u=l.useMemo(()=>{const s=n.map(r=>({id:r.id.toString(),name:r.name}));return[{id:"",name:"All Roles"},...s]},[n]),j=s=>{s.key==="Enter"&&d.get("/dashboardcards",{search:a},{preserveState:!0,preserveScroll:!0})},f=s=>{d.delete(`/dashboardcards/${s}`,{onSuccess:()=>x.success("Dashboard Card deleted successfully"),onError:()=>x.error("Failed to delete Dashboard Card")})};return e.jsxs(g,{breadcrumbs:P,children:[e.jsx(b,{title:"Dashboard Cards"}),e.jsx("div",{className:"flex-1 p-2 md:p-3",children:e.jsxs(y,{children:[e.jsxs(S,{className:"pb-3 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{className:"text-2xl font-bold",children:"Dashboard Cards"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage Dashboard Cards & Role Access"})]}),e.jsx(m,{href:"/dashboardcards/create",children:e.jsxs(o,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Add New Card"]})})]}),e.jsx(v,{}),e.jsxs(w,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx(T,{type:"text",placeholder:"Search cards by title... (press Enter)",value:a,onChange:s=>h(s.target.value),onKeyDown:j}),e.jsx(E,{entity:"roles",placeholder:"Filter by role...",value:i,onChange:s=>p(s),options:u})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-white",children:[e.jsx("th",{className:"border p-3 text-left font-medium",children:"Title"}),e.jsx("th",{className:"border p-3 text-left font-medium",children:"Visible to Roles"}),e.jsx("th",{className:"border p-3 text-left font-medium",children:"Link"}),e.jsx("th",{className:"border p-3 text-left font-medium",children:"Redirect Link"}),e.jsx("th",{className:"border p-3 text-left font-medium",children:"order"}),e.jsx("th",{className:"border p-3 text-left font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No dashboard cards found."})}):t.data.map(s=>e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"border p-3 font-medium",children:s.title}),e.jsx("td",{className:"border p-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles&&s.roles.length>0?s.roles.map(r=>e.jsx(M,{variant:"secondary",children:r.name},r.id)):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No roles assigned"})})}),e.jsx("td",{className:"border p-3",children:e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.link})}),e.jsx("td",{className:"border p-3",children:e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:s.redirectlink})}),e.jsx("td",{className:"border p-3",children:s.order}),e.jsx("td",{className:"border p-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(m,{href:`/dashboardcards/${s.id}/edit`,children:e.jsx(o,{variant:"ghost",size:"icon",title:"Edit",children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(L,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"text-destructive hover:text-red-600",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsxs(R,{children:[e.jsxs(B,{children:[e.jsx($,{children:"Delete Dashboard Card?"}),e.jsxs(z,{children:["This will permanently delete ",e.jsx("strong",{children:s.title}),". This action cannot be undone."]})]}),e.jsxs(F,{children:[e.jsx(H,{children:"Cancel"}),e.jsx(I,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>f(s.id),children:"Delete"})]})]})]})]})})]},s.id))})]})}),t.links.length>3&&e.jsx("div",{className:"flex justify-center pt-6 flex-wrap gap-2",children:t.links.map((s,r)=>e.jsx(o,{disabled:!s.url,variant:s.active?"default":"outline",size:"sm",onClick:()=>s.url&&d.visit(s.url,{preserveScroll:!0}),children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},r))})]})]})})]})}export{re as default};
