import{m as h,r as f,R as E,j as e,L as _,$ as A,S as g}from"./app-CknFJOcO.js";import{A as D,S as L,c as w,d as F}from"./app-layout-y5ak4A3o.js";import{B as a}from"./button-BV2vwN6B.js";import{C as I,a as R,b as $,c as B}from"./card-DFM6opku.js";import{I as u}from"./input-DtBR5Sl8.js";import{L as p}from"./label-BZDXEByG.js";import{I as M}from"./icon-picker-BRxG8MA1.js";import{M as d}from"./MultiSelect-DsNO-OMx.js";import"./index-BjWG1ZKm.js";import"./createLucideIcon-CitoHvHh.js";import"./index-CswnciTi.js";import"./app-logo-icon-OmQUrWrH.js";import"./folder-root-CPFymLTU.js";import"./grip-vertical-BZ3KeRO3.js";import"./popover-kvTdByB-.js";import"./dialog-CYJyswEb.js";import"./index-CHPyQHb-.js";import"./index-BXfe4d2B.js";function ee({dashboardCard:t,roles:o}){const r=!!t;console.log(t);const{data:c,setData:n,processing:v,errors:i,reset:N}=h({id:(t==null?void 0:t.id)||"",title:(t==null?void 0:t.title)||"",link:(t==null?void 0:t.link)||"",color:(t==null?void 0:t.color)||"",icon:(t==null?void 0:t.icon)||"",role_id:(t==null?void 0:t.role_id)||"",redirectlink:(t==null?void 0:t.redirectlink)||""});f.useEffect(()=>{n(t?l=>({...l,title:t.title??"",link:t.link??"",color:t.color??"",icon:t.icon??"",role_id:t.role_id??"",redirectlink:t.redirectlink??""}):l=>({...l,title:"",link:"",color:"",icon:"",role_id:"",redirectlink:""}))},[t,n]);const S=l=>{l.preventDefault();const s={id:c.id,title:c.title,link:c.link,color:c.color,icon:c.icon,role_id:m.join(","),redirectlink:c.redirectlink};r?g.put(`/dashboardcards/${t==null?void 0:t.id}`,s,{preserveScroll:!0,preserveState:!0,onError:x=>console.log(x)}):g.post("/dashboardcards",s,{onSuccess:()=>N(),onError:x=>console.log(x)})},y=[{title:"Dashboard Cards",href:"/dashboardcards"},{title:r?"Edit Dashboard Card":"Add Dashboard Card",href:"#"}],k=E.useMemo(()=>o?Array.isArray(o)?o.map(l=>({value:l.id.toString(),label:l.name})):Object.entries(o).map(([l,s])=>({value:l,label:s})):[],[o]),[m,j]=f.useState([]);return f.useEffect(()=>{if(t!=null&&t.role_id){const l=t.role_id.split(",").map(s=>s.trim()).filter(s=>s!==""&&s!==null&&s!==void 0);j(l)}else j([])},[t]),e.jsxs(D,{breadcrumbs:y,children:[e.jsx(_,{title:r?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx($,{className:"text-2xl font-bold",children:r?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Update card details":"Create a new dashboard card"})]}),e.jsx(L,{}),e.jsx(B,{className:"pt-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Title"}),e.jsx(u,{id:"title",value:c.title,onChange:l=>n("title",l.target.value),placeholder:"Enter card title"}),i.title&&e.jsx("p",{className:"text-red-500 text-sm",children:i.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"link",children:"Link"}),e.jsx(u,{id:"link",value:c.link,onChange:l=>n("link",l.target.value),placeholder:"Enter card link"}),i.link&&e.jsx("p",{className:"text-red-500 text-sm",children:i.link})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{options:k,value:m,onChange:j,placeholder:"Choose roles ...",label:"Select Roles"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:m.length>0?`${m.length} role  selected: ${m.map(l=>{const s=k.find(x=>x.value===l);return s?s.label:l}).join(", ")}`:"No Role  selected"}),i.role_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.role_id}),i.role_id&&e.jsx("p",{className:"text-red-500 text-sm",children:i.role_id}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"icon",children:"Icon"}),e.jsx(M,{value:c.icon,onChange:l=>n("icon",l)}),i.icon&&e.jsx("p",{className:"text-sm text-red-500",children:i.icon})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"color",children:"Color"}),e.jsx(u,{type:"color",id:"color",value:c.color,onChange:l=>n("color",l.target.value)}),i.color&&e.jsx("p",{className:"text-red-500 text-sm",children:i.color}),e.jsx(p,{htmlFor:"redirectlink",children:"Redirect Link"}),e.jsx(u,{id:"redirectlink",value:c.redirectlink,onChange:l=>n("redirectlink",l.target.value)}),i.redirectlink&&e.jsx("p",{className:"text-red-500 text-sm",children:i.redirectlink})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(A,{href:"/dashboardcards",children:e.jsxs(a,{type:"button",variant:"secondary",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(a,{type:"submit",disabled:v,children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),v?r?"Saving...":"Adding...":r?"Save Changes":"Add Card"]})]})]})})]})})]})}export{ee as default};
