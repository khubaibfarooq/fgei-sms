import{R as S,r as c,m as g,j as e,L as _,$ as B,S as h}from"./app-s9Ys-83B.js";import{A as N,S as E,a as I,d as A}from"./app-layout-Dl5b17fo.js";import{B as f}from"./button-C1aQrSo0.js";import{C,a as w,b as L,c as b}from"./card-CWhiPpln.js";import{I as $}from"./input-8QWDJaP5.js";import{L as R}from"./label-ubJYFkuD.js";import{M as D}from"./MultiSelect-f534vk4L.js";import"./index-BFx4lFZR.js";import"./createLucideIcon-D7VEPPZz.js";import"./index-D1WageoA.js";import"./app-logo-icon-yJBK5FVr.js";import"./folder-root-ysFkiTf2.js";import"./grip-vertical-DscpApal.js";import"./index-CypYHFnI.js";import"./index-bsZ39Q3Z.js";function X({blockType:r,roomTypes:l}){const a=!!r,p=S.useMemo(()=>l?Array.isArray(l)?l.map(s=>({value:s.id.toString(),label:s.name})):Object.entries(l).map(([s,t])=>({value:s,label:t})):[],[l]),[o,d]=c.useState([]);c.useEffect(()=>{if(r!=null&&r.room_type_Ids){const s=r.room_type_Ids.split(",").map(t=>t.trim()).filter(t=>t!==""&&t!==null&&t!==void 0);console.log("Parsed room_type_Ids:",s),d(s)}else d([])},[r]);const{data:u,setData:i,processing:x,errors:n,reset:j}=g({name:(r==null?void 0:r.name)||"",room_type_Ids:(r==null?void 0:r.room_type_Ids)||""});c.useEffect(()=>{const s=o.join(",");i("room_type_Ids",s)},[o,i]);const y=s=>{s.preventDefault();const t={name:u.name,room_type_Ids:o.join(",")};console.log("Submitting data:",t),a?h.put(`/block-types/${r.id}`,t,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{console.log("Block type updated successfully")},onError:m=>{console.log("Errors:",m)}}):h.post("/block-types",t,{onSuccess:()=>{j()},onError:m=>{console.log("Errors:",m)}})},v=[{title:"Block Types",href:"/block-types"},{title:a?"Edit Block Type":"Add Block Type",href:"#"}];return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(_,{title:a?"Edit Block Type":"Add Block Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(L,{className:"text-2xl font-bold",children:a?"Edit Block Type":"Add Block Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Edit Block type details":"Create a new Block type"})]}),e.jsx(E,{}),e.jsx(b,{className:"pt-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"name",children:"Block Type Name"}),e.jsx($,{id:"name",value:u.name,onChange:s=>i("name",s.target.value),placeholder:"Enter Block type name",className:n.name?"border-red-500":""}),n.name&&e.jsx("p",{className:"text-sm text-red-500",children:n.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{options:p,value:o,onChange:d,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0?`${o.length} room type(s) selected: ${o.map(s=>{const t=p.find(m=>m.value===s);return t?t.label:s}).join(", ")}`:"No room types selected"}),n.room_type_Ids&&e.jsx("p",{className:"text-sm text-red-500",children:n.room_type_Ids})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(B,{href:"/block-types",children:e.jsxs(f,{type:"button",variant:"secondary",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(f,{type:"submit",disabled:x,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),x?a?"Saving...":"Adding...":a?"Save Changes":"Add Block Type"]})]})]})})]})})]})}export{X as default};
