import{m as _,j as e,L as t,$ as N,S as g}from"./app-QprhJZ06.js";import{A as i,S as b,a as y,f as w}from"./app-layout-B9K3_aGt.js";import{B as j}from"./button-CpTWwzUI.js";import{C,a as u,b as S,c as I}from"./card-DnJ_cVzm.js";import{I as c}from"./input-rz8FXf4X.js";import{L as p}from"./label-DjAncwwd.js";import"./index-BDp_ksdu.js";import"./createLucideIcon-CkYmE4Et.js";import"./index-DaR4Iucw.js";import"./index-CP_ej-uK.js";import"./index-6kIsNT08.js";import"./index-cToYmfdw.js";import"./index-C9TLFy3Y.js";import"./app-logo-icon-jy-42en1.js";import"./circle-x-Y8nGU1IC.js";import"./clsx-B-dksMZM.js";import"./folder-root-BmeYBaiz.js";import"./grip-vertical-B4qo9ZqK.js";function J({institute:a}){const x=!!a,{data:o,setData:m,processing:h,errors:l,setError:n}=_({name:(a==null?void 0:a.name)||"",established_date:(a==null?void 0:a.established_date)||"",total_area:(a==null?void 0:a.total_area)||0,convered_area:(a==null?void 0:a.convered_area)||0,img_layout:(a==null?void 0:a.img_layout)||"",img_3d:(a==null?void 0:a.img_3d)||"",video:(a==null?void 0:a.video)||"",gender:(a==null?void 0:a.gender)||"",address:(a==null?void 0:a.address)||"",phone:(a==null?void 0:a.phone)||"",email:(a==null?void 0:a.email)||""}),f=d=>{d.preventDefault();const s=new FormData;Object.keys(o).forEach(r=>{if(!(o[r]===null||o[r]==="")){if(r==="img_layout"||r==="img_3d"||r==="video"){o[r]instanceof File&&s.append(r,o[r]);return}if(r==="total_area"||r==="convered_area"){s.append(r,o[r].toString());return}s.append(r,o[r])}}),x?(s.append("_method","PUT"),g.post(`/institutes/${a.id}`,s,{forceFormData:!0,preserveScroll:!0,preserveState:!0,onError:r=>{n(r)}})):g.post("institutes",s,{forceFormData:!0,onError:r=>{n(r)}})},v=[{title:"Institute",href:"/institute"},{title:x?"Edit Institute":"Add Institute",href:"#"}];return e.jsxs(i,{breadcrumbs:v,children:[e.jsx(t,{title:x?"Update Institute":"Add Institute"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full max-w-5xl mx-auto",children:e.jsxs(C,{children:[e.jsx(u,{children:e.jsx(S,{className:"text-2xl font-bold text-center",children:o.name})}),e.jsx(b,{}),e.jsx(I,{className:"pt-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"established_date",children:"Established Date"}),e.jsx(c,{id:"established_date",type:"date",value:o.established_date,onChange:d=>m("established_date",d.target.value)}),l.established_date&&e.jsx("p",{className:"text-red-500 text-sm",children:l.established_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"total_area",children:"Total Area (sq ft)"}),e.jsx(c,{id:"total_area",type:"number",value:o.total_area,onChange:d=>m("total_area",Number(d.target.value))}),l.total_area&&e.jsx("p",{className:"text-red-500 text-sm",children:l.total_area})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),e.jsx(c,{id:"convered_area",type:"number",value:o.convered_area,onChange:d=>m("convered_area",Number(d.target.value))}),l.convered_area&&e.jsx("p",{className:"text-red-500 text-sm",children:l.convered_area})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Layout Image"}),a!=null&&a.img_layout?e.jsx("img",{src:`/assets/${a.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),e.jsx(c,{id:"img_layout",type:"file",accept:"image/*",onChange:d=>{var s;return m("img_layout",((s=d.target.files)==null?void 0:s[0])||null)}}),l.img_layout&&e.jsx("p",{className:"text-red-500 text-sm",children:l.img_layout})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Front View Image"}),a!=null&&a.img_3d?e.jsx("img",{src:`/assets/${a.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),e.jsx(c,{id:"img_3d",type:"file",accept:"image/*",onChange:d=>{var s;return m("img_3d",((s=d.target.files)==null?void 0:s[0])||null)}}),l.img_3d&&e.jsx("p",{className:"text-red-500 text-sm",children:l.img_3d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Video"}),a!=null&&a.video?e.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[e.jsx("source",{src:`/assets/${a.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),e.jsx(c,{id:"video",type:"file",accept:"video/*",onChange:d=>{var s;return m("video",((s=d.target.files)==null?void 0:s[0])||null)}}),l.video&&e.jsx("p",{className:"text-red-500 text-sm",children:l.video})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-2",children:[e.jsx(N,{href:"/institute",className:"w-full sm:w-auto",children:e.jsxs(j,{type:"button",variant:"secondary",className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(j,{type:"submit",disabled:h,className:"w-full sm:w-auto",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),h?x?"Saving...":"Adding...":x?"Save Changes":"Save Institute"]})]})]})})]})})]})}export{J as default};
