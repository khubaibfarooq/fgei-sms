import{m as n,j as a,L as f,S as g}from"./app-CsRabZIE.js";import{A as _,S as b,d as N}from"./app-layout-AmNCWhto.js";import{B as C}from"./button-DKUJQQbh.js";import{C as y,a as S,b as I,c as w}from"./card-hbcu5ndH.js";import{I as m}from"./input-Bg9HEyWP.js";import{L as c}from"./label-IfYTpMxi.js";import"./index-DB1ngrAf.js";import"./createLucideIcon-D1E5yMEV.js";import"./index-DPeRmpZB.js";import"./app-logo-icon-mJQ_HioP.js";import"./folder-root-UxgFfGbj.js";import"./grip-vertical-DQLhSE1M.js";function U({institute:e}){const p=!!e,{data:o,setData:s,processing:h,errors:x}=n({name:(e==null?void 0:e.name)||"",established_date:(e==null?void 0:e.established_date)||"",total_area:(e==null?void 0:e.total_area)||0,convered_area:(e==null?void 0:e.convered_area)||0,img_layout:(e==null?void 0:e.img_layout)||"",img_3d:(e==null?void 0:e.img_3d)||"",video:(e==null?void 0:e.video)||"",gender:(e==null?void 0:e.gender)||"",address:(e==null?void 0:e.address)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""}),j=l=>{l.preventDefault();const r=new FormData;Object.keys(o).forEach(d=>{if(!(o[d]===null||o[d]==="")){if(d==="img_layout"||d==="img_3d"||d==="video"){o[d]instanceof File&&r.append(d,o[d]);return}if(d==="total_area"||d==="convered_area"){r.append(d,o[d].toString());return}r.append(d,o[d])}}),p?(r.append("_method","PUT"),g.post(`/institutes/${e.id}`,r,{forceFormData:!0,preserveScroll:!0,preserveState:!0})):g.post("institutes",r,{forceFormData:!0})},v=[{title:"Institute",href:"/institute"},{title:p?"Edit Institute":"Add Institute",href:"#"}];return a.jsxs(_,{breadcrumbs:v,children:[a.jsx(f,{title:p?"Update Institute":"Add Institute"}),a.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:a.jsxs(y,{children:[a.jsx(S,{children:a.jsx(I,{className:"text-2xl font-bold text-center",children:o.name})}),a.jsx(b,{}),a.jsx(w,{className:"pt-6",children:a.jsxs("form",{onSubmit:j,className:"space-y-6",encType:"multipart/form-data",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{htmlFor:"established_date",children:"Established Date"}),a.jsx(m,{id:"established_date",type:"date",value:o.established_date,onChange:l=>s("established_date",l.target.value),required:!0}),x.established_date&&a.jsx("p",{className:"text-red-500 text-sm",children:x.established_date})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{htmlFor:"total_area",children:"Total Area (sq ft)"}),a.jsx(m,{id:"total_area",type:"number",value:o.total_area,onChange:l=>s("total_area",Number(l.target.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),a.jsx(m,{id:"convered_area",type:"number",value:o.convered_area,onChange:l=>s("convered_area",Number(l.target.value))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{children:"Current Layout Image"}),e!=null&&e.img_layout?a.jsx("img",{src:`/assets/${e.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),a.jsx(m,{id:"img_layout",type:"file",accept:"image/*",onChange:l=>{var r;return s("img_layout",((r=l.target.files)==null?void 0:r[0])||null)}})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{children:"Current Front View Image"}),e!=null&&e.img_3d?a.jsx("img",{src:`/assets/${e.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),a.jsx(m,{id:"img_3d",type:"file",accept:"image/*",onChange:l=>{var r;return s("img_3d",((r=l.target.files)==null?void 0:r[0])||null)}})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(c,{children:"Current Video"}),e!=null&&e.video?a.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[a.jsx("source",{src:`/assets/${e.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),a.jsx(m,{id:"video",type:"file",accept:"video/*",onChange:l=>{var r;return s("video",((r=l.target.files)==null?void 0:r[0])||null)}})]})]}),a.jsx("div",{className:"flex items-center justify-between pt-2",children:a.jsxs(C,{type:"submit",disabled:h,children:[a.jsx(N,{className:"mr-2 h-4 w-4"}),h?p?"Saving...":"Adding...":p?"Save Changes":"Save Institute"]})})]})})]})})]})}export{U as default};
