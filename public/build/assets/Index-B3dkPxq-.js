import{j as e,L as n,S as o}from"./app-MbseafNW.js";import{A as d,S as m}from"./app-layout-C-z4v-3r.js";import{B as i}from"./button-CW94j1ZN.js";import{C as p,a as u,b as x,c as h}from"./card-BjiSh9rK.js";import{t as a}from"./index-CoHqxKof.js";import{A as j,a as f,b as g,c as B,d as b,f as k,g as v,h as D}from"./alert-dialog-DM86YYbG.js";import"./index-DgnBVFfL.js";import"./createLucideIcon-bprR9CTr.js";import"./index-B1nl_7VU.js";import"./index-BxXlNLtQ.js";import"./index-Db17Cc0h.js";import"./index-CJiVLrhd.js";import"./input-BC1Nmb3o.js";import"./app-logo-icon-TIuLmAHm.js";import"./circle-x-bPyv4ZZW.js";import"./clsx-B-dksMZM.js";import"./folder-root-8Q9Y8Dkp.js";import"./grip-vertical-BdUKDTBl.js";const C=[{title:"Backup",href:"/backup"}];function J({backups:s}){const l=()=>{o.post("/backup/run",{},{onSuccess:()=>a.success("Backup created successfully"),onError:()=>a.error("Failed to create backup"),preserveScroll:!0})},t=r=>{o.delete(`/backup/delete/${r}`,{onSuccess:()=>a.success("Backup deleted successfully"),onError:()=>a.error("Failed to delete backup"),preserveScroll:!0})};return e.jsxs(d,{title:"Backup",breadcrumbs:C,children:[e.jsx(n,{title:"Backup"}),e.jsx("div",{className:"p-4 md:p-6 space-y-4",children:e.jsxs(p,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-2xl font-bold",children:"Database Backups"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Manage system backup files"})]}),e.jsx(i,{onClick:l,children:"Create Backup"})]}),e.jsx(m,{}),e.jsx(h,{className:"pt-4 space-y-4",children:s.length===0?e.jsx("p",{className:"text-muted-foreground text-center",children:"No backups available."}):e.jsx("ul",{className:"space-y-2",children:s.map((r,c)=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-3 bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[N(r.size)," â€¢"," ",new Date(r.last_modified*1e3).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:r.download_url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(i,{variant:"outline",size:"sm",children:"Download"})}),e.jsxs(j,{children:[e.jsx(f,{asChild:!0,children:e.jsx(i,{variant:"destructive",size:"sm",children:"Delete"})}),e.jsxs(g,{children:[e.jsx(B,{children:e.jsx(b,{children:"Delete this backup?"})}),e.jsxs(k,{children:[e.jsx(v,{children:"Cancel"}),e.jsx(D,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>t(r.name),children:"Delete"})]})]})]})]})]},c))})})]})})]})}function N(s){const l=["Bytes","KB","MB","GB"];if(s===0)return"0 Byte";const t=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,t)).toFixed(2)} ${l[t]}`}export{J as default};
