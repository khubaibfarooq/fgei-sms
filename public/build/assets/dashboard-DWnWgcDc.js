import{K as C,r as c,j as t,L as S,S as L,a as $}from"./app-CS-pVSH3.js";import{A as D}from"./app-layout-CBThMk13.js";import{C as b,c as f,a as T,b as F}from"./card-D_XrG5rw.js";import"./button-CaUuR6WF.js";import"./index-BC98DUOz.js";import"./createLucideIcon-6K_5nfl6.js";import"./input-ByUibOQR.js";import"./index-OlNZjlNQ.js";import"./app-logo-icon-emW1COi8.js";import"./folder-root-CIOtW4zj.js";import"./grip-vertical-C9izefko.js";const K=[{title:"Dashboard",href:"/dashboard"}],y=[{label:"Users",value:420,color:"#3b82f6",redirectlink:""},{label:"Backups",value:80,color:"#10b981",redirectlink:""},{label:"Activity Logs",value:1570,color:"#f59e0b",redirectlink:""}],k=[{bg:"from-blue-50 to-blue-100",border:"border-blue-200",header:"bg-blue-500",text:"text-blue-800",accent:"bg-blue-200/50"},{bg:"from-green-50 to-green-100",border:"border-green-200",header:"bg-green-500",text:"text-green-800",accent:"bg-green-200/50"},{bg:"from-amber-50 to-amber-100",border:"border-amber-200",header:"bg-amber-500",text:"text-amber-800",accent:"bg-amber-200/50"}],A=e=>e.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),u=e=>!e||e.length===0?[]:Object.keys(e[0]),E=(e,l)=>{if(e==null)return"-";if(typeof e=="number")return e.toLocaleString();if(typeof e=="string"){if(["balance","cost","amount","price","value","total_cost","total_amount"].some(i=>l==null?void 0:l.toLowerCase().includes(i))){const i=parseFloat(e);if(!isNaN(i))return`${i.toLocaleString()}`}return e}return String(e)};function Q(){const{props:e}=C();e.auth.user;const l=e.cards||[],[h,g]=c.useState(y),[i,x]=c.useState(!1),[M,B]=c.useState({}),[d,p]=c.useState({0:5,1:5,2:5}),j=[{title:e.title1||"Funds",data:e.tab1||[],columns:u(e.tab1||[]),link:e.link1||""},{title:e.title2||"Tab2",data:e.tab2||[],columns:u(e.tab2||[]),link:e.link2||""},{title:e.title3||"Tab3",data:e.tab3||[],columns:u(e.tab3||[]),link:e.link3||""}];c.useEffect(()=>{if(l.length===0)return;(async()=>{x(!0);try{const a=l.map(async s=>{try{const n=await $.get(s.link);return{label:s.title,value:n.data.count||0,color:s.color,redirectlink:s.redirectlink}}catch(n){return console.error(`Failed to fetch count for ${s.title}:`,n),{label:s.title,value:0,color:s.color,redirectlink:s.redirectlink}}}),o=await Promise.all(a);g(o)}catch(a){console.error("Failed to fetch summary data:",a)}finally{x(!1)}})()},[l]);const N=r=>{p(a=>({...a,[r]:(a[r]||5)+5}))},v=r=>{p(a=>({...a,[r]:Math.max(5,(a[r]||5)-5)}))};return t.jsxs(D,{breadcrumbs:K,children:[t.jsx(S,{title:"Dashboard"}),t.jsxs("div",{className:"flex flex-col gap-6 p-5",children:[t.jsx("div",{className:"relative px-8 py-6 text-center",children:t.jsx(b,{className:"inline-block bg-primary/95 backdrop-blur-sm shadow-2xl border-0 max-w-3xl mx-auto mb-2 p-5",style:{borderBottom:"6px solid rgba(0,0,255,0.7)"},children:t.jsx(f,{className:"pt-5 px-10",children:t.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-white",children:"School Management System"})})})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:(i?y:h).map((r,a)=>{const o=l[a],s=(o==null?void 0:o.icon)||["Users","HardDrive","LogIcon"][a%3];return t.jsx(b,{redirectLink:r.redirectlink,number:i?"...":r.value,title:r.label,icon:s,iconBgColor:r.color,changeColorOnHover:!0,className:"shadow-lg p-5 hover:scale-110 hover:-translate-y-2 transition-all duration-300 ease-in-out active:scale-95"},a)})}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:j.map((r,a)=>{const o=k[a%k.length];return t.jsxs(b,{className:`bg-gradient-to-br ${o.bg} ${o.border} shadow-lg rounded-xl overflow-hidden dark:bg-gray-800 dark:border-gray-700`,children:[t.jsx(T,{className:`${o.header} text-white px-6 py-4 dark:bg-gray-700`,children:t.jsxs(F,{className:"text-lg font-semibold flex items-center",children:[t.jsx("span",{className:"w-3 h-3 bg-white rounded-full mr-2"}),r.title]})}),t.jsx(f,{className:"p-0",children:r.data.length>0?t.jsxs("div",{className:"overflow-x-auto px-4 py-3",children:[t.jsx("div",{className:"shadow-sm rounded-md overflow-hidden",children:t.jsxs("table",{className:"w-full table-fixed",children:[t.jsx("thead",{className:`${o.accent} dark:bg-gray-600`,children:t.jsx("tr",{children:r.columns.map((s,n)=>s!=="Key"&&t.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium dark:text-gray-200",style:{color:o.header.replace("bg-","text-")+"900"},children:A(s)},n))})}),t.jsx("tbody",{children:r.data.slice(0,d[a]||5).map((s,n)=>t.jsx("tr",{onClick:()=>{s.Key&&r.link&&L.visit(`${r.link}${s.Key}`)},className:`border-b ${r.link?"cursor-pointer":""} ${o.border}/30 transition-all hover:opacity-95 hover:shadow-md
                          ${n%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700"}`,children:r.columns.map((m,w)=>m!=="Key"&&t.jsx("td",{className:`py-3 px-4 text-sm md:text-lg ${o.text}`,children:E(s[m],m)},w))},n))})]})}),r.data.length>5&&t.jsxs("div",{className:"p-4 text-center border-t border-gray-200 bg-gray-50 flex gap-2 justify-center",children:[(d[a]||5)<r.data.length&&t.jsxs("button",{type:"button",onClick:()=>N(a),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md border border-transparent bg-blue-500 text-white shadow-sm hover:bg-blue-600 focus:outline-none transition-colors",children:["Show More (",r.data.length-(d[a]||5)," remaining)"]}),(d[a]||5)>5&&t.jsx("button",{type:"button",onClick:()=>v(a),className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md border border-transparent bg-gray-400 text-white shadow-sm hover:bg-gray-500 focus:outline-none transition-colors",children:"Show Less"})]})]}):t.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No data available"})})]},a)})})]})]})}export{Q as default};
