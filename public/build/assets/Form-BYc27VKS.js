import{R as _,m as g,j as e,L as v,$ as b,S as c}from"./app-C70V3JXl.js";import{A as y,S as F,b as N,c as A}from"./app-layout-D-htm0HV.js";import{B as p}from"./button-DF8IPEAh.js";import{C as f,a as w,b as C,c as D}from"./card-OZtg9Wt2.js";import{I as u}from"./index-CMhXQs_h.js";import{L as l}from"./label-BoxxamlT.js";import{S as E,a as I,b as L,c as T,d as B}from"./select-CwYOPgG2.js";import"./index-CGBwUOvb.js";import"./createLucideIcon-EWwcaFQW.js";import"./index-DjVmzF0h.js";import"./app-logo-icon-Dl9iAMIN.js";import"./index-a8dk6Mx8.js";import"./index-BRWJbEQs.js";function U({fund:t,fundHeads:r}){const s=!!t,h=_.useMemo(()=>r?Array.isArray(r)?r:Object.entries(r).map(([a,i])=>({id:parseInt(a),name:i})):[],[r]),{data:d,setData:n,processing:o,errors:m,reset:x}=g({amount:(t==null?void 0:t.amount)||0,institute_id:(t==null?void 0:t.institute_id)||0,fund_head_id:(t==null?void 0:t.fund_head_id)||0,added_date:t!=null&&t.added_date?new Date(t.added_date):new Date}),j=a=>{a.preventDefault();const i={...d,added_date:d.added_date?d.added_date.toISOString().split("T")[0]:null};s?c.put(`/funds/${t.id}`,i,{preserveScroll:!0,preserveState:!0}):c.post("/funds",i,{onSuccess:()=>{x()}})},S=[{title:"Funds",href:"/funds"},{title:s?"Edit Fund":"Add Fund",href:"#"}];return e.jsxs(y,{breadcrumbs:S,children:[e.jsx(v,{title:s?"Edit Fund":"Add Fund"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(f,{children:[e.jsxs(w,{children:[e.jsx(C,{className:"text-2xl font-bold",children:s?"Edit Fund":"Add Fund"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Edit fund details":"Create a new fund"})]}),e.jsx(F,{}),e.jsx(D,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"amount",children:"Amount"}),e.jsx(u,{id:"amount",type:"number",value:d.amount,onChange:a=>n("amount",Number(a.target.value)),placeholder:"Enter Amount"}),e.jsx(l,{htmlFor:"added_date",children:"Date"}),e.jsx(u,{id:"added_date",type:"date",value:d.added_date?d.added_date.toISOString().split("T")[0]:"",onChange:a=>n("added_date",a.target.value?new Date(a.target.value):null),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),m.added_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.added_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"fund_head_id",children:"Fund Type"}),e.jsxs(E,{value:d.fund_head_id.toString(),onValueChange:a=>n("fund_head_id",parseInt(a)),children:[e.jsx(I,{children:e.jsx(L,{placeholder:"Select fund type"})}),e.jsx(T,{children:h.map(a=>e.jsx(B,{value:a.id.toString(),children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(b,{href:"/funds",children:e.jsxs(p,{type:"button",variant:"secondary",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(p,{type:"submit",disabled:o,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),o?s?"Saving...":"Adding...":s?"Save Changes":"Add Fund"]})]})]})})]})})]})}export{U as default};
