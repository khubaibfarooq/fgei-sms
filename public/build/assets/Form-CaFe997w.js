import{b,r as d,m as g,j as e,L as y,$ as N,S as x}from"./app-Ckd00XjB.js";import{A as R,S as A,a as C,d as E}from"./app-layout-Dp-QZCwA.js";import{B as f}from"./button-DN_423EJ.js";import{C as w,a as _,b as L,c as $}from"./card-Bfsm_5HH.js";import{I as B}from"./input-DREULnrk.js";import{L as M}from"./label-DEtFFioE.js";import{M as D}from"./MultiSelect-BpvuefrT.js";import"./index-C3MGCd83.js";import"./createLucideIcon-CImEr1Cq.js";import"./index-CN9Vo_2d.js";import"./index-BQq7n3OH.js";import"./index-Cr4Z16Jw.js";import"./app-logo-icon-PGaPTxAU.js";import"./folder-root-BQwvl7Sg.js";import"./grip-vertical--mq8m-37.js";import"./index-CdgcWHLa.js";import"./index-DqfOopd4.js";function Z({roomType:t,assets:o}){const r=!!t;console.log(t);const c=b.useMemo(()=>o?Array.isArray(o)?o.map(s=>({value:s.id.toString(),label:s.name})):Object.entries(o).map(([s,a])=>({value:s,label:a})):[],[o]),[i,l]=d.useState([]);d.useEffect(()=>{if(t!=null&&t.assets_id){const s=t.assets_id.split(",").map(a=>a.trim()).filter(a=>a!==""&&a!==null&&a!==void 0);l(s)}else l([])},[t]);const{data:n,setData:m,processing:p,errors:u,reset:h}=g({name:(t==null?void 0:t.name)||"",assets_id:(t==null?void 0:t.assets_id)||""});d.useEffect(()=>{const s=i.join(",");m("assets_id",s)},[i,m]);const j=s=>{s.preventDefault(),r?x.put(`/room-types/${t.id}`,n,{preserveScroll:!0,preserveState:!0}):x.post("/room-types",n,{onSuccess:()=>{h()}})},v=[{title:"Room Types",href:"/room-types"},{title:r?"Edit Room Type":"Add Room Type",href:"#"}];return e.jsxs(R,{breadcrumbs:v,children:[e.jsx(y,{title:r?"Edit Room Type":"Add Room Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(w,{children:[e.jsxs(_,{children:[e.jsx(L,{className:"text-2xl font-bold",children:r?"Edit Room Type":"Add Room Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit room type details":"Create a new room type"})]}),e.jsx(A,{}),e.jsx($,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"name",children:"Room Type Name"}),e.jsx(B,{id:"name",value:n.name,onChange:s=>m("name",s.target.value),placeholder:"Enter room type name"}),e.jsx(D,{options:c,value:i,onChange:l,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.length>0?`${i.length} room type(s) selected: ${i.map(s=>{const a=c.find(S=>S.value===s);return a?a.label:s}).join(", ")}`:"No room types selected"}),u.assets_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.assets_id})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(N,{href:"/room-types",children:e.jsxs(f,{type:"button",variant:"secondary",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(f,{type:"submit",disabled:p,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),p?r?"Saving...":"Adding...":r?"Save Changes":"Add Room Type"]})]})]})})]})})]})}export{Z as default};
