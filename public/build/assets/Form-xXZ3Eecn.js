import{m as y,j as e,L as S,$ as R,S as m,R as h}from"./app-BkIYF0B_.js";import{A as _,S as w,a as C,d as A}from"./app-layout-B8yZ-LC9.js";import{B as j}from"./button-FpQlVGsK.js";import{C as L,a as E,b as F,c as U}from"./card-CojAARqZ.js";import{I as p}from"./input-CCfghYXo.js";import{L as n}from"./label-e1l0PEdY.js";import{C as g}from"./combobox-B6PKP6OP.js";import"./index-BKlDaJyT.js";import"./createLucideIcon-CBPUJ6Fa.js";import"./index-C_6opvjc.js";import"./index-DtEHKdL_.js";import"./index-s94pc9Ud.js";import"./index-B0ZYHbNm.js";import"./index-DcBKgsN-.js";import"./app-logo-icon-C0uA72ug.js";import"./circle-x-e6sBlHxe.js";import"./clsx-B-dksMZM.js";import"./folder-root-D7P9g72l.js";import"./grip-vertical-BUM2KCUv.js";import"./popover-DI2OD7J1.js";function ee({room:s,roomTypes:d,blocks:o}){var x,f;const r=!!s,{data:t,setData:c,processing:u,reset:v}=y({name:(s==null?void 0:s.name)||"",area:(s==null?void 0:s.area)||0,room_type_id:(s==null?void 0:s.room_type_id)||0,block_id:(s==null?void 0:s.block_id)||0,img:(s==null?void 0:s.img)||null}),b=a=>{a.preventDefault();const i=new FormData;Object.keys(t).forEach(l=>{if(!(t[l]===null||t[l]==="")){if(l==="img"){t[l]instanceof File&&i.append(l,t[l]);return}i.append(l,t[l])}}),r?(i.append("_method","PUT"),m.post(`/rooms/${s.id}`,i,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{m.get("/rooms")}})):m.post("/rooms",i,{onSuccess:()=>{v()}})},N=[{title:"Rooms",href:"/rooms"},{title:r?"Edit Room":"Add Room",href:"#"}];return e.jsxs(_,{breadcrumbs:N,children:[e.jsx(S,{title:r?"Edit Room":"Add Room"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full max-w-4xl mx-auto",children:e.jsxs(L,{children:[e.jsxs(E,{children:[e.jsx(F,{className:"text-2xl font-bold",children:r?"Edit Room":"Add Room"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit room details":"Create a new room"})]}),e.jsx(w,{}),e.jsx(U,{className:"pt-6",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Room Name"}),e.jsx(p,{id:"name",value:t.name,onChange:a=>c("name",a.target.value),placeholder:"Enter room name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"area",children:"Area (sq ft)"}),e.jsx(p,{id:"area",type:"number",value:t.area,onChange:a=>c("area",Number(a.target.value)),placeholder:"Enter area"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"room_type_id",children:"Room Type"}),e.jsx(g,{entity:"room_type_id",value:(x=t.room_type_id)==null?void 0:x.toString(),onChange:a=>{c("room_type_id",parseInt(a))},options:d.map(a=>({id:a.id.toString(),name:a.name})),includeAllOption:!1,placeholder:"Select Room Type"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"block_id",children:"Block"}),e.jsx(g,{entity:"block_id",value:(f=t.block_id)==null?void 0:f.toString(),onChange:a=>{c("block_id",parseInt(a))},options:o.map(a=>({id:a.id.toString(),name:a.name})),includeAllOption:!1,placeholder:"Select Block"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"img",children:"Image"}),e.jsx(p,{id:"img",type:"file",accept:"image/*",onChange:a=>{var i;return c("img",((i=a.target.files)==null?void 0:i[0])||null)}}),e.jsx(n,{children:"Image"}),e.jsx(B,{dataImg:t.img})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6",children:[e.jsx(R,{href:"/rooms",className:"w-full sm:w-auto",children:e.jsxs(j,{type:"button",variant:"secondary",className:"w-full",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(j,{type:"submit",disabled:u,className:"w-full sm:w-auto",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),u?r?"Saving...":"Adding...":r?"Save Changes":"Add Room"]})]})]})})]})})]})}function B({dataImg:s}){const[d,o]=h.useState(()=>s&&typeof s=="string"?`/assets/${s}`:null);return h.useEffect(()=>{if(s instanceof File){const r=URL.createObjectURL(s);return o(r),()=>URL.revokeObjectURL(r)}else o(typeof s=="string"&&s?`/assets/${s}`:null)},[s]),d?e.jsx("img",{src:d,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No image uploaded."})}export{ee as default};
