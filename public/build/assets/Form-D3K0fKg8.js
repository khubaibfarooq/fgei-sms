import{R as b,r as m,m as g,j as e,L as R,$ as y,S as x}from"./app-Bdca_Mae.js";import{A as N,S as A,b as C,c as E}from"./app-layout-D-L1ThfD.js";import{B as f}from"./button-BSR0WFKx.js";import{C as w,a as _,b as L,c as $}from"./card-caDSJFXg.js";import{I as B}from"./input-DLowr3c6.js";import{L as M}from"./label-B2E929-y.js";import{M as D}from"./MultiSelect-D35ChkRW.js";import"./index-_QdxAQxr.js";import"./createLucideIcon-a2YC7t2L.js";import"./index-BZxpiLJ9.js";import"./app-logo-icon-7mKkv_5o.js";import"./folder-root-p1mNzqSB.js";import"./grip-vertical-BrWBcdPZ.js";import"./index-DQ0WrlsL.js";import"./index-D7TskRfI.js";function X({roomType:t,assets:l}){const r=!!t;console.log(t);const c=b.useMemo(()=>l?Array.isArray(l)?l.map(s=>({value:s.id.toString(),label:s.name})):Object.entries(l).map(([s,a])=>({value:s,label:a})):[],[l]),[i,o]=m.useState([]);m.useEffect(()=>{if(t!=null&&t.assets_id){const s=t.assets_id.split(",").map(a=>a.trim()).filter(a=>a!==""&&a!==null&&a!==void 0);o(s)}else o([])},[t]);const{data:n,setData:d,processing:p,errors:u,reset:h}=g({name:(t==null?void 0:t.name)||"",assets_id:(t==null?void 0:t.assets_id)||""});m.useEffect(()=>{const s=i.join(",");d("assets_id",s)},[i,d]);const j=s=>{s.preventDefault(),r?x.put(`/room-types/${t.id}`,n,{preserveScroll:!0,preserveState:!0}):x.post("/room-types",n,{onSuccess:()=>{h()}})},v=[{title:"Room Types",href:"/room-types"},{title:r?"Edit Room Type":"Add Room Type",href:"#"}];return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(R,{title:r?"Edit Room Type":"Add Room Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(w,{children:[e.jsxs(_,{children:[e.jsx(L,{className:"text-2xl font-bold",children:r?"Edit Room Type":"Add Room Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit room type details":"Create a new room type"})]}),e.jsx(A,{}),e.jsx($,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"name",children:"Room Type Name"}),e.jsx(B,{id:"name",value:n.name,onChange:s=>d("name",s.target.value),placeholder:"Enter room type name"}),e.jsx(D,{options:c,value:i,onChange:o,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.length>0?`${i.length} room type(s) selected: ${i.map(s=>{const a=c.find(S=>S.value===s);return a?a.label:s}).join(", ")}`:"No room types selected"}),u.assets_id&&e.jsx("p",{className:"text-sm text-red-500",children:u.assets_id})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(y,{href:"/room-types",children:e.jsxs(f,{type:"button",variant:"secondary",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(f,{type:"submit",disabled:p,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),p?r?"Saving...":"Adding...":r?"Save Changes":"Add Room Type"]})]})]})})]})})]})}export{X as default};
