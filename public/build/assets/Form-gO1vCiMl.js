import{m as v,j as e,L as n,S as g}from"./app-DuRSjLVb.js";import{A as f,S as _,d as b}from"./app-layout-h05Rnl_k.js";import{B as N}from"./button-f2KDOLjx.js";import{C,a as y,b as S,c as I}from"./card-Kp7R5wMM.js";import{I as m}from"./input-Bgtikf-N.js";import{L as c}from"./label-CcTie8Do.js";import"./index-DSm02USm.js";import"./createLucideIcon-mVSZF5vR.js";import"./index-DmfAbtEK.js";import"./app-logo-icon-CTzO-ndZ.js";import"./folder-root-DDCiIPmQ.js";import"./grip-vertical-BkNKUvII.js";function O({institute:a}){const p=!!a,{data:l,setData:s,processing:h}=v({name:(a==null?void 0:a.name)||"",established_date:(a==null?void 0:a.established_date)||new Date().toISOString().split("T")[0],total_area:(a==null?void 0:a.total_area)||0,convered_area:(a==null?void 0:a.convered_area)||0,img_layout:(a==null?void 0:a.img_layout)||"",img_3d:(a==null?void 0:a.img_3d)||"",video:(a==null?void 0:a.video)||"",gender:(a==null?void 0:a.gender)||"",address:(a==null?void 0:a.address)||"",phone:(a==null?void 0:a.phone)||"",email:(a==null?void 0:a.email)||""}),x=o=>{o.preventDefault();const r=new FormData;Object.keys(l).forEach(d=>{if(!(l[d]===null||l[d]==="")){if(d==="img_layout"||d==="img_3d"||d==="video"){l[d]instanceof File&&r.append(d,l[d]);return}if(d==="total_area"||d==="convered_area"){r.append(d,l[d].toString());return}r.append(d,l[d])}}),p?(r.append("_method","PUT"),g.post(`/institutes/${a.id}`,r,{forceFormData:!0,preserveScroll:!0,preserveState:!0})):g.post("institutes",r,{forceFormData:!0})},j=[{title:"Institute",href:"/institute"},{title:p?"Edit Institute":"Add Institute",href:"#"}];return e.jsxs(f,{breadcrumbs:j,children:[e.jsx(n,{title:p?"Update Institute":"Add Institute"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:e.jsxs(C,{children:[e.jsx(y,{children:e.jsx(S,{className:"text-2xl font-bold text-center",children:l.name})}),e.jsx(_,{}),e.jsx(I,{className:"pt-6",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"established_date",children:"Established Date"}),e.jsx(m,{id:"established_date",type:"date",value:l.established_date,onChange:o=>s("established_date",o.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"total_area",children:"Total Area (sq ft)"}),e.jsx(m,{id:"total_area",type:"number",value:l.total_area,onChange:o=>s("total_area",Number(o.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),e.jsx(m,{id:"convered_area",type:"number",value:l.convered_area,onChange:o=>s("convered_area",Number(o.target.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Current Layout Image"}),a!=null&&a.img_layout?e.jsx("img",{src:`/assets/${a.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),e.jsx(m,{id:"img_layout",type:"file",accept:"image/*",onChange:o=>{var r;return s("img_layout",((r=o.target.files)==null?void 0:r[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Current 3D Image"}),a!=null&&a.img_3d?e.jsx("img",{src:`/assets/${a.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),e.jsx(m,{id:"img_3d",type:"file",accept:"image/*",onChange:o=>{var r;return s("img_3d",((r=o.target.files)==null?void 0:r[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Current Video"}),a!=null&&a.video?e.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[e.jsx("source",{src:`/assets/${a.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),e.jsx(m,{id:"video",type:"file",accept:"video/*",onChange:o=>{var r;return s("video",((r=o.target.files)==null?void 0:r[0])||null)}})]})]}),e.jsx("div",{className:"flex items-center justify-between pt-2",children:e.jsxs(N,{type:"submit",disabled:h,children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),h?p?"Saving...":"Adding...":p?"Save Changes":"Save Institute"]})})]})})]})})]})}export{O as default};
