import{j as e,L as b,$ as i,a as o,S as d}from"./app-D0XCGo6K.js";import{A as N,a8 as n,P as y,e as w,T as v,t}from"./app-layout-ZFB9N5y8.js";import{B as r,c as m}from"./button-Ds3k49oq.js";import{C as A,a as D,b as C,c as k}from"./card-Cq-zI5Aj.js";import{A as _,a as S,b as T,c as $,d as F,e as L,f as M,g as z,h as B}from"./alert-dialog-D4xpHKOj.js";import{C as x}from"./index-FhISw8Lz.js";import"./input-D1690gyV.js";import"./index-BMGgBE6f.js";import"./createLucideIcon-DT9J98xU.js";import"./app-logo-icon-DlSFNQ9x.js";import"./folder-root-DG5YQKeL.js";import"./grip-vertical-n__iThbr.js";function V({notifications:a,permissions:l}){const h=[{title:"Dashboard",href:"/dashboard"},{title:"Notifications",href:"/notifications"}],g=async s=>{try{await o.post(`/notifications/${s}/read`),d.reload()}catch{t.error("Failed to mark as read")}},u=async()=>{try{await o.post("/notifications/mark-all-read"),d.reload()}catch{t.error("Failed to mark all as read")}},j=s=>{d.delete(`/notifications/${s}`,{onSuccess:()=>t.success("Notification deleted successfully"),onError:()=>t.error("Failed to delete notification")})},p=s=>{switch(s){case"success":return"border-l-green-500 bg-green-50 dark:bg-green-950/20";case"warning":return"border-l-yellow-500 bg-yellow-50 dark:bg-yellow-950/20";case"error":return"border-l-red-500 bg-red-50 dark:bg-red-950/20";default:return"border-l-blue-500 bg-blue-50 dark:bg-blue-950/20"}},f=s=>new Date(s).toLocaleString();return e.jsxs(N,{breadcrumbs:h,children:[e.jsx(b,{title:"Notifications"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full mx-auto",children:e.jsxs(A,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"h-6 w-6"}),e.jsx(C,{className:"text-2xl font-bold",children:"Notifications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",onClick:u,children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Mark all as read"]}),l.can_add&&e.jsx(i,{href:"/notifications/create",children:e.jsxs(r,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Create Notification"]})})]})]}),e.jsxs(k,{className:"space-y-3",children:[a.data.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(n,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No notifications yet"})]}):a.data.map(s=>e.jsxs("div",{className:m("p-4 rounded-lg border-l-4 flex items-start justify-between gap-4",p(s.type),!s.is_read&&"ring-1 ring-primary/20"),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),!s.is_read&&e.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:f(s.created_at)})]}),e.jsxs("div",{className:"flex gap-1",children:[!s.is_read&&e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>g(s.id),title:"Mark as read",children:e.jsx(x,{className:"h-4 w-4"})}),l.can_edit&&e.jsx(i,{href:`/notifications/${s.id}/edit`,children:e.jsx(r,{variant:"ghost",size:"icon",title:"Edit",children:e.jsx(w,{className:"h-4 w-4"})})}),l.can_delete&&e.jsxs(_,{children:[e.jsx(S,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",title:"Delete",children:e.jsx(v,{className:"h-4 w-4"})})}),e.jsxs(T,{children:[e.jsxs($,{children:[e.jsx(F,{children:"Delete this notification?"}),e.jsxs(L,{children:["Notification ",e.jsx("strong",{children:s.title})," will be permanently deleted for all users."]})]}),e.jsxs(M,{children:[e.jsx(z,{children:"Cancel"}),e.jsx(B,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>j(s.id),children:"Delete"})]})]})]})]})]},s.id)),a.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2 pt-4",children:Array.from({length:a.last_page},(s,c)=>c+1).map(s=>e.jsx(i,{href:`/notifications?page=${s}`,className:m("px-3 py-1 rounded",s===a.current_page?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:s},s))})]})]})})]})}export{V as default};
