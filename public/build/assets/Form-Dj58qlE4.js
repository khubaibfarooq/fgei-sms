import{m as h,r as v,b as E,j as e,L as _,$ as A,S as k}from"./app-DimJN_WS.js";import{A as D,S as L,a as w,d as F}from"./app-layout-DK0DdOkt.js";import{B as N}from"./button-BwXTY4S-.js";import{C as I,a as R,b as $,c as d}from"./card-BKCo--uN.js";import{I as j}from"./input-CdmvllK4.js";import{L as o}from"./label-CHNvFuz0.js";import{I as B}from"./icon-picker-BV9nk5Bv.js";import{M}from"./MultiSelect-CBWOTgSt.js";import"./index-DtaU_tud.js";import"./createLucideIcon-BauaUMKI.js";import"./index-Dll_kG58.js";import"./index-DPYtuGH9.js";import"./index-D5HUFt8e.js";import"./index-CLMamIW4.js";import"./index-BVSErxBm.js";import"./app-logo-icon-DYfe2kzh.js";import"./circle-x-BcJA8Xk1.js";import"./folder-root-pkDpAmRA.js";import"./grip-vertical-BEMVS-6X.js";import"./popover-8JECl8lU.js";import"./index-DZT4mcNh.js";import"./index-Cg50APP6.js";function se({dashboardCard:t,roles:m}){const n=!!t;console.log(t);const{data:s,setData:r,processing:f,errors:i,reset:a}=h({id:(t==null?void 0:t.id)||"",title:(t==null?void 0:t.title)||"",link:(t==null?void 0:t.link)||"",color:(t==null?void 0:t.color)||"",icon:(t==null?void 0:t.icon)||"",role_id:(t==null?void 0:t.role_id)||"",redirectlink:(t==null?void 0:t.redirectlink)||"",order:(t==null?void 0:t.order)||""});v.useEffect(()=>{r(t?l=>({...l,title:t.title??"",link:t.link??"",color:t.color??"",icon:t.icon??"",role_id:t.role_id??"",redirectlink:t.redirectlink??"",order:t.order??""}):l=>({...l,title:"",link:"",color:"",icon:"",role_id:"",redirectlink:"",order:""}))},[t,r]);const y=l=>{l.preventDefault();const c={id:s.id,title:s.title,link:s.link,color:s.color,icon:s.icon,role_id:x.join(","),redirectlink:s.redirectlink,order:s.order};n?k.put(`/dashboardcards/${t==null?void 0:t.id}`,c,{preserveScroll:!0,preserveState:!0,onError:p=>console.log(p)}):k.post("/dashboardcards",c,{onSuccess:()=>a(),onError:p=>console.log(p)})},S=[{title:"Dashboard Cards",href:"/dashboardcards"},{title:n?"Edit Dashboard Card":"Add Dashboard Card",href:"#"}],g=E.useMemo(()=>m?Array.isArray(m)?m.map(l=>({value:l.id.toString(),label:l.name})):Object.entries(m).map(([l,c])=>({value:l,label:c})):[],[m]),[x,u]=v.useState([]);return v.useEffect(()=>{if(t!=null&&t.role_id){const l=t.role_id.split(",").map(c=>c.trim()).filter(c=>c!==""&&c!==null&&c!==void 0);u(l)}else u([])},[t]),e.jsxs(D,{breadcrumbs:S,children:[e.jsx(_,{title:n?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(I,{children:[e.jsxs(R,{children:[e.jsx($,{className:"text-2xl font-bold",children:n?"Edit Dashboard Card":"Add Dashboard Card"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Update card details":"Create a new dashboard card"})]}),e.jsx(L,{}),e.jsx(d,{className:"pt-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Title"}),e.jsx(j,{id:"title",value:s.title,onChange:l=>r("title",l.target.value),placeholder:"Enter card title"}),i.title&&e.jsx("p",{className:"text-red-500 text-sm",children:i.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"link",children:"Link"}),e.jsx(j,{id:"link",value:s.link,onChange:l=>r("link",l.target.value),placeholder:"Enter card link"}),i.link&&e.jsx("p",{className:"text-red-500 text-sm",children:i.link})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{options:g,value:x,onChange:u,placeholder:"Choose roles ...",label:"Select Roles"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:x.length>0?`${x.length} role  selected: ${x.map(l=>{const c=g.find(p=>p.value===l);return c?c.label:l}).join(", ")}`:"No Role  selected"}),i.role_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.role_id}),i.role_id&&e.jsx("p",{className:"text-red-500 text-sm",children:i.role_id}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"icon",children:"Icon"}),e.jsx(B,{value:s.icon,onChange:l=>r("icon",l)}),i.icon&&e.jsx("p",{className:"text-sm text-red-500",children:i.icon})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"color",children:"Color"}),e.jsx(j,{type:"color",id:"color",value:s.color,onChange:l=>r("color",l.target.value)}),i.color&&e.jsx("p",{className:"text-red-500 text-sm",children:i.color}),e.jsx(o,{htmlFor:"redirectlink",children:"Redirect Link"}),e.jsx(j,{id:"redirectlink",value:s.redirectlink,onChange:l=>r("redirectlink",l.target.value)}),i.redirectlink&&e.jsx("p",{className:"text-red-500 text-sm",children:i.redirectlink})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"color",children:"Order No"}),e.jsx(j,{type:"number",id:"order",value:s.order,onChange:l=>r("order",l.target.value)}),i.order&&e.jsx("p",{className:"text-red-500 text-sm",children:i.order})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(A,{href:"/dashboardcards",children:e.jsxs(N,{type:"button",variant:"secondary",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(N,{type:"submit",disabled:f,children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),f?n?"Saving...":"Adding...":n?"Save Changes":"Add Card"]})]})]})})]})})]})}export{se as default};
