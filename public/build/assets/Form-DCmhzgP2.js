import{m as _,j as e,L as t,$ as N,S as g}from"./app-Bg-EMHGq.js";import{A as b,S as i,a as y,d as w}from"./app-layout-CDdiqaoQ.js";import{B as j}from"./button-W50BR2kx.js";import{C,a as u,b as S,c as I}from"./card-DZ2DCww0.js";import{I as c}from"./input-B6jSgPTW.js";import{L as p}from"./label-DtcQwlYc.js";import"./index-DV1TtbiE.js";import"./createLucideIcon-Dev_omdg.js";import"./index-Dm9ZnwNI.js";import"./index-B833eLi0.js";import"./index-BXvaaCWY.js";import"./index-BDdHMHY_.js";import"./index-D1lRT2yk.js";import"./app-logo-icon-D_R3f3Qh.js";import"./circle-x-XUzvm8AK.js";import"./folder-root-BhvBY6FB.js";import"./grip-vertical-Lz8LFV8X.js";function G({institute:a}){const x=!!a,{data:o,setData:m,processing:h,errors:l,setError:n}=_({name:(a==null?void 0:a.name)||"",established_date:(a==null?void 0:a.established_date)||"",total_area:(a==null?void 0:a.total_area)||0,convered_area:(a==null?void 0:a.convered_area)||0,img_layout:(a==null?void 0:a.img_layout)||"",img_3d:(a==null?void 0:a.img_3d)||"",video:(a==null?void 0:a.video)||"",gender:(a==null?void 0:a.gender)||"",address:(a==null?void 0:a.address)||"",phone:(a==null?void 0:a.phone)||"",email:(a==null?void 0:a.email)||""}),v=s=>{s.preventDefault();const d=new FormData;Object.keys(o).forEach(r=>{if(!(o[r]===null||o[r]==="")){if(r==="img_layout"||r==="img_3d"||r==="video"){o[r]instanceof File&&d.append(r,o[r]);return}if(r==="total_area"||r==="convered_area"){d.append(r,o[r].toString());return}d.append(r,o[r])}}),x?(d.append("_method","PUT"),g.post(`/institutes/${a.id}`,d,{forceFormData:!0,preserveScroll:!0,preserveState:!0,onError:r=>{n(r)}})):g.post("institutes",d,{forceFormData:!0,onError:r=>{n(r)}})},f=[{title:"Institute",href:"/institute"},{title:x?"Edit Institute":"Add Institute",href:"#"}];return e.jsxs(b,{breadcrumbs:f,children:[e.jsx(t,{title:x?"Update Institute":"Add Institute"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full max-w-5xl mx-auto",children:e.jsxs(C,{children:[e.jsx(u,{children:e.jsx(S,{className:"text-2xl font-bold text-center",children:o.name})}),e.jsx(i,{}),e.jsx(I,{className:"pt-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"established_date",children:"Established Date"}),e.jsx(c,{id:"established_date",type:"date",value:o.established_date,onChange:s=>m("established_date",s.target.value)}),l.established_date&&e.jsx("p",{className:"text-red-500 text-sm",children:l.established_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"total_area",children:"Total Area (sq ft)"}),e.jsx(c,{id:"total_area",type:"number",value:o.total_area,onChange:s=>m("total_area",Number(s.target.value))}),l.total_area&&e.jsx("p",{className:"text-red-500 text-sm",children:l.total_area})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"convered_area",children:"Covered Area (sq ft)"}),e.jsx(c,{id:"convered_area",type:"number",value:o.convered_area,onChange:s=>m("convered_area",Number(s.target.value))}),l.convered_area&&e.jsx("p",{className:"text-red-500 text-sm",children:l.convered_area})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Layout Image"}),a!=null&&a.img_layout?e.jsx("img",{src:`/assets/${a.img_layout}`,alt:"Layout",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No layout image uploaded."}),e.jsx(c,{id:"img_layout",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_layout",((d=s.target.files)==null?void 0:d[0])||null)}}),l.img_layout&&e.jsx("p",{className:"text-red-500 text-sm",children:l.img_layout})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Front View Image"}),a!=null&&a.img_3d?e.jsx("img",{src:`/assets/${a.img_3d}`,alt:"3D View",className:"w-full h-48 object-cover rounded"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No 3D image uploaded."}),e.jsx(c,{id:"img_3d",type:"file",accept:"image/*",onChange:s=>{var d;return m("img_3d",((d=s.target.files)==null?void 0:d[0])||null)}}),l.img_3d&&e.jsx("p",{className:"text-red-500 text-sm",children:l.img_3d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Video"}),a!=null&&a.video?e.jsxs("video",{controls:!0,className:"w-full h-48 rounded",children:[e.jsx("source",{src:`/assets/${a.video}`,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No video uploaded."}),e.jsx(c,{id:"video",type:"file",accept:"video/*",onChange:s=>{var d;return m("video",((d=s.target.files)==null?void 0:d[0])||null)}}),l.video&&e.jsx("p",{className:"text-red-500 text-sm",children:l.video})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-2",children:[e.jsx(N,{href:"/institute",className:"w-full sm:w-auto",children:e.jsxs(j,{type:"button",variant:"secondary",className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(j,{type:"submit",disabled:h,className:"w-full sm:w-auto",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),h?x?"Saving...":"Adding...":x?"Save Changes":"Save Institute"]})]})]})})]})})]})}export{G as default};
