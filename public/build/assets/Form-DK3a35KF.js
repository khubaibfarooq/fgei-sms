import{R as g,m as N,j as e,L as F,$ as w,S as x}from"./app-B9SLT0V6.js";import{A as C,S as A,a as E,f as T}from"./app-layout-B6PoArKt.js";import{B as h}from"./button-BF5k_P3B.js";import{C as I,a as L,b as B,c as D}from"./card-Bgp0P5xJ.js";import{I as R}from"./input-B78jMLmf.js";import{L as n}from"./label-DGfTVAHh.js";import{T as V}from"./textarea-CEXtH0J8.js";import{S as u,a as j,b,c as v,d as c}from"./select-Cc_-u2d0.js";import"./index-WFzYa8P0.js";import"./createLucideIcon-B8-jA-Y4.js";import"./index-BCgo9dS5.js";import"./index-D1Worn79.js";import"./index-ChP2lZjH.js";import"./index-D0CFV24D.js";import"./index-cVD0HFXe.js";import"./app-logo-icon-nbArkSr8.js";import"./circle-x-CcxXG3aJ.js";import"./clsx-B-dksMZM.js";import"./folder-root-DFHtStH4.js";import"./grip-vertical-DsEJvEKj.js";import"./index-BQfq42YI.js";import"./index-BVkaBb4m.js";function ie({fund:s,fundHeads:i}){const r=!!s,d=g.useMemo(()=>i?(Array.isArray(i),i):[],[i]),{data:t,setData:l,processing:o,errors:m,reset:y}=N({balance:(s==null?void 0:s.balance)||0,institute_id:(s==null?void 0:s.institute_id)||0,fund_head_id:(s==null?void 0:s.fund_head_id)||0,description:(s==null?void 0:s.description)||"",transaction_type:(s==null?void 0:s.transaction_type)||""}),f=a=>{if(a.preventDefault(),r)x.put(`/funds/${s.id}`,t,{preserveScroll:!0,preserveState:!0});else{const p=d.find(_=>_.id===t.fund_head_id);if(p&&t.transaction_type==="out"&&t.balance>p.balance){alert("Insufficient balance");return}x.post("/funds",t,{onSuccess:()=>{y()}})}},S=[{title:"Funds",href:"/funds"},{title:r?"Edit Fund":"Add Fund",href:"#"}];return e.jsxs(C,{breadcrumbs:S,children:[e.jsx(F,{title:r?"Edit Fund":"Add Fund"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-full max-w-4xl mx-auto",children:e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-2xl font-bold",children:r?"Edit Fund":"Add Fund"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit fund details":"Create a new fund"})]}),e.jsx(A,{}),e.jsx(D,{className:"pt-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"balance",children:"balance"}),e.jsx(R,{id:"balance",type:"number",value:t.balance,onChange:a=>l("balance",Number(a.target.value)),placeholder:"Enter balance"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fund_head_id",children:"Fund Type"}),e.jsxs(u,{value:t.fund_head_id.toString(),onValueChange:a=>l("fund_head_id",parseInt(a)),children:[e.jsx(j,{children:e.jsx(b,{placeholder:"Select fund type"})}),e.jsx(v,{children:d.map(a=>e.jsxs(c,{value:a.id.toString(),children:[a.name,"(",a.balance,")"]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(V,{id:"description",value:t.description,onChange:a=>l("description",a.target.value),placeholder:"Enter description",rows:4}),m.description&&e.jsx("p",{className:"text-sm text-destructive",children:m.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fund_head_id",children:"Transaction Type"}),e.jsxs(u,{required:!0,value:t.transaction_type||"",onValueChange:a=>l("transaction_type",a),children:[e.jsx(j,{children:e.jsx(b,{placeholder:"Select transaction type"})}),e.jsxs(v,{children:[e.jsx(c,{value:"in",children:"Income"}),e.jsx(c,{value:"out",children:"Expense"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6",children:[e.jsx(w,{href:"/funds",className:"w-full sm:w-auto",children:e.jsxs(h,{type:"button",variant:"secondary",className:"w-full",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(h,{type:"submit",disabled:o,className:"w-full sm:w-auto",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),o?r?"Saving...":"Adding...":r?"Save Changes":"Add Fund"]})]})]})})]})})]})}export{ie as default};
