var Be=Object.defineProperty;var We=(o,d,p)=>d in o?Be(o,d,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[d]=p;var ne=(o,d,p)=>We(o,typeof d!="symbol"?d+"":d,p);import{r as a,K as Xe,j as e,L as qe,a as A}from"./app-Bczek4Ig.js";import{A as Ge,E as Je,F as Ke,P as Ye,c as oe}from"./app-layout-DftSBLMb.js";import{B as m}from"./button-Ad6Dai0V.js";import{C,a as D,b as Qe,c as S,d as Ze}from"./card-D2IZaFzI.js";import{I as es}from"./input-CMmlP2kK.js";import{S as ie,a as de,b as ce,c as me,d as g}from"./select-DakNBQ_c.js";import{t as f,X as ss,D as pe,a as xe,b as ue,c as he,d as fe,e as ge}from"./index-Cal_ERNr.js";import{l as ts}from"./lodash-DRVSB4qA.js";import{E as as,F as rs,a as ls,b as ns}from"./jspdf.plugin.autotable-I8fB-XEJ.js";import{C as je}from"./combobox-BezL12RK.js";import{T as os,a as is,b as V,c as U}from"./tabs-D2ADwE_x.js";import{B as P}from"./badge-B8gVWI3P.js";import ds from"./ApprovalModal-runYfSiN.js";import cs from"./FundHeadSelectModal-CWZxzmak.js";import{I as Ne}from"./image-preview2-jhtu3hz4.js";import{L as ms}from"./label-C-Ce7yVd.js";import{C as ps,a as xs}from"./circle-x-Dny1CM5T.js";import"./index-DgV7NxWu.js";import"./createLucideIcon-BfxSO67A.js";import"./index-Ccu6646i.js";import"./index-Dofk-KRl.js";import"./index-Dic1bzpU.js";import"./index-BNwfhYg9.js";import"./app-logo-icon-DZo7__ol.js";import"./folder-root-Pa6MLRfL.js";import"./grip-vertical-De-33CZ8.js";import"./index-TjGYpIuZ.js";import"./index-jhzgGGEe.js";import"./popover-Iy9JLSBM.js";import"./textarea-B0xvyOjv.js";const us=[{title:"Reports",href:"/reports"},{title:"Projects",href:"/reports/projects"}];class hs extends a.Component{constructor(){super(...arguments);ne(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(p){return{hasError:!0,error:p.message}}componentDidCatch(p,v){console.error("ErrorBoundary caught:",p,v),f.error("An error occurred. Please try again or contact support.")}render(){return this.state.hasError?e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-red-600",children:["Error: ",this.state.error]}),e.jsx(m,{onClick:()=>window.location.reload(),className:"mt-2",children:"Retry"})]}):this.props.children}}const B=o=>{const d=o!=null&&typeof o.id=="number"&&o.id>0&&typeof o.name=="string"&&o.name.trim()!=="";return d||console.warn("Invalid item:",o),d};function Gs({projects:o,institutes:d,regions:p,projectTypes:v,fundHeads:be,filters:y}){var le;const[W,fs]=a.useState(y.search||""),[j,E]=a.useState(y.institute_id||""),[R,ve]=a.useState(y.project_type_id||""),[z,ye]=a.useState(y.status||""),[u,I]=a.useState(o),[L,T]=a.useState(d||[]);a.useEffect(()=>{I(o)},[o]),a.useEffect(()=>{if(i){const s=u.data.find(t=>t.id===i.id);s&&_(s)}},[u]);const[M,we]=a.useState(y.region_id||""),{auth:Ce}=Xe().props,O=Ce.user,Se=s=>{var x;const t=(x=s.current_stage)==null?void 0:x.level,r=s.approval_status;if(!t)return!1;const l=(O.roles[0].name||"").toLowerCase(),n=t.toLowerCase();return n==="regional"&&l==="region"&&r!=="approved"||n==="dte"&&(l==="dirhrm"||l==="directorate")&&r!=="approved"},[Pe,X]=a.useState(!1),[_e,Fe]=a.useState(null),[ke,q]=a.useState(!1),[Ae,De]=a.useState(null),[i,_]=a.useState(null),[G,J]=a.useState([]),[K,Y]=a.useState([]),[Q,Z]=a.useState([]),[$,ee]=a.useState(!1),[Ee,F]=a.useState(!1),[w,Re]=a.useState(null),[N,se]=a.useState(""),[te,ae]=a.useState(!1),[ze,H]=a.useState(!1),[b,Ie]=a.useState(null),Le=a.useMemo(()=>Array.isArray(L)?L.filter(B):[],[L]),re=a.useMemo(()=>Array.isArray(p)?p.filter(B):[],[p]),Te=a.useMemo(()=>Array.isArray(v)?v.filter(B):[],[v]);a.useEffect(()=>{i?(ee(!0),(async()=>{try{const[t,r,l]=await Promise.all([A.get(`/projects/${i.id}/history`),A.get(`/projects/${i.id}/milestones`),A.get(`/projects/${i.id}/payments`)]);J(t.data),Y(r.data),Z(l.data.payments)}catch(t){console.error("Failed to fetch project details",t),f.error("Failed to load project details.")}finally{ee(!1)}})()):(J([]),Y([]),Z([]))},[i]);const Me=async s=>{if(!s||s==="0"){T(d||[]),j&&E("");return}try{const t=new URLSearchParams({region_id:s}).toString(),r=await fetch(`/reports/getInstitutes?${t}`);if(!r.ok)throw new Error("Failed to fetch institutes");const l=await r.json();T(l),j&&!l.some(n=>n.id.toString()===j)&&E("")}catch(t){console.error("Error fetching institutes:",t),f.error("Failed to load institutes"),T([])}},Oe=s=>{we(s),Me(s)},$e=s=>{Re(s),se(parseFloat((s.completion_per||0).toString()).toString()),F(!0)},He=async()=>{var t,r;if(!w)return;const s=parseFloat(N);if(isNaN(s)||s<0||s>100){f.error("Please enter a valid percentage (0-100)");return}ae(!0);try{const l=await A.post(`/projects/${w.id}/update-completion`,{completion_per:s});l.data.success?(f.success("Completion percentage updated successfully"),F(!1),k()):f.error(l.data.message||"Failed to update")}catch(l){f.error(((r=(t=l.response)==null?void 0:t.data)==null?void 0:r.message)||"Failed to update completion percentage")}finally{ae(!1)}},Ve=async()=>{const s=new as.Workbook,t=s.addWorksheet("Projects");t.columns=[{header:"Name",key:"name",width:30},{header:"Cost",key:"cost",width:15},{header:"Status",key:"status",width:15},{header:"Project Type",key:"project_type",width:25},{header:"Institute",key:"institute",width:30},{header:"Region",key:"region",width:25}],u.data.forEach(n=>{var x,h,c;t.addRow({name:n.name,estimated_cost:n.estimated_cost,actual_cost:n.actual_cost,status:n.status,project_type:((x=n.projecttype)==null?void 0:x.name)||"N/A",institute:((h=n.institute)==null?void 0:h.name)||"N/A",region:((c=n.region)==null?void 0:c.name)||"N/A"})});const r=await s.xlsx.writeBuffer(),l=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});rs.saveAs(l,"Projects_Report.xlsx")},Ue=()=>{const s=new ls;s.setFontSize(16),s.text("Projects Report",14,15);const t=["Name","Estimated Cost","Actual Cost","Status","Project Type","Institute","Region"],r=u.data.map(l=>{var n,x,h;return[l.name,l.estimated_cost,l.actual_cost,l.status,((n=l.projecttype)==null?void 0:n.name)||"N/A",((x=l.institute)==null?void 0:x.name)||"N/A",((h=l.region)==null?void 0:h.name)||"N/A"]});ns(s,{head:[t],body:r,startY:25,styles:{fontSize:9,cellPadding:2},headStyles:{fillColor:[66,139,202],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]}}),s.save("Projects_Report.pdf")},k=a.useMemo(()=>ts.debounce(()=>{const s=new URLSearchParams({search:W.trim(),institute_id:j||"",region_id:M||"",project_type_id:R||"",status:z||""});fetch(`/reports/projects/getprojects?${s.toString()}`).then(t=>t.json()).then(t=>{console.log("Filtered projects:",t),I(t)}).catch(t=>{console.error("Fetch error:",t),f.error("Failed to load projects")})},300),[W,j,M,R,z]);return e.jsx(hs,{children:e.jsxs(Ge,{breadcrumbs:us,children:[e.jsx(qe,{title:"Projects Report"}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-65px)] overflow-hidden",children:[e.jsx("div",{className:`flex-1 p-2 md:p-4 overflow-y-auto ${i?"lg:w-2/3":"w-full"}`,children:e.jsxs("div",{className:"flex flex-col gap-3 h-full",children:[e.jsxs(C,{className:"shrink-0",children:[e.jsx(D,{className:"py-3",children:e.jsx(Qe,{className:"text-xl font-bold",children:"Filters"})}),e.jsxs(S,{className:"py-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[re.length>0&&e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx(je,{entity:"region",value:M,onChange:s=>Oe(s),options:re.map(s=>({id:s.id.toString(),name:s.name.split(" ").pop()||s.name})),includeAllOption:!0})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsx(je,{entity:"institute",value:j,onChange:E,options:Le.map(s=>({id:s.id.toString(),name:s.name})),includeAllOption:!1,placeholder:"Select Institute"})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs(ie,{value:R,onValueChange:s=>ve(s),children:[e.jsx(de,{children:e.jsx(ce,{placeholder:"Select Project Type"})}),e.jsxs(me,{children:[e.jsx(g,{value:"0",children:"All Project Types"}),Te.map(s=>e.jsx(g,{value:s.id.toString(),children:s.name},s.id))]})]})}),e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs(ie,{value:z,onValueChange:s=>ye(s),children:[e.jsx(de,{children:e.jsx(ce,{placeholder:"Select Status"})}),e.jsxs(me,{children:[e.jsx(g,{value:"all",children:"All Status"}),e.jsx(g,{value:"planned",children:"Planned"}),e.jsx(g,{value:"inprogress",children:"In Progress"}),e.jsx(g,{value:"completed",children:"Completed"}),e.jsx(g,{value:"waiting",children:"Waiting"})]})]})})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(m,{onClick:k,size:"sm",children:"Apply Filters"}),e.jsx(m,{onClick:Ue,size:"sm",variant:"outline",children:"Export PDF"}),e.jsx(m,{onClick:Ve,size:"sm",variant:"outline",children:"Export Excel"})]})]})]}),e.jsxs(C,{className:"flex-1 min-h-0 flex flex-col",children:[e.jsx(S,{className:"p-0 flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse text-sm",children:[e.jsx("thead",{className:"sticky top-0 z-10",children:e.jsxs("tr",{className:"bg-primary text-white text-center",children:[e.jsx("th",{className:"border p-2 font-medium",children:"Institute"}),e.jsx("th",{className:"border p-2 font-medium",children:"Type"}),e.jsx("th",{className:"border p-2 font-medium",children:"Project"}),e.jsx("th",{className:"border p-2 font-medium",children:"Description"}),e.jsx("th",{className:"border p-2 font-medium",children:"Estimated Cost"}),e.jsx("th",{className:"border p-2 font-medium",children:"Actual Cost"}),e.jsx("th",{className:"border p-2 font-medium",children:"PDF"}),e.jsx("th",{className:"border p-2 font-medium",children:"Fund Head"}),e.jsx("th",{className:"border p-2 font-medium",children:"Current Stage"}),e.jsx("th",{className:"border p-2 font-medium",children:"Approval Status"}),e.jsx("th",{className:"border p-2 font-medium",children:"Completion %"}),e.jsx("th",{className:"border p-2 font-medium",children:"Project Status"}),e.jsx("th",{className:"border p-2 font-medium",children:"Final Comments"}),e.jsx("th",{className:"border p-2 font-medium",children:"Action"})]})}),e.jsx("tbody",{children:u.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center p-4 text-muted-foreground",children:"No projects found."})}):u.data.map(s=>{var t,r,l,n,x,h;return e.jsxs("tr",{className:`hover:bg-primary/10 dark:hover:bg-gray-700 cursor-pointer transition-colors ${(i==null?void 0:i.id)===s.id?"bg-primary/5 dark:bg-gray-700 border-l-4 border-l-primary":""}`,onClick:()=>_(s),children:[e.jsx("td",{className:"border p-2",children:((t=s.institute)==null?void 0:t.name)||"-"}),e.jsx("td",{className:"border p-2 text-center",children:((r=s.projecttype)==null?void 0:r.name)||"-"}),e.jsx("td",{className:"border p-2 font-medium",children:s.name}),e.jsx("td",{className:"border p-2 text-center",onClick:c=>c.stopPropagation(),children:s.description?e.jsx(m,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",title:"View Description",onClick:()=>{Ie(s),H(!0)},children:e.jsx(Je,{className:"h-4 w-4"})}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"border p-2 text-right",children:s.estimated_cost}),e.jsx("td",{className:"border p-2 text-right",children:s.actual_cost}),e.jsx("td",{className:"border p-2 text-center",onClick:c=>c.stopPropagation(),children:s.pdf?e.jsx("a",{href:`/assets/${s.pdf}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center text-blue-600 hover:text-blue-700",title:"View PDF",children:e.jsx(Ke,{className:"h-5 w-5"})}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx("td",{className:"border p-2 text-center",children:(l=s.fundhead)==null?void 0:l.name}),e.jsx("td",{className:"border p-2 text-center",children:((n=s.current_stage)==null?void 0:n.stage_name)||"Request Initiated"}),e.jsxs("td",{className:"border p-2 text-center",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.approval_status==="completed"?"bg-green-100 text-green-800":s.approval_status==="inprogress"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:[s.approval_status.charAt(0).toUpperCase()+s.approval_status.slice(1),e.jsx("br",{})]}),s.approval_status==="waiting"?((x=s.current_stage)==null?void 0:x.level)||"Regional Office":""]}),e.jsx("td",{className:"border p-2 text-center",children:s.completion_per?parseFloat(s.completion_per.toString()):"-"}),e.jsx("td",{className:"border p-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="inprogress"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),"                   ",e.jsx("td",{className:"border p-2 text-center",children:s.final_comments||"-"}),e.jsxs("td",{className:"border p-2 text-center",onClick:c=>c.stopPropagation(),children:[Se(s)&&e.jsx(m,{variant:"ghost",size:"icon",title:"View/Approve",className:"text-blue-600 hover:text-blue-700",onClick:c=>{c.stopPropagation(),Fe(s),X(!0)},children:e.jsx(Ze,{className:"h-4 w-4"})}),((h=O.roles[0])==null?void 0:h.name.toLowerCase())==="region"&&!s.fund_head_id&&e.jsx(m,{variant:"ghost",size:"sm",title:"Select Fund Head",className:"text-orange-600 hover:text-orange-700 font-bold",onClick:c=>{c.stopPropagation(),De(s),q(!0)},children:"Select Head"}),O.type==="Regional Office"&&s.status==="inprogress"&&e.jsx(m,{variant:"ghost",size:"icon",title:`Update Completion (${s.completion_per||0}%)`,className:"text-purple-600 hover:text-purple-700",onClick:c=>{c.stopPropagation(),$e(s)},children:e.jsx(Ye,{className:"h-4 w-4"})})]})]},s.id)})})]})}),u.links.length>1&&e.jsx("div",{className:"p-4 border-t flex justify-center flex-wrap gap-2 shrink-0",children:u.links.map((s,t)=>e.jsx(m,{disabled:!s.url,variant:s.active?"default":"outline",size:"sm",onClick:()=>{s.url&&fetch(s.url).then(r=>r.json()).then(r=>{I(r)}).catch(r=>{console.error("Error:",r)})},children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},t))})]})]})}),i&&e.jsxs("div",{className:"w-full lg:w-1/3 border-l bg-background p-4 md:p-6 shadow-xl overflow-y-auto flex flex-col h-full transition-all duration-300 ease-in-out z-20 absolute lg:relative right-0 top-0 lg:top-auto bottom-0 lg:bottom-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:i.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(le=i.institute)==null?void 0:le.name})]}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>_(null),children:e.jsx(ss,{className:"h-5 w-5"})})]}),e.jsxs(os,{defaultValue:"approvals",className:"w-full flex-1 flex flex-col",children:[e.jsxs(is,{className:"grid w-full grid-cols-3",children:[e.jsx(V,{value:"approvals",children:"Approvals"}),e.jsx(V,{value:"milestones",children:"Milestones"}),e.jsx(V,{value:"payments",children:"Payments"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto mt-4 px-1",children:[e.jsx(U,{value:"approvals",className:"space-y-4 m-0 h-full",children:$?e.jsx("div",{className:"flex justify-center py-8 text-muted-foreground",children:"Loading history..."}):G.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:"No approval history found."}):e.jsx("div",{className:"space-y-4",children:G.map(s=>{var t,r;return e.jsxs(C,{className:"overflow-hidden",children:[e.jsx(D,{className:"p-3 bg-muted/50 pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"font-semibold text-sm",children:((t=s.stage)==null?void 0:t.stage_name)||"Stage"}),s.status==="approved"?e.jsxs(P,{variant:"outline",className:"border-green-500 text-green-600 bg-green-50 gap-1",children:[e.jsx(ps,{className:"w-3 h-3"})," Approved"]}):s.status==="rejected"?e.jsxs(P,{variant:"outline",className:"border-red-500 text-red-600 bg-red-50 gap-1",children:[e.jsx(xs,{className:"w-3 h-3"})," Rejected"]}):e.jsxs(P,{variant:"outline",className:"border-yellow-500 text-yellow-600 bg-yellow-50 gap-1",children:[e.jsx(oe,{className:"w-3 h-3"})," Pending"]})]})}),e.jsxs(S,{className:"p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),s.action_date?new Date(s.action_date).toLocaleString():""]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-medium text-xs",children:"Approver: "}),(r=s.approver)==null?void 0:r.name]}),s.comments&&e.jsxs("div",{className:"bg-muted/30 p-2 rounded text-xs italic border",children:['"',s.comments,'"']}),s.pdf&&e.jsx("a",{href:`/${s.pdf}`,target:"_blank",className:"mt-1 text-blue-600 underline text-xs flex items-center gap-1",children:"View PDF"}),s.img&&e.jsx("div",{className:"mt-2",children:e.jsx(Ne,{dataImg:s.img,size:"h-20",className:"rounded border"})})]})]},s.id)})})}),e.jsx(U,{value:"milestones",className:"space-y-4 m-0 h-full",children:$?e.jsx("div",{className:"flex justify-center py-8 text-muted-foreground",children:"Loading milestones..."}):K.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:"No milestones found."}):e.jsx("div",{className:"space-y-4",children:K.map(s=>e.jsxs(C,{children:[e.jsx(D,{className:"p-3 pb-1",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"font-semibold text-sm",children:s.name}),e.jsx(P,{variant:s.status==="completed"?"default":s.status==="inprogress"?"secondary":"outline",className:"capitalize text-xs",children:s.status})]})}),e.jsxs(S,{className:"p-3 text-sm space-y-2",children:[s.img&&e.jsx("div",{className:"mb-2",children:e.jsx(Ne,{dataImg:s.img,size:"h-32",className:"w-full object-cover rounded-md"})}),s.pdf&&e.jsx("a",{href:`/${s.pdf}`,target:"_blank",className:"mb-2 text-blue-600 underline text-xs flex items-center gap-1",children:"View Document (PDF)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due in: "}),s.days," days"]}),s.completed_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed: "}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:new Date(s.completed_date).toLocaleDateString()})]})]}),s.description&&e.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:s.description})]})]},s.id))})}),e.jsx(U,{value:"payments",className:"space-y-4 m-0 h-full",children:$?e.jsx("div",{className:"flex justify-center py-8 text-muted-foreground",children:"Loading payments..."}):Q.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground border rounded-lg border-dashed",children:"No payments found."}):e.jsx("div",{className:"space-y-4",children:Q.map(s=>{var t;return e.jsxs(C,{children:[e.jsx(D,{className:"p-3 pb-1",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"font-semibold text-sm",children:["Amount: ",s.amount]}),e.jsx(P,{variant:"outline",className:`capitalize text-xs ${s.status==="Approved"?"border-green-500 text-green-600 bg-green-50":s.status==="Rejected"?"border-red-500 text-red-600 bg-red-50":"border-yellow-500 text-yellow-600 bg-yellow-50"}`,children:s.status})]})}),e.jsxs(S,{className:"p-3 text-sm space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:((t=s.fund_head)==null?void 0:t.name)||"General Fund"}),e.jsx("div",{className:"text-xs",children:new Date(s.added_date).toLocaleDateString()}),s.description&&e.jsxs("p",{className:"text-muted-foreground text-xs italic",children:['"',s.description,'"']})]})]},s.id)})})})]})]})]})]}),e.jsx(ds,{isOpen:Pe,onClose:()=>X(!1),project:_e,onSuccess:()=>{k()}}),e.jsx(cs,{isOpen:ke,onClose:()=>q(!1),project:Ae,fundHeads:be,onSuccess:()=>{k()}}),e.jsx(pe,{open:Ee,onOpenChange:F,children:e.jsxs(xe,{className:"sm:max-w-[400px]",children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Update Completion Percentage"}),e.jsxs(fe,{children:["Update the completion percentage for ",e.jsx("strong",{children:w==null?void 0:w.name}),"."]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(ms,{htmlFor:"completion_per",className:"text-right",children:"Percentage"}),e.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[e.jsx(es,{id:"completion_per",type:"number",min:"0",max:"100",step:"1",placeholder:"0-100",className:"flex-1",value:N,onChange:s=>se(s.target.value)}),e.jsx("span",{className:"text-muted-foreground",children:"%"})]})]}),(parseFloat(N)<0||parseFloat(N)>100)&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:"Percentage must be between 0 and 100"})]}),e.jsxs(ge,{children:[e.jsx(m,{variant:"secondary",onClick:()=>F(!1),children:"Cancel"}),e.jsx(m,{onClick:He,disabled:te||parseFloat(N)<0||parseFloat(N)>100,children:te?"Updating...":"Save"})]})]})}),e.jsx(pe,{open:ze,onOpenChange:H,children:e.jsxs(xe,{className:"sm:max-w-[500px]",children:[e.jsxs(ue,{children:[e.jsx(he,{children:"Project Description"}),e.jsx(fe,{children:b==null?void 0:b.name})]}),e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg border text-sm leading-relaxed whitespace-pre-wrap",children:(b==null?void 0:b.description)||"No description available."})}),e.jsx(ge,{children:e.jsx(m,{onClick:()=>H(!1),children:"Close"})})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/20 lg:hidden z-10",onClick:()=>_(null)})]})})}export{Gs as default};
