import{b as S,r as c,m as g,j as e,L as _,$ as B,S as h}from"./app-BJCScVp8.js";import{A as N,S as E,a as I,d as A}from"./app-layout-Dx_ikLQ6.js";import{B as f}from"./button-z0m9xNlq.js";import{C,a as w,b,c as L}from"./card-C3J1ZYF8.js";import{I as $}from"./input-DtqahtNM.js";import{L as D}from"./label-CfOAUezV.js";import{M}from"./MultiSelect-e82fdc9F.js";import"./index-BC-mwh3r.js";import"./createLucideIcon-C9CLbEZh.js";import"./index-Iw5nNgYb.js";import"./index-Ow1OBPom.js";import"./index-B_719ekL.js";import"./index-C8eqYZqc.js";import"./index-Bbk2dwLF.js";import"./app-logo-icon-BQV5XrCM.js";import"./circle-x-DDib0KDx.js";import"./folder-root-BNL5ri1Z.js";import"./grip-vertical-CltcTm7B.js";import"./index-ChLqg_xe.js";import"./index-D8mFFcYm.js";function se({blockType:r,roomTypes:l}){const a=!!r,p=S.useMemo(()=>l?Array.isArray(l)?l.map(s=>({value:s.id.toString(),label:s.name})):Object.entries(l).map(([s,t])=>({value:s,label:t})):[],[l]),[o,i]=c.useState([]);c.useEffect(()=>{if(r!=null&&r.room_type_Ids){const s=r.room_type_Ids.split(",").map(t=>t.trim()).filter(t=>t!==""&&t!==null&&t!==void 0);console.log("Parsed room_type_Ids:",s),i(s)}else i([])},[r]);const{data:u,setData:d,processing:x,errors:m,reset:j}=g({name:(r==null?void 0:r.name)||"",room_type_Ids:(r==null?void 0:r.room_type_Ids)||""});c.useEffect(()=>{const s=o.join(",");d("room_type_Ids",s)},[o,d]);const y=s=>{s.preventDefault();const t={name:u.name,room_type_Ids:o.join(",")};console.log("Submitting data:",t),a?h.put(`/block-types/${r.id}`,t,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{console.log("Block type updated successfully")},onError:n=>{console.log("Errors:",n)}}):h.post("/block-types",t,{onSuccess:()=>{j()},onError:n=>{console.log("Errors:",n)}})},v=[{title:"Block Types",href:"/block-types"},{title:a?"Edit Block Type":"Add Block Type",href:"#"}];return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(_,{title:a?"Edit Block Type":"Add Block Type"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(b,{className:"text-2xl font-bold",children:a?"Edit Block Type":"Add Block Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Edit Block type details":"Create a new Block type"})]}),e.jsx(E,{}),e.jsx(L,{className:"pt-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"name",children:"Block Type Name"}),e.jsx($,{id:"name",value:u.name,onChange:s=>d("name",s.target.value),placeholder:"Enter Block type name",className:m.name?"border-red-500":""}),m.name&&e.jsx("p",{className:"text-sm text-red-500",children:m.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{options:p,value:o,onChange:i,placeholder:"Choose room types...",label:"Select Room Types"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:o.length>0?`${o.length} room type(s) selected: ${o.map(s=>{const t=p.find(n=>n.value===s);return t?t.label:s}).join(", ")}`:"No room types selected"}),m.room_type_Ids&&e.jsx("p",{className:"text-sm text-red-500",children:m.room_type_Ids})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(B,{href:"/block-types",children:e.jsxs(f,{type:"button",variant:"secondary",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(f,{type:"submit",disabled:x,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),x?a?"Saving...":"Adding...":a?"Save Changes":"Add Block Type"]})]})]})})]})})]})}export{se as default};
