import{b as g,m as S,j as e,L as _,$ as v,S as p}from"./app-D4o7eROr.js";import{A as b,S as y,a as D,d as N}from"./app-layout-DRtG-ld1.js";import{B as u}from"./button-D9tlOds1.js";import{C,a as w,b as A,c as E}from"./card-CjF9dYHh.js";import{I as n}from"./input-BzfJ6MBH.js";import{L as m}from"./label-DKo8Nw29.js";import{S as I,a as L,b as F,c as B,d as O}from"./select-Db6fLHzD.js";import"./index-CRc6VPtR.js";import"./createLucideIcon-BRFlh17y.js";import"./index-a-jNbs9e.js";import"./index-CHZK6BuV.js";import"./index-CAaDZYh5.js";import"./index-BEwQ2GMD.js";import"./index-Y5wvXE6M.js";import"./app-logo-icon-DGfZ8sC5.js";import"./circle-x-VGXzQpcn.js";import"./folder-root-Dt4cfWMt.js";import"./grip-vertical-BAn3kiHD.js";import"./index-DoW7FhHn.js";import"./index-BMr_0gtK.js";function te({donation:t,donationTypes:d}){const r=!!t;console.log("donationTypes:",d);const x=g.useMemo(()=>d?Array.isArray(d)?d:Object.entries(d).map(([a,l])=>({id:parseInt(a),name:l})):[],[d]),{data:s,setData:i,processing:o,errors:c,reset:h}=S({details:(t==null?void 0:t.details)||"",amount:(t==null?void 0:t.amount)||0,institute_id:(t==null?void 0:t.institute_id)||0,donation_type_id:(t==null?void 0:t.donation_type_id)||0,added_date:t!=null&&t.added_date?new Date(t.added_date):new Date}),j=a=>{a.preventDefault();const l={...s,added_date:s.added_date?s.added_date.toISOString().split("T")[0]:null};r?p.put(`/donations/${t.id}`,l,{preserveScroll:!0,preserveState:!0}):p.post("/donations",l,{onSuccess:()=>{h()}})},f=[{title:"Donations",href:"/donations"},{title:r?"Edit Donation":"Add Donation",href:"#"}];return e.jsxs(b,{breadcrumbs:f,children:[e.jsx(_,{title:r?"Edit Donation":"Add Donation"}),e.jsx("div",{className:"flex-1 p-4 md:p-6 w-[70vw] mx-auto",children:e.jsxs(C,{children:[e.jsxs(w,{children:[e.jsx(A,{className:"text-2xl font-bold",children:r?"Edit Donation":"Add Donation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Edit donation details":"Create a new donation"})]}),e.jsx(y,{}),e.jsx(E,{className:"pt-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",children:"Donation Name"}),e.jsx(n,{id:"name",value:s.details,onChange:a=>i("details",a.target.value),placeholder:"Enter donation details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"amount",children:"Amount"}),e.jsx(n,{id:"amount",type:"number",value:s.amount,onChange:a=>i("amount",Number(a.target.value)),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"donation_type_id",children:"Donation Type"}),e.jsxs(I,{value:s.donation_type_id.toString(),onValueChange:a=>i("donation_type_id",parseInt(a)),children:[e.jsx(L,{children:e.jsx(F,{placeholder:"Select donation type"})}),e.jsx(B,{children:x.map(a=>e.jsx(O,{value:a.id.toString(),children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"added_date",children:"Date"}),e.jsx(n,{id:"added_date",type:"date",value:s.added_date?s.added_date.toISOString().split("T")[0]:"",onChange:a=>i("added_date",a.target.value?new Date(a.target.value):null),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"}),c.added_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.added_date})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6",children:[e.jsx(v,{href:"/donations",children:e.jsxs(u,{type:"button",variant:"secondary",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsxs(u,{type:"submit",disabled:o,children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),o?r?"Saving...":"Adding...":r?"Save Changes":"Add Donation"]})]})]})})]})})]})}export{te as default};
